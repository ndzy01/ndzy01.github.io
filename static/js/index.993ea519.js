(()=>{"use strict";var e={20935:function(e,t,n){var a=n("85893"),i=n("67294"),r=n("20745"),l=n("79655"),s=n("4973"),o=n("49464"),d=n("89250"),c=n("55287"),p=n("47389"),u=n("16451"),m=n("82061"),g=n("2848"),h=n("87584"),j=n("50387"),x=n("96638"),f=n("47483"),y=n("13093"),v=n("59408"),b=n("80430");let w=b.Z.create({baseURL:"https://ndzy-s.vercel.app",timeout:6e4,withCredentials:!1}),I=b.Z.create({baseURL:"https://music-api-five-blush.vercel.app",timeout:6e4,withCredentials:!0});w.interceptors.request.use(e=>{let t=sessionStorage.getItem("token");return t&&(e.headers={Authorization:`Bearer ${t}`}),e},e=>{Promise.reject(e).then()}),w.interceptors.response.use(e=>{var t,n;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.msg)&&v.ZP.info({content:null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.msg}).then(),e.data},e=>{var t,n;if((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.statusCode)===401){"#/login"!==window.location.hash&&"#/"!==window.location.hash&&(window.location.href=`${window.location.origin}/#/login`);return}v.ZP.error({content:"出错了，请联系管理员"}).then()});let Z=e=>[...e].sort((e,t)=>e.order-t.order).map(e=>{let t={...e,key:e.id,label:e.title,value:e.id};return Array.isArray(e.children)&&e.children.length>0?t.children=Z(e.children):delete t.children,t}),k="NDZY",[G,C]=function(e,t){let n=i.createContext(void 0);function r(e){let{children:t,...r}=e,l=i.useMemo(()=>r,Object.values(r));return(0,a.jsx)(n.Provider,{value:l,children:t})}return r.displayName=e+"Provider",[r,function(a){let r=i.useContext(n);if(r)return r;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}(k),M=()=>C(k),_=e=>{let{children:t}=e,[n,r]=(0,i.useState)(!1),[l,s]=(0,i.useState)([]),[o,d]=(0,i.useState)([]),[c,p]=(0,i.useState)([]),[u,m]=(0,i.useState)(),[g,h]=(0,i.useState)(),[j,k]=(0,x.Z)({data:[],songs:[],type:"0",currentIndex:-1,fileType:"flac"}),C=async()=>{r(!0);let e=await w({url:"/auth",method:"GET"});return e&&sessionStorage.setItem("name",e.data.name),r(!1),e},M=async e=>{var t,n,a;r(!0);let i=await w({url:"/user/login",method:"POST",data:e});(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.token)&&(sessionStorage.setItem("token",null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.token),sessionStorage.setItem("name",null==i?void 0:null===(a=i.data)||void 0===a?void 0:a.name),window.location.reload()),r(!1)},_=async()=>{r(!0);let e=await w({url:"/article",method:"GET"});r(!1),s(Z((null==e?void 0:e.data)||[]))},S=async e=>{r(!0),await w({url:`/article/${e}`,method:"DELETE"}),r(!1),h(void 0),_().then()},z=async(e,t)=>{r(!0),await w({url:`/article/${e}`,method:"PATCH",data:t});let n=await w({url:`/article/${e}`,method:"GET"});r(!1),h(null==n?void 0:n.data),_().then()},P=async e=>{r(!0),await w({url:"/article",method:"POST",data:e}),r(!1),_().then()},E=async e=>{r(!0);let t=await w({url:`/article/${e}`,method:"GET"});r(!1),h(null==t?void 0:t.data),_().then()},T=async e=>{let t;r(!0);let n=await w(`/article/${e}`);return t=n.data.root?(await w("/article/pid/0")).data:(await w(`/article/pid/${n.data.parent.id}`)).data,r(!1),t},O=async e=>{r(!0),await w("/article/updateOrder",{data:e,method:"POST"}),r(!1)},q=async e=>{r(!0);try{await I("/login/cellphone",{method:"GET",params:{...e}}),await $(),r(!1)}catch(e){r(!1)}},$=async()=>{r(!0);try{if((await I("/login/status")).data.data.account){let e=await I("/user/account"),t=await I("/user/playlist",{method:"GET",params:{uid:e.data.account.id}});r(!1),p(t.data.playlist.map(e=>({id:e.id,name:e.name})));return}r(!1),v.ZP.info("请先登录")}catch(e){r(!1)}},R=async e=>{r(!0);try{let t=(await I("/playlist/detail",{method:"GET",params:{id:e}})).data.playlist.trackIds.map(e=>e.id),n=(await I("/song/detail",{method:"GET",params:{ids:t.toString()}})).data.songs.map(e=>{let{id:t,name:n,al:a,ar:i,mv:r,dt:l}=e;return{id:t,name:n,artists:i,duration:l,mvId:r,albumName:a.name,img:a.picUrl}});r(!1),d(n)}catch(e){r(!1)}},B=async()=>{r(!0);try{let e=(await I("/user/cloud",{method:"GET",params:{limit:1e4}})).data.data.map(e=>{let{songId:t,songName:n,simpleSong:a}=e;return{id:t,name:n,img:a.al.picUrl}});r(!1),d(e)}catch(e){r(!1)}},F=async e=>{r(!0);try{let t=await I("/song/url/v1",{method:"GET",params:{id:e,level:"lossless"}}),n=await I("/song/detail",{method:"GET",params:{ids:[e].toString()}});t.data.data&&t.data.data.length>0&&m({...t.data.data[0],name:n.data.songs[0].name,picUrl:n.data.songs[0].al.picUrl}),r(!1)}catch(e){r(!1)}},N=async()=>{let e=!0,t=[];for(let e=0;e<1e3;e++)t.push(`https://www.ndzy01.com/music${e+1}/data.json`);let n=[];for await(let a of t){if(!e)break;try{let e=await (0,b.Z)(a);e&&n.push(...e.data)}catch(t){e=!1}}k({data:n,songs:n.filter(e=>e.fileType===j.fileType)})};return(0,i.useEffect)(()=>{N().then()},[]),(0,f.Z)(()=>{N().then()},36e5),(0,y.Z)(()=>{k({song:j.songs[j.currentIndex]})},[j.currentIndex]),(0,a.jsx)(G,{loading:n,setLoading:r,articles:l,article:g,songs:o,songGroup:c,song:u,ndzyMusic:j,setNdzyMusic:k,api:{login:{auth:C,login:M},article:{query:_,del:S,find:E,save:z,create:P,initOrderData:T,updateOrder:O},music:{login:q,query:R,song:F,cloud:B,group:$}},children:t})},{DirectoryTree:S}=g.Z,z=()=>{let e=(0,d.s0)(),t=M(),[n,r]=(0,i.useState)([]),[l,o]=(0,i.useState)([]),[g,x]=(0,i.useState)(!0);return(0,a.jsx)(S,{treeData:t.articles,onExpand:e=>{r(e),x(!1)},expandedKeys:n,autoExpandParent:g,onSelect:e=>{o(e)},selectedKeys:l,titleRender:n=>(0,a.jsxs)(h.Z,{size:24,children:[(0,a.jsx)("span",{style:{display:"inline-block",width:120},children:n.title}),(0,a.jsx)(c.Z,{onClick:()=>{e(`/article/view/${n.key}`)}}),(0,a.jsx)(p.Z,{onClick:()=>{e(`/article/edit/${n.key}`)}}),(0,a.jsx)(s.Z,{onClick:()=>{e(`/article/add/${n.key}`)}}),(0,a.jsx)(u.Z,{onClick:()=>{e(`/article/sort/${n.key}`)}}),n.isLeaf&&(0,a.jsx)(j.Z,{title:"删除后不可恢复",description:"确认删除？",onConfirm:()=>{t.api.article.del(n.key).then()},onCancel:()=>{},okText:"确认",cancelText:"取消",children:(0,a.jsx)(m.Z,{})})]})})};var P=n("22880"),E=n("70091"),T=n("28113"),O=n("53735"),q=n("50716");n("94936");var $=n("57357");let R=e=>{let{value:t,onChange:n}=e,i="id_md_"+(0,$.Z)(),r=async(e,t)=>{t((await Promise.all(e.map(e=>new Promise((t,n)=>{let a=new FormData,i=e.name;a.append("file",e),a.append("name",i),w.post("/img",a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>t(e)).catch(e=>n(e))})))).map(e=>e.data.url))};return(0,a.jsx)(q.E,{editorId:i,modelValue:t,onChange:n,onUploadImg:r,toolbars:["preview","-","bold","underline","italic","-","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","pageFullscreen","fullscreen","htmlPreview","catalog"]})};var B=n("78234"),F=n("66659"),N=n("94697"),U=n("32339"),D=n("45587"),L=n("24285"),A=n("98132"),V=n("644");let K=[{title:"唯一标识",dataIndex:"id"},{title:"标题",dataIndex:"title"},{title:"order",dataIndex:"order"}],H=e=>{let{attributes:t,listeners:n,setNodeRef:i,transform:r,transition:l,isDragging:s}=(0,D.nB)({id:e["data-row-key"]}),o={...e.style,transform:L.ux.Translate.toString(r),transition:l,cursor:"move",...s?{position:"relative",zIndex:9999}:{}};return(0,a.jsx)("tr",{...e,ref:i,style:o,...t,...n})};var W=n("14361"),X=n("53682"),Y=n("87687"),J=n("80492"),Q=n("81282");let ee=()=>(console.error((0,d.lk)()),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"出错了！"}),(0,a.jsx)("p",{children:"抱歉，页面不存在或您没有访问权限。"}),(0,a.jsx)("a",{href:"/",children:"返回首页"})]})),et=()=>{let[e,t]=(0,i.useState)("user"),n=(0,i.useRef)(null),r=async()=>{try{let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:e}});n.current&&(n.current.srcObject=t)}catch(e){console.error("摄像头启动失败:",e)}};return(0,i.useEffect)(()=>(r().then(),()=>{n.current&&n.current.srcObject&&n.current.srcObject.getTracks().forEach(e=>e.stop())}),[e]),(0,a.jsxs)("div",{children:[(0,a.jsx)("video",{ref:n,autoPlay:!0,playsInline:!0,style:{width:"100%"}}),(0,a.jsx)("button",{onClick:()=>{t(e=>"user"===e?"environment":"user")},children:"切换摄像头"})]})};var en=n("74450");let ea=e=>{let{imgList:t=[],style:n={}}=e,r=(0,i.useRef)(null),l=(0,i.useRef)(null),s=[],o=t.length;return(0,i.useEffect)(()=>{let e=r.current,n=l.current;if(!e||!n)return;let a=e.getContext("2d"),i=n.getContext("2d");for(let e=1;e<=o;e++){let n=new Image;n.src=t[e-1],s[e-1]=n}let d=0,c=()=>{++d===o&&p()};s.forEach(e=>{e.onload=c});let p=()=>{let e=en.p8.timeline({repeat:-1});s.forEach((t,n)=>{e.to({},{duration:.02,onUpdate:()=>u(n)})})},u=t=>{i.clearRect(0,0,n.width,n.height),i.drawImage(s[t],0,0,n.width,n.height),a.clearRect(0,0,e.width,e.height),a.drawImage(n,0,0,e.width,e.height)}},[o]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{ref:r,style:{width:400,height:300,...n}}),(0,a.jsx)("canvas",{ref:l,style:{display:"none",width:400,height:300,...n}})]})},ei=n.p+"static/image/IMG_8998.02ecbc12.jpg",er=n.p+"static/image/IMG_8999.33173c86.jpg",el=n.p+"static/image/IMG_9001.2dc8f3ef.jpg",es=n.p+"static/image/IMG_9002.8716aadf.jpg",eo=n.p+"static/image/IMG_9003.069f2e2b.jpg",ed=n.p+"static/image/IMG_9004.dc620fb1.jpg",ec=n.p+"static/image/IMG_9005.37d8519f.jpg",ep=n.p+"static/image/IMG_9006.704e2ffc.jpg",eu=n.p+"static/image/IMG_9007.9dabf61f.jpg",em=n.p+"static/image/IMG_9008.bcab9303.jpg",eg=n.p+"static/image/IMG_9009.332a7b3d.jpg",eh=n.p+"static/image/IMG_9010.060f3bb0.jpg",ej=n.p+"static/image/IMG_9011.649a9f73.jpg",ex=n.p+"static/image/IMG_9012.ef442ba2.jpg",ef=n.p+"static/image/IMG_9013.074f41e6.jpg",ey=n.p+"static/image/IMG_9014.c5b0ca31.jpg",ev=n.p+"static/image/IMG_9015.16d513c0.jpg",eb=n.p+"static/image/IMG_9016.70b63e0b.jpg",ew=n.p+"static/image/IMG_9017.3be1864c.jpg",eI=n.p+"static/image/IMG_9018.b0d42e50.jpg",eZ=n.p+"static/image/IMG_9019.ce159c6e.jpg",ek=n.p+"static/image/IMG_9020.3a30f93a.jpg",eG=n.p+"static/image/IMG_9022.840eb790.jpg",eC=n.p+"static/image/IMG_9023.0fa3668b.jpg",eM=n.p+"static/image/IMG_9024.ef86f355.jpg",e_=n.p+"static/image/IMG_9025.6b35ec49.jpg",eS=n.p+"static/image/IMG_9026.96ebcfc1.jpg",ez=n.p+"static/image/IMG_9027.d4578350.jpg",eP=n.p+"static/image/IMG_9028.b97a8a31.jpg",eE=n.p+"static/image/IMG_9029.874fa668.jpg",eT=n.p+"static/image/IMG_9030.e6e39fa9.jpg",eO=n.p+"static/image/IMG_9031.d6a09444.jpg",eq=n.p+"static/image/IMG_9032.1f19e262.jpg",e$=n.p+"static/image/IMG_9033.739c8eda.jpg",eR=n.p+"static/image/IMG_9034.42ccc28f.jpg",eB=n.p+"static/image/IMG_9035.7cab9c23.jpg",eF=n.p+"static/image/IMG_9036.f2bccb3e.jpg",eN=n.p+"static/image/IMG_9037.c641b79a.jpg",eU=n.p+"static/image/IMG_9038.bd77b1ea.jpg",eD=n.p+"static/image/IMG_9039.6f95120f.jpg",eL=n.p+"static/image/IMG_9040.1e61baf9.jpg",eA=n.p+"static/image/IMG_9041.4b665536.jpg",eV=n.p+"static/image/IMG_9042.3edeb210.jpg",eK=n.p+"static/image/IMG_9043.2c3f2f0c.jpg",eH=n.p+"static/image/IMG_9044.5fb86036.jpg",eW=n.p+"static/image/IMG_9045.9351a2d8.jpg",eX=[{src:"https://github.com/Gamote/lottie-react",name:"lottie-react"},{src:"https://github.com/airbnb/lottie-web",name:"lottie-web"},{src:"https://www.ndzy01.com/ndzy-antd",name:"在线文档"},{src:"https://www.ndzy01.com/ndzy-project",name:"ndzy-project"},{src:"https://www.yuque.com/u22409297/fqv2ol",name:"blog"},{src:"https://www.yuque.com/u22409297/aqgf01",name:"数据结构与算法"},{src:"https://labuladong.github.io/algo/di-ling-zh-bfe1b/xue-xi-sua-01220/",name:"算法小抄"},{src:"http://zh.zlibrary-china.se/",name:"图书"},{src:"https://github.com/liujuping",name:"liujuping"},{src:"https://pythontutor.com/javascript.html#mode=edit",name:"javascript可视化"},{src:"https://www.jsdelivr.com/package/gh/ndzy01/img?tab=stats",name:"ndzy img 访问量统计"},{src:"https://juejin.cn/post/6844904131795091464",name:"React源码学习"},{src:"https://pomb.us/build-your-own-react/",name:"Build your own React"},{src:"https://cn1.hkss-net.xyz/auth/login",name:"vpn"},{src:"https://visualgo.net/zh",name:"算法可视化"},{src:"https://visualgo.net/zh",name:"算法可视化"},{src:"https://ndzy01.gitee.io/ndzy-manage/",name:"管理页"}];var eY=n("32444"),eJ=n("82925"),eQ=n("43503"),e0=n("34041"),e1=n("62601"),e9=n("22004"),e3=n.n(e9),e4=n("38014"),e2=n("21985"),e6=n("932"),e5=n("95911"),e8=n("11489");function e7(e){let t=Math.round(e),n=Math.floor(t/60),a=n.toString().padStart(2,"0"),i=(t%60).toString().padStart(2,"0");return`${a}:${i}`}let te=e=>{let{state:t,setState:n}=e;return t.show?(0,a.jsx)(e2.Z,{style:{zIndex:999,position:"fixed",top:32,right:32,padding:16},onClick:()=>n({show:!1})}):(0,a.jsx)(e4.Z,{style:{zIndex:999,position:"fixed",top:32,right:32,padding:16},onClick:()=>n({show:!0})})},tt=()=>{var e,t;let{ndzyMusic:n,setNdzyMusic:r}=M(),[l,s]=(0,x.Z)({playing:!1,show:!1,volume:.1,duration:0,playedSeconds:0}),o=(0,i.useRef)(null);return n.songs.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(te,{state:l,setState:s}),(0,a.jsx)("div",{style:{position:"fixed",top:32,right:32},children:(0,a.jsxs)("div",{style:{visibility:l.show?"visible":"hidden",background:"#f7f7f7",boxShadow:"0 2px 5px 1px rgba(64, 60, 67, .16);",padding:16,borderRadius:16},children:[(null==n?void 0:null===(e=n.song)||void 0===e?void 0:e.url)&&(0,a.jsx)(e3(),{ref:o,onDuration:e=>{s({duration:e})},onProgress:e=>{s({playedSeconds:e.playedSeconds})},playing:l.playing,height:0,width:0,url:n.song.url,volume:l.volume,onReady:()=>{s({playing:!0})},onEnded:()=>{s({playing:!1}),"1"===n.type&&r({currentIndex:Math.floor(Math.random()*n.songs.length)}),"0"===n.type&&(n.currentIndex===n.songs.length-1?r({currentIndex:0}):r({currentIndex:n.currentIndex+1}))}}),(0,a.jsxs)(h.Z,{direction:"vertical",size:16,style:{marginTop:16,width:"100%"},children:[(0,a.jsx)(e0.Z,{showSearch:!0,optionFilterProp:"label",style:{width:"100%"},value:null===(t=n.songs[n.currentIndex])||void 0===t?void 0:t.id,onChange:e=>r({currentIndex:n.songs.findIndex(t=>t.id===e)}),options:n.songs.map(e=>({value:e.id,label:e.name})),placeholder:"请选择需要播放的歌曲"}),(0,a.jsxs)(h.Z,{children:[(0,a.jsxs)(e5.ZP.Group,{value:n.type,onChange:e=>r({type:e.target.value}),children:[(0,a.jsx)(e5.ZP.Button,{value:"0",children:"顺序"}),(0,a.jsx)(e5.ZP.Button,{value:"1",children:"随机"})]}),(0,a.jsxs)(e5.ZP.Group,{value:n.fileType,onChange:e=>{r({fileType:e.target.value,songs:n.data.filter(t=>t.fileType===e.target.value)})},children:[(0,a.jsx)(e5.ZP.Button,{value:"flac",children:"无损"}),(0,a.jsx)(e5.ZP.Button,{value:"mp3",children:"普通"})]})]}),n.song&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:["正在播放：",(0,a.jsx)("span",{style:{color:"pink"},children:n.song.name})]}),(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(O.ZP,{type:"link",onClick:()=>{n.currentIndex>1?r({currentIndex:n.currentIndex-1}):r({currentIndex:n.songs.length-1})},children:"上一首"}),(0,a.jsx)(O.ZP,{type:"link",onClick:()=>s({playing:!l.playing}),children:l.playing?"暂停":"播放"}),(0,a.jsx)(O.ZP,{type:"link",onClick:()=>{n.currentIndex<n.songs.length-1?r({currentIndex:n.currentIndex+1}):r({currentIndex:0})},children:"下一首"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)("span",{style:{color:"#999"},children:`${e7(l.playedSeconds)}/${e7(l.duration)}`}),(0,a.jsx)(e8.Z,{tooltip:{formatter:e=>e7(e||0)},style:{width:"100%"},min:0,max:l.duration,step:1,value:l.playedSeconds,onChange:e=>{s({playedSeconds:e}),o.current.seekTo(e)}})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(O.ZP,{type:"link",children:"音量"}),(0,a.jsx)(e8.Z,{tooltip:{formatter:e=>10*(e||0)},style:{width:"100%"},min:0,max:1,step:.1,value:l.volume,onChange:e=>s({volume:e})})]})]})]})]})})]})};async function tn(){return{name:sessionStorage.getItem("name")}}let ta=[{key:"/",label:"首页"},{key:"/article",label:"文章"},{key:"/music",label:"网易云音乐"},{key:"/ndzy-music",label:"音乐"}],ti=(0,l.cP)([{path:"/",element:(0,a.jsx)(()=>{let e=(0,d.f_)(),t=(0,d.s0)(),[n,r]=(0,i.useState)(!1);return(0,a.jsxs)("div",{className:"container",children:[n?(0,a.jsx)(O.ZP,{style:{position:"fixed",left:16,top:16},icon:(0,a.jsx)(e2.Z,{}),onClick:()=>r(!1)}):(0,a.jsxs)("aside",{className:"sidebar",style:{display:n?"none":"block",zIndex:9999999},children:[(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:16},children:(0,a.jsx)(O.ZP,{icon:(0,a.jsx)(e4.Z,{}),onClick:()=>r(!0)})}),(0,a.jsxs)("header",{className:"header",children:[(0,a.jsxs)("h1",{children:["欢迎 ",(null==e?void 0:e.name)||""]}),(0,a.jsx)("div",{className:"user-info",children:(0,a.jsx)("a",{onClick:()=>{sessionStorage.setItem("token",""),sessionStorage.setItem("name",""),t("/login"),window.location.reload()},children:"注销"})})]}),(0,a.jsx)(e6.Z,{style:{borderRadius:5},onClick:e=>{t(e.key)},defaultSelectedKeys:["/"],mode:"inline",items:ta})]}),(0,a.jsx)("main",{className:"main-content",style:{overflow:"auto"},children:(0,a.jsxs)("section",{className:"content",id:"ndzy-content",children:[(0,a.jsx)(d.j3,{}),(0,a.jsx)(tt,{})]})})]})},{}),errorElement:(0,a.jsx)(ee,{}),loader:tn,children:[{index:!0,element:(0,a.jsx)(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{padding:"1rem"},children:[(0,a.jsx)(et,{}),(0,a.jsx)(ea,{imgList:[ei,er,el,es,eo,ed,ec,ep,eu,em,eg,eh,ej,ex,ef,ey,ev,eb,ew,eI,eZ,ek,ej,eG,eC,eM,e_,eS,ez,eP,eE,eT,eO,eq,e$,eR,eB,eF,eN,eU,eD,eL,eA,eV,eK,eH,eW]}),(0,a.jsx)("ul",{children:eX.map(e=>(0,a.jsx)("li",{style:{margin:"1rem 0"},children:(0,a.jsx)("a",{target:"_blank",href:e.src,children:e.name})},Math.random()))})]}),(0,a.jsx)("a",{href:"https://beian.miit.gov.cn/",target:"_blank",children:"豫ICP备19035495号-1"})]}),{})},{path:"/article",element:(0,a.jsx)(()=>(0,a.jsx)(d.j3,{}),{}),errorElement:(0,a.jsx)(ee,{}),children:[{index:!0,element:(0,a.jsx)(()=>{let e=(0,d.s0)(),t=M();return(0,i.useEffect)(()=>{t.api.article.query().then()},[]),t.loading?(0,a.jsx)(o.Z,{size:"large"}):(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Z,{style:{margin:16},onClick:()=>{e("/article/add/0")}}),(0,a.jsx)(z,{})]})},{})},{path:"/article/add/:id",element:(0,a.jsx)(()=>{let e=(0,d.s0)(),t=M(),{id:n}=(0,d.UO)();return t.loading?(0,a.jsx)(o.Z,{size:"large"}):(0,a.jsxs)(P.Z,{initialValues:{title:"",content:"",parentId:"0"===n?void 0:n},onFinish:n=>{t.api.article.create({...n}).then(()=>{e("/article")})},children:[(0,a.jsx)(P.Z.Item,{name:"parentId",children:(0,a.jsx)(E.Z,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择父级目录",allowClear:!0,treeDefaultExpandAll:!0,treeData:t.articles})}),(0,a.jsx)(P.Z.Item,{name:"title",rules:[{required:!0,message:"标题不能为空"}],children:(0,a.jsx)(T.Z,{placeholder:"请输入标题"})}),(0,a.jsx)(P.Z.Item,{name:"content",rules:[{required:!0,message:"内容不能为空"}],children:(0,a.jsx)(R,{})}),(0,a.jsx)(O.ZP,{disabled:t.loading,htmlType:"submit",type:"primary",block:!0,children:"提交"})]})},{})},{path:"/article/edit/:id",element:(0,a.jsx)(()=>{var e,t;let n=M(),{id:i}=(0,d.UO)(),r=(0,d.s0)(),l=()=>{!i&&r("/article"),n.api.article.find(i||"").then()};return(0,y.Z)(()=>{l()},[i]),(0,B.Z)(()=>{l()}),n.loading?(0,a.jsx)(o.Z,{size:"large"}):(0,a.jsxs)(P.Z,{initialValues:{title:null===(e=n.article)||void 0===e?void 0:e.title,content:null===(t=n.article)||void 0===t?void 0:t.content},onFinish:e=>{var t,a;(null===(t=n.article)||void 0===t?void 0:t.id)&&n.api.article.save(null===(a=n.article)||void 0===a?void 0:a.id,{...e}).then(()=>{r("/article")})},children:[(0,a.jsx)(P.Z.Item,{name:"title",rules:[{required:!0,message:"标题不能为空"}],children:(0,a.jsx)(T.Z,{placeholder:"请输入标题"})}),(0,a.jsx)(P.Z.Item,{name:"content",rules:[{required:!0,message:"内容不能为空"}],children:(0,a.jsx)(R,{})}),(0,a.jsx)(O.ZP,{disabled:n.loading,htmlType:"submit",type:"primary",block:!0,children:"提交"})]})},{})},{path:"/article/view/:id",element:(0,a.jsx)(()=>{var e,t;let n=(0,i.useRef)(null),{id:r}=(0,d.UO)(),l=(0,d.s0)(),s="id_md_"+(0,$.Z)(),c=M(),[p,u]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{!r&&l("/article"),c.api.article.find(r||"").then()},[l,r]),(0,i.useEffect)(()=>{n.current=document.getElementById("ndzy-content")},[]),c.loading?(0,a.jsx)(o.Z,{size:"large"}):(0,a.jsxs)("div",{children:[(0,a.jsx)(J.Z,{editorId:s,modelValue:null===(e=c.article)||void 0===e?void 0:e.content}),(0,a.jsx)(Q.M,{editorId:s,scrollElement:n.current}),(0,a.jsxs)(V.Z.Group,{shape:"circle",style:{insetInlineEnd:24,top:24},children:[(0,a.jsx)(V.Z,{icon:(0,a.jsx)(W.Z,{}),onClick:()=>{u(!0)}}),(0,a.jsx)(V.Z,{icon:(0,a.jsx)(X.Z,{}),onClick:()=>{g(!0)}})]}),(0,a.jsx)(Y.Z,{title:"目录",onClose:()=>{g(!1)},open:m,zIndex:0x3b9ac9ff,children:(0,a.jsx)(z,{})}),(0,a.jsxs)(Y.Z,{title:"文章目录",onClose:()=>{u(!1)},open:p,zIndex:0x3b9ac9ff,children:[(0,a.jsx)(Q.M,{editorId:s,scrollElement:n.current}),(0,a.jsx)("div",{style:{display:"none"},children:(0,a.jsx)(J.Z,{editorId:s,modelValue:null===(t=c.article)||void 0===t?void 0:t.content})})]})]})},{})},{path:"/article/sort/:id",element:(0,a.jsx)(()=>{let e=(0,d.s0)(),t=M(),{id:n}=(0,d.UO)(),[r,l]=(0,i.useState)([]),s=(0,N.Dy)((0,N.VT)(N.we,{activationConstraint:{distance:1}}));return(0,i.useEffect)(()=>{n&&t.api.article.initOrderData(n).then(e=>{l(e||[])})},[n]),t.loading?(0,a.jsx)(o.Z,{size:"large"}):(0,a.jsx)(N.LB,{sensors:s,modifiers:[U.DL],onDragEnd:e=>{let{active:t,over:n}=e;t.id!==(null==n?void 0:n.id)&&l(e=>{let a=e.findIndex(e=>e.id===t.id),i=e.findIndex(e=>e.id===(null==n?void 0:n.id)),r=e[a].order;return e[a].order=e[i].order,e[a].isSort=!0,e[i].order=r,e[i].isSort=!0,(0,D.Rp)(e,a,i)})},children:(0,a.jsxs)(D.Fo,{items:r.map(e=>e.id),strategy:D.qw,children:[(0,a.jsx)(A.Z,{pagination:!1,components:{body:{row:H}},rowKey:"id",columns:K,dataSource:r}),(0,a.jsx)(V.Z.Group,{shape:"circle",style:{insetInlineEnd:24},children:(0,a.jsx)(V.Z,{icon:(0,a.jsx)(F.Z,{}),onClick:()=>{if(0!==r.filter(e=>e.isSort).map(e=>({id:e.id,order:e.order})).length)t.api.article.updateOrder(r.filter(e=>e.isSort).map(e=>({id:e.id,order:e.order}))).then(()=>{e("/article")})}})})]})})},{})}]},{path:"/music",element:(0,a.jsx)(()=>{let[e,t]=(0,i.useState)(!1),n=M(),[r,l]=(0,i.useState)("");return(0,i.useEffect)(()=>{n.api.music.group()},[]),(0,eQ.Z)(()=>{n.songGroup.length>0&&(l(n.songGroup[0].id),n.api.music.query(n.songGroup[0].id))},[n.songGroup]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.Z,{style:{marginBottom:16},children:[(0,a.jsx)(O.ZP,{type:"primary",onClick:()=>{t(!0)},children:"登录"}),(0,a.jsx)(e0.Z,{style:{width:120},value:r,onChange:e=>{l(e),n.api.music.query(e)},options:n.songGroup.map(e=>({label:e.name,value:e.id}))}),(0,a.jsx)(O.ZP,{onClick:()=>{n.api.music.cloud(),l("")},children:"云盘"})]}),n.loading&&(0,a.jsx)(o.Z,{size:"large",style:{marginBottom:16}}),(0,a.jsxs)("div",{style:{paddingBottom:100},children:[(0,a.jsx)(h.Z,{wrap:!0,size:32,children:n.songs.map(e=>(0,a.jsxs)("div",{style:{width:200},children:[(0,a.jsx)(e1.Z,{src:e.img,style:{width:120,height:160}}),(0,a.jsx)(O.ZP,{type:"link",onClick:()=>{n.api.music.song(e.id)},children:e.name})]},e.id))}),n.song&&(0,a.jsxs)("div",{style:{position:"fixed",bottom:32,left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(e1.Z,{src:n.song.picUrl,style:{width:80,height:60}}),n.song&&n.song.name]}),(0,a.jsx)(e3(),{playing:!0,height:60,url:n.song.url,controls:!0,onEnded:()=>{let e=Math.floor(Math.random()*n.songs.length);n.api.music.song(n.songs[e].id)}})]})]}),(0,a.jsx)(Y.Z,{open:e,onClose:()=>{t(!1)},children:(0,a.jsx)(eY.ZP,{locale:eJ.default,children:(0,a.jsxs)(P.Z,{name:"login",style:{maxWidth:600},initialValues:{remember:!0},onFinish:e=>{n.api.music.login(e).then(()=>{t(!1)})},autoComplete:"off",children:[(0,a.jsx)(P.Z.Item,{labelCol:{span:24},wrapperCol:{span:24},label:"手机号",name:"phone",rules:[{required:!0,message:"手机号不能为空"}],children:(0,a.jsx)(T.Z,{})}),(0,a.jsx)(P.Z.Item,{labelCol:{span:24},wrapperCol:{span:24},label:"密码",name:"password",rules:[{required:!0,message:"密码不能为空"}],children:(0,a.jsx)(T.Z.Password,{})}),(0,a.jsx)(P.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsx)(O.ZP,{type:"primary",htmlType:"submit",loading:n.loading,children:"登陆"})})]})})})]})},{})},{path:"/ndzy-music",element:(0,a.jsx)(()=>{let{ndzyMusic:e,setNdzyMusic:t}=M();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{paddingBottom:140,position:"relative"},children:(0,a.jsx)(h.Z,{wrap:!0,size:32,children:e.songs.map((n,i)=>{var r;return(0,a.jsx)("div",{style:{width:200},children:(0,a.jsx)(O.ZP,{style:(null==e?void 0:null===(r=e.song)||void 0===r?void 0:r.id)===n.id?{color:"green"}:{},type:"link",onClick:()=>{t({currentIndex:i})},children:n.name})},n.id)})})})})},{})},{path:"/login",element:(0,a.jsx)(()=>{let e=(0,d.s0)(),t=M();return(0,a.jsx)(eY.ZP,{locale:eJ.default,children:(0,a.jsxs)(P.Z,{name:"login",style:{maxWidth:600},initialValues:{remember:!0},onFinish:n=>{t.api.login.login(n).then(()=>{e("/"),window.location.reload()})},autoComplete:"off",children:[(0,a.jsx)(P.Z.Item,{labelCol:{span:24},wrapperCol:{span:24},label:"手机号",name:"mobile",rules:[{required:!0,message:"手机号不能为空"}],children:(0,a.jsx)(T.Z,{})}),(0,a.jsx)(P.Z.Item,{labelCol:{span:24},wrapperCol:{span:24},label:"密码",name:"password",rules:[{required:!0,message:"密码不能为空"}],children:(0,a.jsx)(T.Z.Password,{})}),(0,a.jsx)(P.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsx)(O.ZP,{type:"primary",htmlType:"submit",loading:t.loading,children:"登陆"})})]})})},{})}]}]),tr=document.getElementById("root");tr&&r.createRoot(tr).render((0,a.jsx)(i.StrictMode,{children:(0,a.jsx)(()=>(0,a.jsx)(_,{children:(0,a.jsx)(l.pG,{router:ti})}),{})}))}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(a,i){if(1&i&&(a=this(a)),8&i||"object"==typeof a&&a&&(4&i&&a.__esModule||16&i&&"function"==typeof a.then))return a;var r=Object.create(null);n.r(r);var l={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&a;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(function(e){l[e]=function(){return a[e]}});return l.default=function(){return a},n.d(r,l),r}})(),n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce(function(t,a){return n.f[a](e,t),t},[]))},n.u=function(e){return"static/js/async/"+({1895:"npm.lezer.python",3299:"npm.codemirror.lang-wast",3542:"npm.lezer.xml",3709:"npm.codemirror.lang-vue",3978:"npm.codemirror.lang-sql",4016:"npm.codemirror.lang-php",483:"npm.codemirror.lang-liquid",5007:"npm.codemirror.lang-java",5384:"npm.codemirror.lang-go",5561:"npm.codemirror.lang-sass",5753:"npm.lezer.go",5950:"npm.lezer.sass",5958:"npm.codemirror.lang-yaml",6416:"npm.lezer.yaml",657:"npm.codemirror.lang-rust",6615:"npm.codemirror.lang-angular",6877:"npm.codemirror.legacy-modes",808:"npm.lezer.rust",8117:"npm.lezer.php",836:"npm.codemirror.lang-less",8427:"npm.codemirror.lang-python",8893:"npm.lezer.java",8915:"npm.lezer.cpp",8950:"npm.codemirror.lang-cpp",9461:"npm.lezer.json",9553:"npm.codemirror.lang-json",9649:"npm.codemirror.lang-xml"})[e]+"."+({1895:"3298a80f",3299:"f4c6f701",3542:"d7b466d5",3709:"83e6d117",3978:"15a917c3",4016:"79a40abe",483:"39e72eef",5007:"4af997e1",5384:"c4b7afb3",5561:"23c54151",5753:"c1af8e2f",5950:"67a16e19",5958:"7914b048",6416:"f4998ae2",657:"82745582",6615:"dba57c79",6877:"cb74b960",808:"4e23dc52",8117:"4d580f00",836:"1e310b51",8427:"97b9bc60",8893:"8c719a01",8915:"9ec44730",8950:"c623df26",9461:"64d8ed68",9553:"8c5b9c4e",9649:"4c000557"})[e]+".js"},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},(()=>{var e={},t="ndzy:";n.l=function(a,i,r,l){if(e[a]){e[a].push(i);return}if(void 0!==r){for(var s,o,d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var p=d[c];if(p.getAttribute("src")==a||p.getAttribute("data-webpack")==t+r){s=p;break}}}!s&&(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+r),s.src=a),e[a]=[i];var u=function(t,n){s.onerror=s.onload=null,clearTimeout(m);var i=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(function(e){return e(n)}),t)return t(n)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),o&&document.head.appendChild(s)}})(),n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=function(t,a,i,r){if(a){r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,i,r];return}for(var s=1/0,l=0;l<e.length;l++){for(var a=e[l][0],i=e[l][1],r=e[l][2],o=!0,d=0;d<a.length;d++)(!1&r||s>=r)&&Object.keys(n.O).every(function(e){return n.O[e](a[d])})?a.splice(d--,1):(o=!1,r<s&&(s=r));if(o){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}})(),n.p="/",n.rv=function(){return"1.0.13"},(()=>{var e={2980:0,9475:0};n.f.j=function(t,a){var i=n.o(e,t)?e[t]:void 0;if(0!==i){if(i)a.push(i[2]);else if(9475!=t){var r=new Promise(function(n,a){i=e[t]=[n,a]});a.push(i[2]=r);var l=n.p+n.u(t),s=Error();n.l(l,function(a){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+l+")",s.name="ChunkLoadError",s.type=r,s.request=l,i[1](s)}},"chunk-"+t,t)}else e[t]=0}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i=a[0],r=a[1],l=a[2],s,o,d=0;if(i.some(function(t){return 0!==e[t]})){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var c=l(n)}for(t&&t(a);d<i.length;d++)o=i[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},a=self.webpackChunkndzy=self.webpackChunkndzy||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),n.ruid="bundler=rspack@1.0.13";var a=n.O(void 0,["6794","649","5315","534","6917","5907","7518","5651","6351","5939","4283","8524","2790","1424","1939","1193","6394","4932","8150","9449","4906","7863","179","8650","6379","8087","432","9066","7900","199","8277","5139","5092","4388","2892","1177","3784","4462","5020","2710","707","5269","687","5640","8348","3028","2385","4671","3151","1666","6018","9374","7975","3183","6312","553","9239","8037","1603","9511","916","5595","3931","1890","5815","2689","9666","7964","9125","6772","6383","9174","3044","9558","6101","6289","1402","240","2149","413","3505","6578","5405","9475","1907","3513","5500","3240","9211","8410","7475","6559","6847","4073","6640","9151","5440","6180","3476","1697","3455","7693","7430","7790","3122"],function(){return n("20935")});a=n.O(a)})();