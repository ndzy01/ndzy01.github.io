"use strict";(self.webpackChunkndzy=self.webpackChunkndzy||[]).push([["1939"],{8122:function(e,n,t){t.d(n,{OF:()=>k,ZP:()=>R,Qw:()=>L,FJ:()=>V,hT:()=>K});var r=t("6019"),l=t("8477"),a=t("324"),o=t("5002"),u=t("2685"),i=t("8133"),c=t("4788"),d=t("8708"),s=t("7341"),f=t("1770"),v=t("334"),p=t("7294");let h=function(e){var n=p.useRef({valueLabels:new Map});return p.useMemo(function(){var t=n.current.valueLabels,r=new Map,l=e.map(function(e){var n,l=e.value,o=null!==(n=e.label)&&void 0!==n?n:t.get(l);return r.set(l,o),(0,a.Z)((0,a.Z)({},e),{},{label:o})});return n.current.valueLabels=r,[l]},[e])};var m=t("1089"),y=t("7508"),g=t("344");let k=function(){return null};var b=["children","value"];function C(e){if(!e)return e;var n=(0,a.Z)({},e);return!("props"in n)&&Object.defineProperty(n,"props",{get:function(){return(0,v.ZP)(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),n}}),n}let S=function(e,n,t){var r=t.treeNodeFilterProp,l=t.filterTreeNode,o=t.fieldNames.children;return p.useMemo(function(){if(!n||!1===l)return e;if("function"==typeof l)t=l;else{var t,u=n.toUpperCase();t=function(e,n){return String(n[r]).toUpperCase().includes(u)}}return function e(r){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.reduce(function(r,u){var i=u[o],c=l||t(n,C(u)),d=e(i||[],c);return(c||d.length)&&r.push((0,a.Z)((0,a.Z)({},u),{},(0,y.Z)({isLeaf:void 0},o,d))),r},[])}(e)},[e,n,o,r,l])};function Z(e){var n=p.useRef();return n.current=e,p.useCallback(function(){return n.current.apply(n,arguments)},[])}var E=p.createContext(null),w=t("8404"),x=t("5105"),D=t("6982"),I=p.createContext(null);function N(e){return!e||e.disabled||e.disableCheckbox||!1===e.checkable}function P(e){return null==e}var M={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},T=p.forwardRef(function(e,n){var t=(0,c.lk)(),a=t.prefixCls,u=t.multiple,i=t.searchValue,d=t.toggleOpen,s=t.open,f=t.notFoundContent,v=p.useContext(I),h=v.virtual,m=v.listHeight,y=v.listItemHeight,g=v.listItemScrollOffset,k=v.treeData,b=v.fieldNames,C=v.onSelect,S=v.dropdownMatchSelectWidth,Z=v.treeExpandAction,P=v.treeTitleRender,T=v.onPopupScroll,L=p.useContext(E),K=L.checkable,V=L.checkedKeys,O=L.halfCheckedKeys,A=L.treeExpandedKeys,H=L.treeDefaultExpandAll,R=L.treeDefaultExpandedKeys,W=L.onTreeExpand,F=L.treeIcon,_=L.showTreeIcon,j=L.switcherIcon,U=L.treeLine,z=L.treeNodeFilterProp,J=L.loadData,G=L.treeLoadedKeys,Q=L.treeMotion,q=L.onTreeLoad,B=L.keyEntities,X=p.useRef(),Y=(0,D.Z)(function(){return k},[s,k],function(e,n){return n[0]&&e[1]!==n[1]}),$=p.useState(null),ee=(0,o.Z)($,2),en=ee[0],et=ee[1],er=B[en],el=p.useMemo(function(){return K?{checked:V,halfChecked:O}:null},[K,V,O]);p.useEffect(function(){if(s&&!u&&V.length){var e;null===(e=X.current)||void 0===e||e.scrollTo({key:V[0]}),et(V[0])}},[s]);var ea=String(i).toLowerCase(),eo=p.useState(R),eu=(0,o.Z)(eo,2),ei=eu[0],ec=eu[1],ed=p.useState(null),es=(0,o.Z)(ed,2),ef=es[0],ev=es[1],ep=p.useMemo(function(){return A?(0,l.Z)(A):i?ef:ei},[ei,ef,A,i]);p.useEffect(function(){if(i){var e,n,t;ev((e=k,n=b,t=[],!function e(r){r.forEach(function(r){var l=r[n.children];l&&(t.push(r[n.value]),e(l))})}(e),t))}},[i]);var eh=function(e){e.preventDefault()},em=function(e,n){var t=n.node;if(!(K&&N(t)))C(t.key,{selected:!V.includes(t.key)}),!u&&d(!1)};if(p.useImperativeHandle(n,function(){var e;return{scrollTo:null===(e=X.current)||void 0===e?void 0:e.scrollTo,onKeyDown:function(e){var n;switch(e.which){case x.Z.UP:case x.Z.DOWN:case x.Z.LEFT:case x.Z.RIGHT:null===(n=X.current)||void 0===n||n.onKeyDown(e);break;case x.Z.ENTER:if(er){var t=(null==er?void 0:er.node)||{},r=t.selectable,l=t.value;!1!==r&&em(null,{node:{key:en},selected:!V.includes(l)})}break;case x.Z.ESC:d(!1)}},onKeyUp:function(){}}}),0===Y.length)return p.createElement("div",{role:"listbox",className:"".concat(a,"-empty"),onMouseDown:eh},f);var ey={fieldNames:b};return G&&(ey.loadedKeys=G),ep&&(ey.expandedKeys=ep),p.createElement("div",{onMouseDown:eh},er&&s&&p.createElement("span",{style:M,"aria-live":"assertive"},er.node.value),p.createElement(w.Z,(0,r.Z)({ref:X,focusable:!1,prefixCls:"".concat(a,"-tree"),treeData:Y,height:m,itemHeight:y,itemScrollOffset:g,virtual:!1!==h&&!1!==S,multiple:u,icon:F,showIcon:_,switcherIcon:j,showLine:U,loadData:i?null:J,motion:Q,activeKey:en,checkable:K,checkStrictly:!0,checkedKeys:el,selectedKeys:K?[]:V,defaultExpandAll:H,titleRender:P},ey,{onActiveChange:et,onSelect:em,onCheck:em,onExpand:function(e){ec(e),ev(e),W&&W(e)},onLoad:q,filterTreeNode:function(e){return!!ea&&String(e[z]).toLowerCase().includes(ea)},expandAction:Z,onScroll:T})))}),L="SHOW_ALL",K="SHOW_PARENT",V="SHOW_CHILD";function O(e,n,t,r){var l=new Set(e);return n===V?e.filter(function(e){var n=t[e];return!(n&&n.children&&n.children.some(function(e){var n=e.node;return l.has(n[r.value])})&&n.children.every(function(e){var n=e.node;return N(n)||l.has(n[r.value])}))&&!0}):n===K?e.filter(function(e){var n=t[e],r=n?n.parent:null;return!(r&&!N(r.node)&&l.has(r.key))&&!0}):e}var A=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"],H=p.forwardRef(function(e,n){var t,y,w,x,D,N,P,M,K,H=e.id,R=e.prefixCls,W=e.value,F=e.defaultValue,_=e.onChange,j=e.onSelect,U=e.onDeselect,z=e.searchValue,J=e.inputValue,G=e.onSearch,Q=e.autoClearSearchValue,q=void 0===Q||Q,B=e.filterTreeNode,X=e.treeNodeFilterProp,Y=void 0===X?"value":X,$=e.showCheckedStrategy,ee=e.treeNodeLabelProp,en=e.multiple,et=e.treeCheckable,er=e.treeCheckStrictly,el=e.labelInValue,ea=e.fieldNames,eo=e.treeDataSimpleMode,eu=e.treeData,ei=e.children,ec=e.loadData,ed=e.treeLoadedKeys,es=e.onTreeLoad,ef=e.treeDefaultExpandAll,ev=e.treeExpandedKeys,ep=e.treeDefaultExpandedKeys,eh=e.onTreeExpand,em=e.treeExpandAction,ey=e.virtual,eg=e.listHeight,ek=void 0===eg?200:eg,eb=e.listItemHeight,eC=void 0===eb?20:eb,eS=e.listItemScrollOffset,eZ=void 0===eS?0:eS,eE=e.onDropdownVisibleChange,ew=e.dropdownMatchSelectWidth,ex=void 0===ew||ew,eD=e.treeLine,eI=e.treeIcon,eN=e.showTreeIcon,eP=e.switcherIcon,eM=e.treeMotion,eT=e.treeTitleRender,eL=e.onPopupScroll,eK=(0,u.Z)(e,A),eV=(0,d.ZP)(H),eO=et&&!er,eA=et||er,eH=er||el,eR=eA||en,eW=(0,f.Z)(F,{value:W}),eF=(0,o.Z)(eW,2),e_=eF[0],ej=eF[1],eU=p.useMemo(function(){return et?$||V:L},[$,et]),ez=p.useMemo(function(){var e,n,t,r,l;return n=(e=ea||{}).label,t=e.value,r=e.children,{_title:n?[n]:["title","label"],value:l=t||"value",key:l,children:r||"children"}},[JSON.stringify(ea)]),eJ=(0,f.Z)("",{value:void 0!==z?z:J,postState:function(e){return e||""}}),eG=(0,o.Z)(eJ,2),eQ=eG[0],eq=eG[1];var eB=(t=eu,y=ei,w=eo,p.useMemo(function(){if(t){var e,n,r,l,o,i,c;return w?(e=t,r=(n=(0,a.Z)({id:"id",pId:"pId",rootPId:null},!0!==w?w:{})).id,l=n.pId,o=n.rootPId,i={},c=[],e.map(function(e){var n=(0,a.Z)({},e),t=n[r];return i[t]=n,n.key=n.key||t,n}).forEach(function(e){var n=e[l],t=i[n];t&&(t.children=t.children||[],t.children.push(e)),(n===o||!t&&null===o)&&c.push(e)}),c):t}return function e(n){return(0,g.Z)(n).map(function(n){if(!p.isValidElement(n)||!n.type)return null;var t=n.key,r=n.props,l=r.children,o=r.value,i=(0,u.Z)(r,b),c=(0,a.Z)({key:t,value:o},i),d=e(l);return d.length&&(c.children=d),c}).filter(function(e){return e})}(y)},[y,w,t]));var eX=(x=eB,D=ez,p.useMemo(function(){return(0,m.I8)(x,{fieldNames:D,initWrapper:function(e){return(0,a.Z)((0,a.Z)({},e),{},{valueEntities:new Map})},processEntity:function(e,n){var t=e.node[D.value];n.valueEntities.set(t,e)}})},[x,D])),eY=eX.keyEntities,e$=eX.valueEntities,e0=p.useCallback(function(e){var n=[],t=[];return e.forEach(function(e){e$.has(e)?t.push(e):n.push(e)}),{missingRawValues:n,existRawValues:t}},[e$]),e1=S(eB,eQ,{fieldNames:ez,treeNodeFilterProp:Y,filterTreeNode:B}),e2=p.useCallback(function(e){if(e){if(ee)return e[ee];for(var n=ez._title,t=0;t<n.length;t+=1){var r=e[n[t]];if(void 0!==r)return r}}},[ez,ee]),e8=p.useCallback(function(e){var n;return(Array.isArray(n=e)?n:void 0!==n?[n]:[]).map(function(e){var n;return(n=e)&&"object"===(0,i.Z)(n)?e:{value:e}})},[]),e4=p.useCallback(function(e){return e8(e).map(function(e){var n,t,r=e.label,l=e.value,a=e.halfChecked,o=e$.get(l);return o?(r=eT?eT(o.node):null!==(t=r)&&void 0!==t?t:e2(o.node),n=o.node.disabled):void 0===r&&(r=e8(e_).find(function(e){return e.value===l}).label),{label:r,value:l,halfChecked:a,disabled:n}})},[e$,e2,e8,e_]),e7=p.useMemo(function(){return e8(null===e_?[]:e_)},[e8,e_]),e3=p.useMemo(function(){var e=[],n=[];return e7.forEach(function(t){t.halfChecked?n.push(t):e.push(t)}),[e,n]},[e7]),e9=(0,o.Z)(e3,2),e5=e9[0],e6=e9[1],ne=p.useMemo(function(){return e5.map(function(e){return e.value})},[e5]);var nn=(N=e5,P=e6,M=eO,K=eY,p.useMemo(function(){var e=N.map(function(e){return e.value}),n=P.map(function(e){return e.value}),t=e.filter(function(e){return!K[e]});if(M){var r=(0,s.S)(e,!0,K);e=r.checkedKeys,n=r.halfCheckedKeys}return[Array.from(new Set([].concat((0,l.Z)(t),(0,l.Z)(e)))),n]},[N,P,M,K])),nt=(0,o.Z)(nn,2),nr=nt[0],nl=nt[1],na=h(p.useMemo(function(){var e,n,t=e4(O(nr,eU,eY,ez).map(function(e){var n,t;return null!==(n=null===(t=eY[e])||void 0===t||null===(t=t.node)||void 0===t?void 0:t[ez.value])&&void 0!==n?n:e}).map(function(e){var n=e5.find(function(n){return n.value===e});return{value:e,label:el?null==n?void 0:n.label:null==eT?void 0:eT(n)}})),r=t[0];return!eR&&r&&null==(e=r.value)&&null==(n=r.label)?[]:t.map(function(e){var n;return(0,a.Z)((0,a.Z)({},e),{},{label:null!==(n=e.label)&&void 0!==n?n:e.value})})},[ez,eR,nr,e5,e4,eU,eY])),no=(0,o.Z)(na,1)[0],nu=Z(function(e,n,t){if(ej(e4(e)),q&&eq(""),_){var r=e;eO&&(r=O(e,eU,eY,ez).map(function(e){var n=e$.get(e);return n?n.node[ez.value]:e}));var a=n||{triggerValue:void 0,selected:void 0},o=a.triggerValue,u=a.selected,i=r;if(er){var c=e6.filter(function(e){return!r.includes(e.value)});i=[].concat((0,l.Z)(i),(0,l.Z)(c))}var d=e4(i),s={preValue:e5,triggerValue:o},f=!0;(er||"selection"===t&&!u)&&(f=!1),!function(e,n,t,r,l,a){var o=null,u=null;function i(){!u&&(u=[],!function e(r){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.map(function(r,c){var d="".concat(l,"-").concat(c),s=r[a.value],f=t.includes(s),v=e(r[a.children]||[],d,f),h=p.createElement(k,r,v.map(function(e){return e.node}));if(n===s&&(o=h),f){var m={pos:d,node:h,children:v};return!i&&u.push(m),m}return null}).filter(function(e){return e})}(r),u.sort(function(e,n){var r=e.node.props.value,l=n.node.props.value;return t.indexOf(r)-t.indexOf(l)}))}Object.defineProperty(e,"triggerNode",{get:function(){return(0,v.ZP)(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),i(),o}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return((0,v.ZP)(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),i(),l)?u:u.map(function(e){return e.node})}})}(s,o,e,eB,f,ez),eA?s.checked=u:s.selected=u;var h=eH?d:d.map(function(e){return e.value});_(eR?h:h[0],eH?null:d.map(function(e){return e.label}),s)}}),ni=p.useCallback(function(e,n){var t=n.selected,r=n.source,a=eY[e],o=null==a?void 0:a.node,u=null!==(c=null==o?void 0:o[ez.value])&&void 0!==c?c:e;if(eR){var i=t?[].concat((0,l.Z)(ne),[u]):nr.filter(function(e){return e!==u});if(eO){var c,d,f=e0(i),v=f.missingRawValues,p=f.existRawValues.map(function(e){return e$.get(e).key});d=t?(0,s.S)(p,!0,eY).checkedKeys:(0,s.S)(p,{checked:!1,halfCheckedKeys:nl},eY).checkedKeys,i=[].concat((0,l.Z)(v),(0,l.Z)(d.map(function(e){return eY[e].node[ez.value]})))}nu(i,{selected:t,triggerValue:u},r||"option")}else nu([u],{selected:!0,triggerValue:u},"option");t||!eR?null==j||j(u,C(o)):null==U||U(u,C(o))},[e0,e$,eY,ez,eR,ne,nu,eO,j,U,nr,nl]),nc=p.useCallback(function(e){if(eE){var n={};Object.defineProperty(n,"documentClickClose",{get:function(){return(0,v.ZP)(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),eE(e,n)}},[eE]),nd=Z(function(e,n){var t=e.map(function(e){return e.value});if("clear"===n.type){nu(t,{},"selection");return}n.values.length&&ni(n.values[0].value,{selected:!1,source:"selection"})}),ns=p.useMemo(function(){return{virtual:ey,dropdownMatchSelectWidth:ex,listHeight:ek,listItemHeight:eC,listItemScrollOffset:eZ,treeData:e1,fieldNames:ez,onSelect:ni,treeExpandAction:em,treeTitleRender:eT,onPopupScroll:eL}},[ey,ex,ek,eC,eZ,e1,ez,ni,em,eT,eL]),nf=p.useMemo(function(){return{checkable:eA,loadData:ec,treeLoadedKeys:ed,onTreeLoad:es,checkedKeys:nr,halfCheckedKeys:nl,treeDefaultExpandAll:ef,treeExpandedKeys:ev,treeDefaultExpandedKeys:ep,onTreeExpand:eh,treeIcon:eI,treeMotion:eM,showTreeIcon:eN,switcherIcon:eP,treeLine:eD,treeNodeFilterProp:Y,keyEntities:eY}},[eA,ec,ed,es,nr,nl,ef,ev,ep,eh,eI,eM,eN,eP,eD,Y,eY]);return p.createElement(I.Provider,{value:ns},p.createElement(E.Provider,{value:nf},p.createElement(c.Ac,(0,r.Z)({ref:n},eK,{id:eV,prefixCls:void 0===R?"rc-tree-select":R,mode:eR?"multiple":void 0,displayValues:no,onDisplayValuesChange:nd,searchValue:eQ,onSearch:function(e){eq(e),null==G||G(e)},OptionList:T,emptyOptions:!eB.length,onDropdownVisibleChange:nc,dropdownMatchSelectWidth:ex}))))});H.TreeNode=k,H.SHOW_ALL=L,H.SHOW_PARENT=K,H.SHOW_CHILD=V;let R=H}}]);