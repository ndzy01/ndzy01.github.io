/*! For license information please see npm.md-editor-rt.30f0afc8.js.LICENSE.txt */
"use strict";(self.webpackChunkndzy=self.webpackChunkndzy||[]).push([["5139"],{94936:function(){},80492:function(e,t,r){r.d(t,{Z:function(){return c}});var l=r(28771),o=r(67294),n=r(50716),i=r(81282),a=r(23062);let s=(e,t)=>{let{editorId:r}=e;(0,o.useImperativeHandle)(t,()=>({rerender(){i.b.emit(r,i.R)}}),[r])},c=(0,o.forwardRef)((e,t)=>{let{modelValue:r=a.f.modelValue,onChange:c=a.f.onChange,theme:d=a.f.theme,className:u=a.f.className,editorId:m=(0,i.g)(a.g+"_"),showCodeRowNumber:p=a.f.showCodeRowNumber,previewTheme:h=a.f.previewTheme,noMermaid:f=a.f.noMermaid,noKatex:g=a.f.noKatex,onHtmlChanged:b=a.f.onHtmlChanged,onGetCatalog:v=a.f.onGetCatalog,sanitize:x=a.f.sanitize,mdHeadingId:k=a.f.mdHeadingId,noIconfont:j=a.f.noIconfont,noHighlight:w=a.f.noHighlight,noImgZoomIn:y=a.f.noImgZoomIn,language:$=a.f.language,sanitizeMermaid:C=a.f.sanitizeMermaid,codeFoldable:T=a.f.codeFoldable,autoFoldThreshold:E=a.f.autoFoldThreshold}=e,[N]=(0,o.useState)(()=>({editorId:m,noKatex:g,noMermaid:f,noIconfont:j,noHighlight:w})),I=(0,o.useRef)(null);(0,n.u)(N);let[S,L,A]=(0,n.a)(e);return s(N,t),(0,o.useEffect)(()=>()=>{i.b.clear(m)},[m]),l.j.jsx(n.b.Provider,{value:{editorId:N.editorId,tabWidth:2,theme:d,language:$,highlight:S,showCodeRowNumber:p,usedLanguageText:L,previewTheme:h,customIcon:e.customIcon||{},rootRef:I},children:l.j.jsx("div",{id:N.editorId,className:(0,i.c)([a.p,u,"dark"===d&&`${a.p}-dark`,A.fullscreen||A.pageFullscreen?`${a.p}-fullscreen`:"",`${a.p}-previewOnly`]),style:e.style,ref:I,children:l.j.jsx(n.C,{modelValue:r,onChange:c,setting:A,mdHeadingId:k,onHtmlChanged:b,onGetCatalog:v,sanitize:x,noMermaid:N.noMermaid,noHighlight:N.noHighlight,noKatex:N.noKatex,formatCopiedText:e.formatCopiedText,noImgZoomIn:y,previewOnly:!0,sanitizeMermaid:C,codeFoldable:T,autoFoldThreshold:E},"preview-only")})})})},50716:function(e,t,r){r.d(t,{C:function(){return tZ},E:function(){return t3},a:function(){return _},b:function(){return t5},u:function(){return F}});var l,o=r(28771),n=r(67294),i=r(81282),a=r(23062),s=r(69199),c=r(11518),d=r(31673),u=r(68551),m=r(59348),p=r(129),h=r(73015),f=r(26644),g=r(83582),b=r(57841),v=r(62557),x=r(20640),k=r(62835),j=r(85355),w=r(98055),y=r(66957),$=r(76240),C=r(73935),T=Object.defineProperty,E=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t,r)=>E(e,"symbol"!=typeof t?t+"":t,r);let I=(e,t)=>{let r=r=>{let l=e.parentElement||document.body,o=l.offsetWidth,n=l.offsetHeight,{clientWidth:i,clientHeight:a}=document.documentElement,s=r.offsetX,c=r.offsetY,d=e=>{let r=e.x+document.body.scrollLeft-document.body.clientLeft-s,d=e.y+document.body.scrollTop-document.body.clientTop-c;r=r<1?1:r<i-o-1?r:i-o-1,d=d<1?1:d<a-n-1?d:a-n-1,t?t(r,d):(l.style.left=r+"px",l.style.top=d+"px")};document.addEventListener("mousemove",d);let u=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",r),()=>{e.removeEventListener("mousedown",r)}},S=(e,t,r="")=>{var l;let o=document.getElementById(t.id);if(o)""!==r&&(Reflect.get(window,r)?null==(l=t.onload)||l.call(o,new Event("load")):t.onload&&o.addEventListener("load",t.onload));else{let r={...t};r.onload=null;let l=A(e,r);t.onload&&l.addEventListener("load",t.onload),document.head.appendChild(l)}},L=(e,t)=>{let r=document.getElementById(t.id);null==r||r.remove(),S(e,t)},A=(e,t)=>{let r=document.createElement(e);return Object.keys(t).forEach(e=>{void 0!==t[e]&&(r[e]=t[e])}),r},M=(()=>{let e=e=>{if(!e)return;let t=e.firstChild,r=1,l=0,o=0,n=!1,i,a,s,c=1,d=()=>{t.style.transform=`translate(${l}px, ${o}px) scale(${r})`};e.addEventListener("touchstart",e=>{1===e.touches.length?(n=!0,i=e.touches[0].clientX-l,a=e.touches[0].clientY-o):2===e.touches.length&&(s=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),c=r)}),e.addEventListener("touchmove",e=>{if(e.preventDefault(),n&&1===e.touches.length)l=e.touches[0].clientX-i,o=e.touches[0].clientY-a,d();else if(2===e.touches.length){let n=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY)/s,i=r;r=c*(1+(n-1));let a=(e.touches[0].clientX+e.touches[1].clientX)/2,u=(e.touches[0].clientY+e.touches[1].clientY)/2,m=t.getBoundingClientRect(),p=(a-m.left)/i,h=(u-m.top)/i;l-=p*(r-i),o-=h*(r-i),d()}}),e.addEventListener("touchend",()=>{n=!1}),e.addEventListener("wheel",e=>{e.preventDefault();let n=r;e.deltaY<0?r+=.02:r=Math.max(.1,r-.02);let i=t.getBoundingClientRect(),a=e.clientX-i.left,s=e.clientY-i.top;l-=a/n*(r-n),o-=s/n*(r-n),d()}),e.addEventListener("mousedown",e=>{n=!0,i=e.clientX-l,a=e.clientY-o}),e.addEventListener("mousemove",e=>{n&&(l=e.clientX-i,o=e.clientY-a,d())}),e.addEventListener("mouseup",()=>{n=!1}),e.addEventListener("mouseleave",()=>{n=!1})};return t=>{t.forEach(t=>{e(t)})}})(),R=(e,t)=>{let{modelValue:r,onSave:l}=e,{editorId:o}=t,[a,s]=(0,n.useState)({buildFinished:!1,html:""});(0,n.useEffect)(()=>{let e=e=>{s(()=>({buildFinished:!0,html:e}))};return i.b.on(o,{name:i.B,callback:e}),()=>{i.b.remove(o,i.B,e)}},[o]),(0,n.useEffect)(()=>{let e=()=>{l&&l(r,new Promise(e=>{if(a.buildFinished)e(a.html);else{let t=r=>{e(r),i.b.remove(o,i.B,t)};i.b.on(o,{name:i.B,callback:t})}}))};return i.b.on(o,{name:i.O,callback:e}),()=>{i.b.remove(o,i.O,e)}},[o,r,l,a.buildFinished,a.html]),(0,n.useEffect)(()=>{s(e=>({...e,buildFinished:!1}))},[r])},H=e=>{let{noPrettier:t,noUploadImg:r}=e;(0,n.useEffect)(()=>{let{editorExtensions:e,editorExtensionsAttrs:l}=a.h,o=t||!!e.prettier.prettierInstance,n=t||!!e.prettier.parserMarkdownInstance;if(!(r||e.cropper.instance)){let{js:t={},css:r={}}=l.cropper||{};S("link",{...r,rel:"stylesheet",href:e.cropper.css,id:`${a.p}-cropperCss`}),S("script",{...t,src:e.cropper.js,id:`${a.p}-cropper`})}if(!o){let{standaloneJs:t={}}=l.prettier||{};S("script",{...t,src:e.prettier.standaloneJs,id:`${a.p}-prettier`})}if(!n){let{parserMarkdownJs:t={}}=l.prettier||{};S("script",{...t,src:e.prettier.parserMarkdownJs,id:`${a.p}-prettierMD`})}},[t,r]),F(e)},F=({noIconfont:e})=>{(0,n.useEffect)(()=>{let{editorExtensions:t,editorExtensionsAttrs:r,iconfontType:l}=a.h;e||("svg"===l?S("script",{...r.iconfont,src:t.iconfont,id:`${a.p}-icon`}):S("link",{...r.iconfontClass,rel:"stylesheet",href:t.iconfontClass,id:`${a.p}-icon-class`}))},[e])},O=(e,t)=>{(0,n.useEffect)(()=>(i.b.on(e,{name:i.E,callback:t}),()=>{i.b.remove(e,i.E,t)}),[e,t])},P=(e,t)=>{let{editorId:r}=t,{onUploadImg:l}=e;(0,n.useEffect)(()=>{let e=(e,t)=>{null==l||l(e,e=>{i.b.emit(r,i.h,"image",{desc:"",urls:e}),t&&t()})};return i.b.on(r,{name:i.U,callback:e}),()=>{i.b.remove(r,i.U,e)}},[r,l])},J=(e,t)=>{let{toolbars:r=a.b,toolbarsExclude:l=[]}=e,{editorId:o}=t,[s,c]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=e=>{c(void 0===e?e=>!e:e)};return i.b.on(o,{name:i.C,callback:e}),()=>{i.b.remove(o,i.C,e)}},[o]),(0,n.useMemo)(()=>!l.includes("catalog")&&r.includes("catalog")&&s,[s,r,l])},D="",_=e=>{let{theme:t=a.f.theme,preview:r=a.f.preview,htmlPreview:l=a.f.htmlPreview,pageFullscreen:o=a.f.pageFullscreen,previewTheme:i=a.f.previewTheme,codeTheme:s=a.f.codeTheme,language:c=a.f.language,codeStyleReverse:d=a.f.codeStyleReverse,codeStyleReverseList:u=a.f.codeStyleReverseList}=e,m=(0,n.useMemo)(()=>{let e=a.h.editorExtensions.highlight,r=a.h.editorExtensionsAttrs.highlight,{js:l}=e,o={...a.j,...e.css},{js:n,css:c={}}=r||{},m=d&&u.includes(i)?"dark":t,p=o[s]?o[s][m]:a.j.atom[m],h=o[s]&&c[s]?c[s][m]:c.atom?c.atom[m]:{};return{js:{src:l,...n},css:{href:p,...h}}},[d,u,i,t,s]),p=(0,n.useMemo)(()=>{let e={...a.s,...a.h.editorConfig.languageUserDefined};return e[c]?e[c]:a.s["zh-CN"]},[c]),[h,f]=(0,n.useState)({pageFullscreen:o,fullscreen:!1,preview:r,htmlPreview:!r&&l,previewOnly:!1}),g=(0,n.useRef)(h),b=(0,n.useCallback)((e,t)=>{f(r=>{let l=void 0===t?!r[e]:t,o={...r};switch(e){case"preview":o.htmlPreview=!1,o.previewOnly=!1;break;case"htmlPreview":o.preview=!1,o.previewOnly=!1;break;case"previewOnly":l?o.preview||o.htmlPreview||(o.preview=!0):(g.current.preview||(o.preview=!1),g.current.htmlPreview||(o.htmlPreview=!1))}return g.current[e]=l,o[e]=l,o})},[]);return(0,n.useEffect)(()=>{D=document.body.style.overflow},[]),(0,n.useEffect)(()=>{h.pageFullscreen||h.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=D},[h.pageFullscreen,h.fullscreen]),[m,p,h,b]},V=(e,t,r,l,o,a)=>{let{editorId:s}=t;(0,n.useEffect)(()=>{i.b.emit(s,i.P,l.pageFullscreen)},[s,l.pageFullscreen]),(0,n.useEffect)(()=>{i.b.emit(s,i.F,l.fullscreen)},[s,l.fullscreen]),(0,n.useEffect)(()=>{i.b.emit(s,i.a,l.preview)},[s,l.preview]),(0,n.useEffect)(()=>{i.b.emit(s,i.d,l.previewOnly)},[s,l.previewOnly]),(0,n.useEffect)(()=>{i.b.emit(s,i.H,l.htmlPreview)},[s,l.htmlPreview]),(0,n.useEffect)(()=>{i.b.emit(s,i.e,r)},[r,s]),(0,n.useImperativeHandle)(e,()=>({on(e,t){switch(e){case"pageFullscreen":i.b.on(s,{name:i.P,callback(e){t(e)}});break;case"fullscreen":i.b.on(s,{name:i.F,callback(e){t(e)}});break;case"preview":i.b.on(s,{name:i.a,callback(e){t(e)}});break;case"previewOnly":i.b.on(s,{name:i.d,callback(e){t(e)}});break;case"htmlPreview":i.b.on(s,{name:i.H,callback(e){t(e)}});break;case"catalog":i.b.on(s,{name:i.e,callback(e){t(e)}})}},togglePageFullscreen(e){o("pageFullscreen",e)},toggleFullscreen(e){i.b.emit(s,i.f,e)},togglePreview(e){o("preview",e)},togglePreviewOnly(e){o("previewOnly",e)},toggleHtmlPreview(e){o("htmlPreview",e)},toggleCatalog(e){i.b.emit(s,i.C,e)},triggerSave(){i.b.emit(s,i.O)},insert(e){i.b.emit(s,i.h,"universal",{generate:e})},focus(e){var t;null==(t=a.current)||t.focus(e)},rerender(){i.b.emit(s,i.R)},getSelectedText(){var e;return null==(e=a.current)?void 0:e.getSelectedText()},resetHistory(){var e;null==(e=a.current)||e.resetHistory()},domEventHandlers(e){i.b.emit(s,i.i,e)},execCommand(e){i.b.emit(s,i.h,e)},getEditorView(){var e;return null==(e=a.current)?void 0:e.getEditorView()}}),[a,s,o])},z=()=>o.j.jsx("div",{className:`${a.p}-divider`}),B=`${a.p}-dropdown-hidden`,W=e=>{let{relative:t="html"}=e,[r,l]=(0,n.useState)({overlayClass:B,overlayStyle:{}}),i=(0,n.useRef)({triggerHover:!1,overlayHover:!1}),s=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useCallback)(()=>{var r,o;i.current.triggerHover=!0;let n=s.current,a=c.current;if(!n||!a)return;let d=n.getBoundingClientRect(),u=n.offsetTop,m=n.offsetLeft,p=d.height,h=d.width,f=n.getRootNode(),g=(null==(r=f.querySelector(t))?void 0:r.scrollLeft)||0,b=(null==(o=f.querySelector(t))?void 0:o.clientWidth)||0,v=m-a.offsetWidth/2+h/2-g;v+a.offsetWidth>g+b&&(v=g+b-a.offsetWidth),v<0&&(v=0),l(e=>({...e,overlayStyle:{top:u+p+"px",left:v+"px"}})),e.onChange(!0)},[e,t]),u=()=>{i.current.overlayHover=!0};(0,n.useEffect)(()=>{e.visible?l(e=>({...e,overlayClass:""})):l(e=>({...e,overlayClass:B}))},[e.visible]);let m=(0,n.useRef)(-1),p=(0,n.useCallback)(t=>{s.current===t.target?i.current.triggerHover=!1:i.current.overlayHover=!1,clearTimeout(m.current),m.current=window.setTimeout(()=>{i.current.overlayHover||i.current.triggerHover||e.onChange(!1)},10)},[e]);(0,n.useEffect)(()=>{var e,t,r,l;return null==(e=s.current)||e.addEventListener("mouseenter",d),null==(t=s.current)||t.addEventListener("mouseleave",p),null==(r=c.current)||r.addEventListener("mouseenter",u),null==(l=c.current)||l.addEventListener("mouseleave",p),()=>{var e,t,r,l;null==(e=s.current)||e.removeEventListener("mouseenter",d),null==(t=s.current)||t.removeEventListener("mouseleave",p),null==(r=c.current)||r.removeEventListener("mouseenter",u),null==(l=c.current)||l.removeEventListener("mouseleave",p)}},[p,d]);let h=e.children,f=e.overlay,g=(0,n.cloneElement)(h,{ref:s,key:"cloned-dropdown-trigger"}),b=o.j.jsx("div",{className:`${a.p}-dropdown ${r.overlayClass}`,style:r.overlayStyle,ref:c,children:o.j.jsx("div",{className:`${a.p}-dropdown-overlay`,children:f instanceof Array?f[0]:f})});return o.j.jsxs(o.j.Fragment,{children:[g,b]})},q=e=>"svg"===a.h.iconfontType?o.j.jsx("svg",{className:`${a.p}-icon`,"aria-hidden":"true",children:o.j.jsx("use",{xlinkHref:`#${a.p}-icon-${e.name}`})}):o.j.jsx("i",{className:`${a.p}-iconfont ${a.p}-icon-${e.name}`}),K=e=>{let{customIcon:t}=(0,n.useContext)(t5),r=t[e.name];if("object"==typeof r){let e=r.component;return"function"==typeof e?o.j.jsx(e,{...r.props}):o.j.jsx("span",{dangerouslySetInnerHTML:{__html:r.component}})}return o.j.jsx(q,{name:e.name})},U=`${a.p}-modal-container`,X=e=>{let{theme:t,rootRef:r}=(0,n.useContext)(t5),{onClose:l=()=>{},onAdjust:s=()=>{},style:c={},showMask:d=!0}=e,[u,m]=(0,n.useState)(e.visible),[p,h]=(0,n.useState)([`${a.p}-modal`]),f=(0,n.useRef)(null),g=(0,n.useRef)(null),b=(0,n.useRef)(),v=(0,n.useRef)(null),[x,k]=(0,n.useState)({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),j=(0,n.useMemo)(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height},[e.height,e.isFullscreen,e.width]);return(0,n.useEffect)(()=>{var e;let t=null==(e=r.current)?void 0:e.getRootNode();return b.current=t instanceof Document?document.body:t,()=>{b.current=void 0}},[r]),(0,n.useEffect)(()=>{let t=()=>{};return!e.isFullscreen&&e.visible&&(t=I(g.current,(e,t)=>{k(r=>({...r,initPos:{left:e+"px",top:t+"px"}}))})),t},[e.isFullscreen,e.visible]),(0,n.useEffect)(()=>{if(u){let e=f.current.offsetWidth/2,t=f.current.offsetHeight/2,r=document.documentElement.clientWidth/2,l=document.documentElement.clientHeight/2;k(o=>({...o,maskStyle:{zIndex:a.h.editorConfig.zIndex+(0,i.j)()},modalStyle:{zIndex:a.h.editorConfig.zIndex+(0,i.j)()},initPos:{left:r-e+"px",top:l-t+"px"}}))}},[u]),(0,n.useEffect)(()=>{let t=e.visible;t?(h(()=>[`${a.p}-modal`,"zoom-in"]),m(t)):(h(()=>[`${a.p}-modal`,"zoom-out"]),setTimeout(()=>{m(t)},150))},[e.visible]),o.j.jsx(o.j.Fragment,{children:b.current&&(0,C.createPortal)(o.j.jsx("div",{ref:v,className:U,"data-theme":t,children:o.j.jsxs("div",{className:e.className,style:{...c,display:u?"block":"none"},children:[d&&o.j.jsx("div",{className:`${a.p}-modal-mask`,style:x.maskStyle,onClick:l}),o.j.jsxs("div",{className:p.join(" "),style:{...x.modalStyle,...x.initPos,...j},ref:f,children:[o.j.jsx("div",{className:`${a.p}-modal-header`,ref:g,children:e.title||""}),o.j.jsxs("div",{className:`${a.p}-modal-func`,children:[e.showAdjust&&o.j.jsx("div",{className:`${a.p}-modal-adjust`,onClick:t=>{t.stopPropagation(),e.isFullscreen?k(e=>({...e,initPos:e.historyPos})):k(e=>({...e,historyPos:e.initPos,initPos:{left:"0",top:"0"}})),s instanceof Function&&s(!e.isFullscreen)},children:o.j.jsx(K,{name:e.isFullscreen?"suoxiao":"fangda"})}),o.j.jsx("div",{className:`${a.p}-modal-close`,onClick:t=>{t.stopPropagation(),e.onClose&&e.onClose()},children:o.j.jsx(K,{name:"close"})})]}),o.j.jsx("div",{className:`${a.p}-modal-body`,children:e.children})]})]})}),b.current)})},G=e=>{var t,r,l,i,s;let{editorId:c,usedLanguageText:d}=(0,n.useContext)(t5),u=(0,n.useMemo)(()=>{var t,r;switch(e.type){case"link":return null==(t=d.linkModalTips)?void 0:t.linkTitle;case"image":return null==(r=d.linkModalTips)?void 0:r.imageTitle;default:return""}},[e.type,d]),[m,p]=(0,n.useState)({desc:"",url:""});return(0,n.useEffect)(()=>{e.visible||setTimeout(()=>{p({desc:"",url:""})},200)},[e.visible]),(0,n.useMemo)(()=>{var t,r,l,n,i;return o.j.jsxs(X,{title:u,visible:e.visible,onClose:e.onCancel,children:[o.j.jsxs("div",{className:`${a.p}-form-item`,children:[o.j.jsx("label",{className:`${a.p}-label`,htmlFor:`link-desc-${c}`,children:null==(t=d.linkModalTips)?void 0:t.descLabel}),o.j.jsx("input",{placeholder:null==(r=d.linkModalTips)?void 0:r.descLabelPlaceHolder,className:`${a.p}-input`,id:`link-desc-${c}`,type:"text",value:m.desc,onChange:e=>{p(t=>({...t,desc:e.target.value}))}})]}),o.j.jsxs("div",{className:`${a.p}-form-item`,children:[o.j.jsx("label",{className:`${a.p}-label`,htmlFor:`link-url-${c}`,children:null==(l=d.linkModalTips)?void 0:l.urlLabel}),o.j.jsx("input",{placeholder:null==(n=d.linkModalTips)?void 0:n.urlLabelPlaceHolder,className:`${a.p}-input`,id:`link-url-${c}`,type:"text",value:m.url,onChange:e=>{p(t=>({...t,url:e.target.value}))}})]}),o.j.jsx("div",{className:`${a.p}-form-item`,children:o.j.jsx("button",{className:`${a.p}-btn ${a.p}-btn-row`,type:"button",onClick:()=>{e.onOk(m),p(e=>({...e,desc:"",url:""}))},children:null==(i=d.linkModalTips)?void 0:i.buttonOK})})]})},[u,e,c,null==(t=d.linkModalTips)?void 0:t.descLabel,null==(r=d.linkModalTips)?void 0:r.descLabelPlaceHolder,null==(l=d.linkModalTips)?void 0:l.urlLabel,null==(i=d.linkModalTips)?void 0:i.urlLabelPlaceHolder,null==(s=d.linkModalTips)?void 0:s.buttonOK,m])},Z=null,Y=e=>{var t,r;let{editorId:l,usedLanguageText:s,rootRef:c}=(0,n.useContext)(t5),d=a.h.editorExtensions.cropper.instance,u=(0,n.useRef)(null),m=(0,n.useRef)(null),p=(0,n.useRef)(null),[h,f]=(0,n.useState)({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});(0,n.useEffect)(()=>{e.visible&&!h.cropperInited&&(window.Cropper=d||window.Cropper,u.current.onchange=()=>{if(!window.Cropper){i.b.emit(l,i.E,{name:"Cropper",message:"Cropper is undefined"});return}let e=u.current.files||[];if((null==e?void 0:e.length)>0){let t=new FileReader;t.onload=e=>{f(t=>({...t,imgSelected:!0,imgSrc:e.target.result}))},t.readAsDataURL(e[0])}})},[e.visible,h.cropperInited,d,l]),(0,n.useEffect)(()=>{var e;null==(e=p.current)||e.setAttribute("style","")},[h.imgSelected]),(0,n.useEffect)(()=>{var e,t;null==Z||Z.destroy(),null==(e=p.current)||e.setAttribute("style",""),m.current&&h.imgSrc&&(Z=new window.Cropper(m.current,{viewMode:2,preview:(null==(t=c.current)?void 0:t.getRootNode()).querySelector(`.${a.p}-clip-preview-target`)}))},[h.imgSrc,h.isFullscreen,c]);let g=(0,n.useMemo)(()=>h.isFullscreen?{width:"100%",height:"100%"}:{width:"668px",height:"392px"},[h.isFullscreen]),b=()=>{Z.clear(),Z.destroy(),Z=null,u.current.value="",f(e=>({...e,imgSrc:"",imgSelected:!1}))},v=(0,n.useCallback)(e=>{f(t=>({...t,isFullscreen:e}))},[]);return(0,n.useMemo)(()=>{var t,r;return o.j.jsxs(X,{className:`${a.p}-modal-clip`,title:null==(t=s.clipModalTips)?void 0:t.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:h.isFullscreen,onAdjust:v,...g,children:[o.j.jsxs("div",{className:`${a.p}-form-item ${a.p}-clip`,children:[o.j.jsx("div",{className:`${a.p}-clip-main`,children:h.imgSelected?o.j.jsxs("div",{className:`${a.p}-clip-cropper`,children:[o.j.jsx("img",{src:h.imgSrc,ref:m,style:{display:"none"},alt:""}),o.j.jsx("div",{className:`${a.p}-clip-delete`,onClick:b,children:o.j.jsx(K,{name:"delete"})})]}):o.j.jsx("div",{className:`${a.p}-clip-upload`,onClick:()=>{u.current.click()},children:o.j.jsx(K,{name:"upload"})})}),o.j.jsx("div",{className:`${a.p}-clip-preview`,children:o.j.jsx("div",{className:`${a.p}-clip-preview-target`,ref:p})})]}),o.j.jsx("div",{className:`${a.p}-form-item`,children:o.j.jsx("button",{className:`${a.p}-btn`,type:"button",onClick:()=>{if(Z){let t=Z.getCroppedCanvas();i.b.emit(l,i.U,[(0,i.k)(t.toDataURL("image/png"))],e.onOk),b()}},children:null==(r=s.linkModalTips)?void 0:r.buttonOK})}),o.j.jsx("input",{ref:u,accept:"image/*",type:"file",multiple:!1,style:{display:"none"}})]})},[null==(t=s.clipModalTips)?void 0:t.title,null==(r=s.linkModalTips)?void 0:r.buttonOK,e.visible,e.onCancel,e.onOk,h.isFullscreen,h.imgSelected,h.imgSrc,v,g,l])},Q=e=>o.j.jsxs(o.j.Fragment,{children:[o.j.jsx(G,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel}),o.j.jsx(Y,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel})]}),ee=e=>{let[t,r]=(0,n.useState)({x:-1,y:-1}),l=(0,n.useMemo)(()=>JSON.stringify(e.tableShape),[e.tableShape]),i=(0,n.useCallback)(()=>{let e=[...JSON.parse(l)];return(!e[2]||e[2]<e[0])&&(e[2]=e[0]),(!e[3]||e[3]<e[3])&&(e[3]=e[1]),e},[l]),[s,c]=(0,n.useState)(i);return(0,n.useEffect)(()=>{c(i),r({x:-1,y:-1})},[i]),o.j.jsx("div",{className:`${a.p}-table-shape`,onMouseLeave:()=>{c(i),r({x:-1,y:-1})},children:Array(s[1]).fill("").map((l,n)=>o.j.jsx("div",{className:`${a.p}-table-shape-row`,children:Array(s[0]).fill("").map((l,i)=>o.j.jsx("div",{className:`${a.p}-table-shape-col`,onMouseEnter:()=>{r({x:n,y:i}),i+1===s[0]&&i+1<s[2]?c(e=>{let t=[...e];return t[0]=e[0]+1,t}):i+2<s[0]&&s[0]>e.tableShape[0]&&c(e=>{let t=[...e];return t[0]=e[0]-1,t}),n+1===s[1]&&n+1<s[3]?c(e=>{let t=[...e];return t[1]=e[1]+1,t}):n+2<s[1]&&s[1]>e.tableShape[1]&&c(e=>{let t=[...e];return t[1]=e[1]-1,t})},onClick:()=>{e.onSelected(t)},children:o.j.jsx("div",{className:[`${a.p}-table-shape-col-default`,n<=t.x&&i<=t.y&&`${a.p}-table-shape-col-include`].filter(e=>!!e).join(" ")})},`table-shape-col-${i}`))},`table-shape-row-${n}`))})},et=e=>{let{updateSetting:t}=e,{editorId:r}=(0,n.useContext)(t5),l=(0,n.useRef)(a.h.editorExtensions.screenfull.instance),o=(0,n.useRef)(!1),s=(0,n.useCallback)(e=>{if(!l.current){i.b.emit(r,i.E,{name:"fullscreen",message:"fullscreen is undefined"});return}l.current.isEnabled?(o.current=!o.current,(void 0===e?!l.current.isFullscreen:e)?l.current.request():l.current.exit()):console.error("browser does not support screenfull!")},[r]);return(0,n.useEffect)(()=>{let e=()=>{t("fullscreen",o.current)},r=-1;if(!l.current){let{editorExtensions:t,editorExtensionsAttrs:o}=a.h;r=requestAnimationFrame(()=>{var r;S("script",{...null==(r=o.screenfull)?void 0:r.js,src:t.screenfull.js,id:`${a.p}-screenfull`,onload(){l.current=window.screenfull,l.current&&l.current.isEnabled&&l.current.on("change",e)}},"screenfull")})}return l.current&&l.current.isEnabled&&l.current.on("change",e),()=>{l.current||cancelAnimationFrame(r),l.current&&l.current.isEnabled&&l.current.off("change",e)}},[t]),(0,n.useEffect)(()=>(i.b.on(r,{name:i.f,callback:s}),()=>{i.b.remove(r,i.f,s)}),[r,s]),{fullscreenHandler:s}},er=(e,t)=>{let{editorId:r}=(0,n.useContext)(t5),[l,o]=(0,n.useState)({type:"link",linkVisible:!1,clipVisible:!1}),a=(0,n.useCallback)(()=>{o(e=>({...e,linkVisible:!1,clipVisible:!1}))},[]),s=(0,n.useCallback)(e=>{e&&t(l.type,{desc:e.desc,url:e.url,transform:"image"===l.type}),a()},[t,l.type,a]);return(0,n.useEffect)(()=>{i.b.on(r,{name:i.l,callback(e){o(t=>({...t,type:e,linkVisible:!0}))}});e.current.addEventListener("change",()=>{i.b.emit(r,i.U,Array.from(e.current.files||[])),e.current.value=""})},[r,e]),{modalData:l,setModalData:o,onCancel:a,onOk:s}},el=e=>{let[t,r]=(0,n.useState)({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),l=(0,n.useCallback)(e=>{r(t=>({...t,title:e}))},[]),o=(0,n.useCallback)(()=>{r(e=>({...e,title:!1}))},[]),i=(0,n.useCallback)(e=>{r(t=>({...t,image:e}))},[]),a=(0,n.useCallback)(()=>{r(e=>({...e,image:!1}))},[]),s=(0,n.useCallback)(e=>{r(t=>({...t,table:e}))},[]),c=(0,n.useCallback)(t=>{e("table",{selectedShape:t})},[e]),d=(0,n.useCallback)(e=>{r(t=>({...t,mermaid:e}))},[]),u=(0,n.useCallback)(()=>{r(e=>({...e,mermaid:!1}))},[]),m=(0,n.useCallback)(e=>{r(t=>({...t,katex:e}))},[]);return{visible:t,onTitleChange:l,onTitleClose:o,onImageChange:i,onImageClose:a,onTableChange:s,onTableSelected:c,onMermaidChange:d,onMermaidClose:u,onKatexChange:m,onKatexClose:(0,n.useCallback)(()=>{r(e=>({...e,katex:!1}))},[])}},eo=0,en=n.memo(e=>{var t;let{toolbars:r,toolbarsExclude:l,updateSetting:c}=e,{editorId:d,usedLanguageText:u,theme:m,previewTheme:p,language:h}=(0,n.useContext)(t5),[f]=(0,n.useState)(()=>`${d}-toolbar-wrapper`),g=(0,n.useRef)(null),b=(0,n.useRef)(null),v=(0,n.useCallback)((e,t)=>{i.b.emit(d,i.h,e,t)},[d]),{fullscreenHandler:x}=et(e),{modalData:k,setModalData:j,onCancel:w,onOk:y}=er(b,v),{visible:$,onTitleChange:C,onTitleClose:T,onImageChange:E,onImageClose:N,onTableChange:I,onTableSelected:S,onMermaidChange:L,onMermaidClose:A,onKatexChange:M,onKatexClose:R}=el(v),H=(0,n.useMemo)(()=>{var t,r,l,n,i,s,c,d;return o.j.jsx(W,{relative:`#${f}`,visible:$.title,onChange:C,overlay:o.j.jsxs("ul",{className:`${a.p}-menu`,onClick:T,children:[o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-title`,onClick:()=>{v("h1")},children:null==(t=u.titleItem)?void 0:t.h1}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-title`,onClick:()=>{v("h2")},children:null==(r=u.titleItem)?void 0:r.h2}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-title`,onClick:()=>{v("h3")},children:null==(l=u.titleItem)?void 0:l.h3}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-title`,onClick:()=>{v("h4")},children:null==(n=u.titleItem)?void 0:n.h4}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-title`,onClick:()=>{v("h5")},children:null==(i=u.titleItem)?void 0:i.h5}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-title`,onClick:()=>{v("h6")},children:null==(s=u.titleItem)?void 0:s.h6})]},"bar-title-overlay"),children:o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(c=u.toolbarTips)?void 0:c.title,children:[o.j.jsx(K,{name:"title"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(d=u.toolbarTips)?void 0:d.title})]},"bar-title-trigger")},"bar-title")},[f,$.title,C,T,u.titleItem,u.toolbarTips,e.showToolbarName,v]),F=(0,n.useMemo)(()=>{var t,r,l,n,i;return o.j.jsx(W,{relative:`#${f}`,visible:$.image,onChange:E,overlay:o.j.jsxs("ul",{className:`${a.p}-menu`,onClick:N,children:[o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-image`,onClick:()=>{j(e=>({...e,type:"image",linkVisible:!0}))},children:null==(t=u.imgTitleItem)?void 0:t.link}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-image`,onClick:()=>{b.current.click()},children:null==(r=u.imgTitleItem)?void 0:r.upload}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-image`,onClick:()=>{j(e=>({...e,type:"image",clipVisible:!0}))},children:null==(l=u.imgTitleItem)?void 0:l.clip2upload})]},"bar-image-overlay"),children:o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(n=u.toolbarTips)?void 0:n.image,children:[o.j.jsx(K,{name:"image"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(i=u.toolbarTips)?void 0:i.image})]},"bar-image-trigger")},"bar-image")},[f,$.image,E,N,u.imgTitleItem,u.toolbarTips,e.showToolbarName,j]),O=(0,n.useMemo)(()=>{var t,r;return o.j.jsx(W,{relative:`#${f}`,visible:$.table,onChange:I,overlay:o.j.jsx(ee,{tableShape:e.tableShape,onSelected:S},"bar-table-overlay"),children:o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(t=u.toolbarTips)?void 0:t.table,children:[o.j.jsx(K,{name:"table"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(r=u.toolbarTips)?void 0:r.table})]},"bar-table-trigger")},"bar-table")},[f,$.table,I,e.tableShape,e.showToolbarName,S,u.toolbarTips]),P=(0,n.useMemo)(()=>{var t,r,l,n,i,s,c,d,m,p;return o.j.jsx(W,{relative:`#${f}`,visible:$.mermaid,onChange:L,overlay:o.j.jsxs("ul",{className:`${a.p}-menu`,onClick:A,children:[o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("flow")},children:null==(t=u.mermaid)?void 0:t.flow}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("sequence")},children:null==(r=u.mermaid)?void 0:r.sequence}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("gantt")},children:null==(l=u.mermaid)?void 0:l.gantt}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("class")},children:null==(n=u.mermaid)?void 0:n.class}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("state")},children:null==(i=u.mermaid)?void 0:i.state}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("pie")},children:null==(s=u.mermaid)?void 0:s.pie}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("relationship")},children:null==(c=u.mermaid)?void 0:c.relationship}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-mermaid`,onClick:()=>{v("journey")},children:null==(d=u.mermaid)?void 0:d.journey})]},"bar-mermaid-overlay"),children:o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(m=u.toolbarTips)?void 0:m.mermaid,children:[o.j.jsx(K,{name:"mermaid"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(p=u.toolbarTips)?void 0:p.mermaid})]},"bar-mermaid-trigger")},"bar-mermaid")},[f,$.mermaid,L,A,u.mermaid,u.toolbarTips,e.showToolbarName,v]),J=(0,n.useMemo)(()=>{var t,r,l,n;return o.j.jsx(W,{relative:`#${f}`,visible:$.katex,onChange:M,overlay:o.j.jsxs("ul",{className:`${a.p}-menu`,onClick:R,children:[o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-katex`,onClick:()=>{v("katexInline")},children:null==(t=u.katex)?void 0:t.inline}),o.j.jsx("li",{className:`${a.p}-menu-item ${a.p}-menu-item-katex`,onClick:()=>{v("katexBlock")},children:null==(r=u.katex)?void 0:r.block})]},"bar-katex-overlay"),children:o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(l=u.toolbarTips)?void 0:l.katex,children:[o.j.jsx(K,{name:"formula"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(n=u.toolbarTips)?void 0:n.katex})]},"bar-katex-trigger")},"bar-katex")},[f,$.katex,M,R,u.katex,u.toolbarTips,e.showToolbarName,v]),D=(0,n.useCallback)(t=>{var r,l,f,g,b,w,y,$,C,T,E,N,I,S,L,A,M,R,D,_,V,B,W,q,U,X,G,Z,Y,Q,ee,et,er,el,en,ei,ea,es,ec,ed,eu,em,ep,eh,ef,eg,eb,ev,ex,ek;if(a.b.includes(t))switch(t){case"-":return o.j.jsx(z,{},`bar-${eo++}`);case"bold":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(r=u.toolbarTips)?void 0:r.bold,onClick:()=>{v("bold")},children:[o.j.jsx(K,{name:"bold"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(l=u.toolbarTips)?void 0:l.bold})]},"bar-bold");case"underline":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(f=u.toolbarTips)?void 0:f.underline,onClick:()=>{v("underline")},children:[o.j.jsx(K,{name:"underline"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(g=u.toolbarTips)?void 0:g.underline})]},"bar-underline");case"italic":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(b=u.toolbarTips)?void 0:b.italic,onClick:()=>{v("italic")},children:[o.j.jsx(K,{name:"italic"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(w=u.toolbarTips)?void 0:w.italic})]},"bar-italic");case"strikeThrough":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(y=u.toolbarTips)?void 0:y.strikeThrough,onClick:()=>{v("strikeThrough")},children:[o.j.jsx(K,{name:"strike-through"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==($=u.toolbarTips)?void 0:$.strikeThrough})]},"bar-strikeThrough");case"title":return H;case"sub":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(C=u.toolbarTips)?void 0:C.sub,onClick:()=>{v("sub")},children:[o.j.jsx(K,{name:"sub"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(T=u.toolbarTips)?void 0:T.sub})]},"bar-sub");case"sup":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(E=u.toolbarTips)?void 0:E.sup,onClick:()=>{v("sup")},children:[o.j.jsx(K,{name:"sup"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(N=u.toolbarTips)?void 0:N.sup})]},"bar-sup");case"quote":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(I=u.toolbarTips)?void 0:I.quote,onClick:()=>{v("quote")},children:[o.j.jsx(K,{name:"quote"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(S=u.toolbarTips)?void 0:S.quote})]},"bar-quote");case"unorderedList":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(L=u.toolbarTips)?void 0:L.unorderedList,onClick:()=>{v("unorderedList")},children:[o.j.jsx(K,{name:"unordered-list"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(A=u.toolbarTips)?void 0:A.unorderedList})]},"bar-unorderedList");case"orderedList":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(M=u.toolbarTips)?void 0:M.orderedList,onClick:()=>{v("orderedList")},children:[o.j.jsx(K,{name:"ordered-list"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(R=u.toolbarTips)?void 0:R.orderedList})]},"bar-orderedList");case"task":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(D=u.toolbarTips)?void 0:D.task,onClick:()=>{v("task")},children:[o.j.jsx(K,{name:"task"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(_=u.toolbarTips)?void 0:_.task})]},"bar-task");case"codeRow":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(V=u.toolbarTips)?void 0:V.codeRow,onClick:()=>{v("codeRow")},children:[o.j.jsx(K,{name:"code-row"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(B=u.toolbarTips)?void 0:B.codeRow})]},"bar-codeRow");case"code":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(W=u.toolbarTips)?void 0:W.code,onClick:()=>{v("code")},children:[o.j.jsx(K,{name:"code"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(q=u.toolbarTips)?void 0:q.code})]},"bar-code");case"link":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(U=u.toolbarTips)?void 0:U.link,onClick:()=>{j({...k,type:"link",linkVisible:!0})},children:[o.j.jsx(K,{name:"link"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(X=u.toolbarTips)?void 0:X.link})]},"bar-link");case"image":return e.noUploadImg?o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(G=u.toolbarTips)?void 0:G.image,onClick:()=>{j(e=>({...e,type:"image",linkVisible:!0}))},children:[o.j.jsx(K,{name:"image"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(Z=u.toolbarTips)?void 0:Z.image})]},"bar-image-no-upload"):F;case"table":return O;case"revoke":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(Y=u.toolbarTips)?void 0:Y.revoke,onClick:()=>{i.b.emit(d,i.n)},children:[o.j.jsx(K,{name:"revoke"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(Q=u.toolbarTips)?void 0:Q.revoke})]},"bar-revoke");case"next":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(ee=u.toolbarTips)?void 0:ee.next,onClick:()=>{i.b.emit(d,i.m)},children:[o.j.jsx(K,{name:"next"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(et=u.toolbarTips)?void 0:et.next})]},"bar-next");case"save":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(er=u.toolbarTips)?void 0:er.save,onClick:()=>{i.b.emit(d,i.O)},children:[o.j.jsx(K,{name:"baocun"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(el=u.toolbarTips)?void 0:el.save})]},"bar-save");case"prettier":return e.noPrettier?"":o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(en=u.toolbarTips)?void 0:en.prettier,onClick:()=>{v("prettier")},children:[o.j.jsx(K,{name:"prettier"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(ei=u.toolbarTips)?void 0:ei.prettier})]},"bar-prettier");case"pageFullscreen":return!e.setting.fullscreen&&o.j.jsxs("div",{className:(0,i.c)([`${a.p}-toolbar-item`,e.setting.pageFullscreen&&`${a.p}-toolbar-active`]),title:null==(ea=u.toolbarTips)?void 0:ea.pageFullscreen,onClick:()=>{c("pageFullscreen")},children:[o.j.jsx(K,{name:e.setting.pageFullscreen?"suoxiao":"fangda"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(es=u.toolbarTips)?void 0:es.pageFullscreen})]},"bar-pageFullscreen");case"fullscreen":return o.j.jsxs("div",{className:(0,i.c)([`${a.p}-toolbar-item`,e.setting.fullscreen&&`${a.p}-toolbar-active`]),title:null==(ec=u.toolbarTips)?void 0:ec.fullscreen,onClick:()=>{x()},children:[o.j.jsx(K,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(ed=u.toolbarTips)?void 0:ed.fullscreen})]},"bar-fullscreen");case"catalog":return o.j.jsxs("div",{className:(0,i.c)([`${a.p}-toolbar-item`,e.catalogVisible&&`${a.p}-toolbar-active`]),title:null==(eu=u.toolbarTips)?void 0:eu.catalog,onClick:()=>{i.b.emit(d,i.C)},children:[o.j.jsx(K,{name:"catalog"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(em=u.toolbarTips)?void 0:em.catalog})]},"bar-catalog");case"preview":return o.j.jsxs("div",{className:(0,i.c)([`${a.p}-toolbar-item`,e.setting.preview&&`${a.p}-toolbar-active`]),title:null==(ep=u.toolbarTips)?void 0:ep.preview,onClick:()=>{c("preview")},children:[o.j.jsx(K,{name:"preview"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(eh=u.toolbarTips)?void 0:eh.preview})]},"bar-preview");case"previewOnly":return o.j.jsxs("div",{className:(0,i.c)([`${a.p}-toolbar-item`,e.setting.previewOnly&&`${a.p}-toolbar-active`]),title:null==(ef=u.toolbarTips)?void 0:ef.previewOnly,onClick:()=>{e.updateSetting("previewOnly")},children:[o.j.jsx(K,{name:"preview-only"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(eg=u.toolbarTips)?void 0:eg.previewOnly})]},"bar-preview-only");case"htmlPreview":return o.j.jsxs("div",{className:(0,i.c)([`${a.p}-toolbar-item`,e.setting.htmlPreview&&`${a.p}-toolbar-active`]),title:null==(eb=u.toolbarTips)?void 0:eb.htmlPreview,onClick:()=>{c("htmlPreview")},children:[o.j.jsx(K,{name:"coding"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(ev=u.toolbarTips)?void 0:ev.htmlPreview})]},"bar-htmlPreview");case"github":return o.j.jsxs("div",{className:`${a.p}-toolbar-item`,title:null==(ex=u.toolbarTips)?void 0:ex.github,onClick:()=>(0,s.kZ)("https://github.com/imzbf/md-editor-rt"),children:[o.j.jsx(K,{name:"github"}),e.showToolbarName&&o.j.jsx("div",{className:`${a.p}-toolbar-item-name`,children:null==(ek=u.toolbarTips)?void 0:ek.github})]},"bar-github");case"mermaid":return P;case"katex":return J}else{if(!e.defToolbars)return"";let r=e.defToolbars[t];return r?(0,n.cloneElement)(r,{theme:m,previewTheme:p,language:h,insert(e){i.b.emit(d,i.h,"universal",{generate:e})}}):""}},[e,u.toolbarTips,v,H,j,k,F,O,d,c,x,P,J,m,h,p]),_=(0,n.useMemo)(()=>{let e=r.filter(e=>!l.includes(e)),t=e.indexOf("="),o=-1===t?e:e.slice(0,t+1),n=-1===t?[]:e.slice(t,Number.MAX_SAFE_INTEGER);return[o.map(e=>D(e)),n.map(e=>D(e))]},[r,l,D]);return(0,n.useEffect)(()=>{let e=()=>{};return g.current&&(e=(0,s.bv)(g.current)),()=>{e()}},[r]),o.j.jsxs(o.j.Fragment,{children:[r.length>0&&o.j.jsx("div",{className:`${a.p}-toolbar-wrapper`,ref:g,id:f,children:o.j.jsxs("div",{className:(0,i.c)([`${a.p}-toolbar`,e.showToolbarName&&`${a.p}-stn`]),children:[o.j.jsx("div",{className:`${a.p}-toolbar-left`,children:_[0]}),o.j.jsx("div",{className:`${a.p}-toolbar-right`,children:_[1]})]})}),o.j.jsx("label",{htmlFor:`${f}_label`,style:{display:"none"},"aria-label":null==(t=u.imgTitleItem)?void 0:t.upload}),o.j.jsx("input",{id:`${f}_label`,ref:b,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}}),o.j.jsx(Q,{linkVisible:k.linkVisible,clipVisible:k.clipVisible,type:k.type,onCancel:w,onOk:y})]})}),ei=(e,t,r)=>{let{editorId:l}=(0,n.useContext)(t5),[o,a]=(0,n.useState)({clear(){},init(){}});(0,n.useEffect)(()=>{var e;let t=null==(e=r.current)?void 0:e.view.contentDOM.getRootNode(),o=t.querySelector(`#${l} .cm-scroller`),n=t.querySelector(`[id="${l}-preview-wrapper"]`),s=t.querySelector(`[id="${l}-html-wrapper"]`);if(n||s){let[e,t]=(n?i.s:i.o)(o,n||s,r.current);a({init:e,clear:t})}},[t,e.setting.fullscreen,e.setting.pageFullscreen,e.setting.preview,e.setting.htmlPreview,l,r]),(0,n.useEffect)(()=>(e.scrollAuto&&!e.setting.previewOnly&&(e.setting.preview||e.setting.htmlPreview)?o.init():o.clear(),()=>{o.clear()}),[o,e.scrollAuto,e.setting.preview,e.setting.htmlPreview,e.setting.previewOnly])},ea=async(e,t,r)=>{var l;let o="",n=0,s=0,c=!0,d=!1,u=t.getSelectedText(),m=a.h.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){let t=e.replace(/^h(\d)/,(e,t)=>Array(Number(t)).fill("#",0,t).join(""));o=`${t} ${u}`,n=t.length+1}else if("prettier"===e){let e=window.prettier||a.h.editorExtensions.prettier.prettierInstance,n=[(null==(l=window.prettierPlugins)?void 0:l.markdown)||a.h.editorExtensions.prettier.parserMarkdownInstance];e&&void 0!==n[0]?o=await e.format(t.getValue(),{parser:"markdown",plugins:n}):(i.b.emit(r.editorId,i.E,{name:"prettier",message:"prettier is undefined"}),o=t.getValue()),c=!1,d=!0}else switch(e){case"bold":o=`**${u}**`,n=2,s=-2;break;case"underline":o=`<u>${u}</u>`,n=3,s=-4;break;case"italic":o=`*${u}*`,n=1,s=-1;break;case"strikeThrough":o=`~~${u}~~`,n=2,s=-2;break;case"sub":o=`~${u}~`,n=1,s=-1;break;case"sup":o=`^${u}^`,n=1,s=-1;break;case"codeRow":o="`"+u+"`",n=1,s=-1;break;case"quote":o=`> ${u}`,n=2;break;case"orderedList":o=`1. ${u}`,n=3;break;case"unorderedList":o=`- ${u}`,n=2;break;case"task":o=`- [ ] ${u}`,n=6;break;case"code":{let e=r.text||u||"",t=r.mode||"language";o=`\`\`\`${t}
${e}
\`\`\`
`,n=3,s=3+t.length-o.length;break}case"table":{o="|";let{selectedShape:e={x:1,y:1}}=r,{x:t,y:l}=e;for(let e=0;e<=l;e++)o+=" col |";o+=`
|`;for(let e=0;e<=l;e++)o+=" - |";for(let e=0;e<=t;e++){o+=`
|`;for(let e=0;e<=l;e++)o+=" content |"}n=2,s=5-o.length;break}case"link":{let{desc:e,url:t}=r;o=`[${e}](${t})`,c=!1;break}case"image":{let{desc:e,url:t,urls:l}=r;o=l instanceof Array?l.reduce((e,t)=>{let{url:r="",alt:l="",title:o=""}="object"==typeof t?t:{url:t};return e+`![${l}](${r}${o?" '"+o+"'":""})
`},""):`![${e}](${t})
`,c=!1;break}case"flow":o=`\`\`\`mermaid
${(null==m?void 0:m.flow)||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,n=11,s=-5;break;case"sequence":o=`\`\`\`mermaid
${(null==m?void 0:m.sequence)||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,n=11,s=-5;break;case"gantt":o=`\`\`\`mermaid
${(null==m?void 0:m.gantt)||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,n=11,s=-5;break;case"class":o=`\`\`\`mermaid
${(null==m?void 0:m.class)||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,n=11,s=-5;break;case"state":o=`\`\`\`mermaid
${(null==m?void 0:m.state)||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,n=11,s=-5;break;case"pie":o=`\`\`\`mermaid
${(null==m?void 0:m.pie)||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,n=11,s=-5;break;case"relationship":o=`\`\`\`mermaid
${(null==m?void 0:m.relationship)||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,n=11,s=-5;break;case"journey":o=`\`\`\`mermaid
${(null==m?void 0:m.journey)||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,n=11,s=-5;break;case"katexInline":o="$$",n=1,s=-1;break;case"katexBlock":o=`$$

$$
`,n=3,s=-4;break;case"universal":{let{generate:e}=r,t=e(u);o=t.targetValue,c=t.select??!0,n=t.deviationStart||0,s=t.deviationEnd||0}}return{text:o,options:{select:c,deviationStart:n,deviationEnd:s,replaceAll:d}}},es=e=>{let t=new m.F6;return r=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(r)}):e.dispatch({effects:m.Py.appendConfig.of(t.of(r))}),!0)};class ec{constructor(e){N(this,"view"),N(this,"maxLength",Number.MAX_SAFE_INTEGER),N(this,"toggleTabSize"),N(this,"togglePlaceholder"),N(this,"setExtensions"),N(this,"toggleDisabled"),N(this,"toggleReadOnly"),N(this,"toggleMaxlength"),this.view=e,this.toggleTabSize=es(this.view),this.togglePlaceholder=es(this.view),this.setExtensions=es(this.view),this.toggleDisabled=es(this.view),this.toggleReadOnly=es(this.view),this.toggleMaxlength=es(this.view)}getValue(){return this.view.state.doc.toString()}setValue(e,t=0,r=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:r,insert:e}})}getSelectedText(){let{from:e,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(e,t)}replaceSelectedText(e,t={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},r){try{if(t.replaceAll){if(this.setValue(e),e.length>this.maxLength)throw Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+e.length>this.maxLength)throw Error("The input text is too long");let{from:r}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(e)),t.select){let l=r+e.length+t.deviationEnd;this.view.dispatch({selection:{anchor:r+t.deviationStart,head:l}})}this.view.focus()}catch(t){if("The input text is too long"===t.message)i.b.emit(r,i.E,{name:"overlength",message:t.message,data:e});else throw t}}setTabSize(e){this.toggleTabSize([m.yy.tabSize.of(e),h.c.of(" ".repeat(e))])}setPlaceholder(e){this.togglePlaceholder((0,c.W$)(e))}focus(e){if(this.view.focus(),!e)return;let t=0,r=0,l=0;switch(e){case"start":break;case"end":t=r=l=this.getValue().length;break;default:t=e.rangeAnchor||e.cursorPos,r=e.rangeHead||e.cursorPos,l=e.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:m.jT.create([m.jT.range(t,r),m.jT.cursor(l)],1)})}setDisabled(e){this.toggleDisabled([c.tk.editable.of(!e)])}setReadOnly(e){this.toggleReadOnly([m.yy.readOnly.of(e)])}setMaxLength(e){this.maxLength=e,this.toggleMaxlength([m.yy.changeFilter.of(t=>t.newDoc.length<=e)])}}let ed="var(--md-color)",eu="var(--md-color)",em="#e5c07b",ep="#d19a66",eh="var(--md-bk-color)",ef="var(--md-bk-color)",eg="#528bff",eb=c.tk.theme({"&":{color:eu,backgroundColor:eh},".cm-content":{caretColor:eg},".cm-cursor, .cm-dropCursor":{borderLeftColor:eg},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#ceedfa33"},".cm-panels":{backgroundColor:"#21252b",color:eu},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:eh,color:eu,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#2c313a"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:ef},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ef,borderBottomColor:ef},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:eu}}},{dark:!0}),ev=h.Qf.define([{tag:f.pJ.keyword,color:"#c678dd"},{tag:[f.pJ.name,f.pJ.deleted,f.pJ.character,f.pJ.propertyName,f.pJ.macroName],color:ed},{tag:[f.pJ.function(f.pJ.variableName),f.pJ.labelName],color:"#e5c07b"},{tag:[f.pJ.color,f.pJ.constant(f.pJ.name),f.pJ.standard(f.pJ.name)],color:ep},{tag:[f.pJ.definition(f.pJ.name),f.pJ.separator],color:eu},{tag:[f.pJ.typeName,f.pJ.className,f.pJ.number,f.pJ.changed,f.pJ.annotation,f.pJ.modifier,f.pJ.self,f.pJ.namespace],color:"#e5c07b"},{tag:[f.pJ.operator,f.pJ.operatorKeyword,f.pJ.url,f.pJ.escape,f.pJ.regexp,f.pJ.link,f.pJ.special(f.pJ.string)],color:"#56b6c2"},{tag:[f.pJ.meta,f.pJ.comment],color:em},{tag:f.pJ.strong,fontWeight:"bold"},{tag:f.pJ.emphasis,fontStyle:"italic"},{tag:f.pJ.strikethrough,textDecoration:"line-through"},{tag:f.pJ.link,color:em,textDecoration:"underline"},{tag:f.pJ.heading,fontWeight:"bold",color:ed},{tag:[f.pJ.atom,f.pJ.bool,f.pJ.special(f.pJ.variableName)],color:ep},{tag:[f.pJ.processingInstruction,f.pJ.string,f.pJ.inserted],color:"var(--md-color)"},{tag:f.pJ.invalid,color:"#ffffff"}]),ex=[eb,(0,h.nF)(ev)],ek="#3f4a54",ej="#3f4a54",ew="#2d8cf0",ey="#d19a66",e$="var(--md-bk-color)",eC="var(--md-bk-color)",eT="#3f4a54",eE=c.tk.theme({"&":{color:ej,backgroundColor:e$},".cm-content":{caretColor:eT},".cm-cursor, .cm-dropCursor":{borderLeftColor:eT},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#bad5fa"},".cm-panels":{backgroundColor:"#f6f6f6",color:ej},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:e$,color:ej,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#ceedfa33"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:eC},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:eC,borderBottomColor:eC},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:ej}}}),eN=h.Qf.define([{tag:f.pJ.keyword,color:"#c678dd"},{tag:[f.pJ.name,f.pJ.deleted,f.pJ.character,f.pJ.propertyName,f.pJ.macroName],color:ek},{tag:[f.pJ.function(f.pJ.variableName),f.pJ.labelName],color:"#2d8cf0"},{tag:[f.pJ.color,f.pJ.constant(f.pJ.name),f.pJ.standard(f.pJ.name)],color:ey},{tag:[f.pJ.definition(f.pJ.name),f.pJ.separator],color:ej},{tag:[f.pJ.typeName,f.pJ.className,f.pJ.number,f.pJ.changed,f.pJ.annotation,f.pJ.modifier,f.pJ.self,f.pJ.namespace],color:"#e5c07b"},{tag:[f.pJ.operator,f.pJ.operatorKeyword,f.pJ.url,f.pJ.escape,f.pJ.regexp,f.pJ.link,f.pJ.special(f.pJ.string)],color:"#56b6c2"},{tag:[f.pJ.meta,f.pJ.comment],color:ew},{tag:f.pJ.strong,fontWeight:"bold"},{tag:f.pJ.emphasis,fontStyle:"italic"},{tag:f.pJ.strikethrough,textDecoration:"line-through"},{tag:f.pJ.link,color:ew,textDecoration:"underline"},{tag:f.pJ.heading,fontWeight:"bold",color:ek},{tag:[f.pJ.atom,f.pJ.bool,f.pJ.special(f.pJ.variableName)],color:ey},{tag:[f.pJ.processingInstruction,f.pJ.string,f.pJ.inserted],color:"#3f4a54"},{tag:f.pJ.invalid,color:"#fff"}]),eI=[eE,(0,h.nF)(eN)],eS=(e,t,r,l,o)=>(n,i,a,s)=>{let c=`${e}${t}`.slice(s-a);n.dispatch(n.state.replaceSelection(`${c}${r}${l}`));let d=a+i.label.length+("title"===o?r.length:0);n.dispatch({selection:m.jT.create([m.jT.range(a+i.label.length+("title"===o?1:-t.length),d),m.jT.cursor(d)],1)}),n.focus()},eL=e=>(t,r,l,o)=>{let n=e.slice(o-l);t.dispatch(t.state.replaceSelection(`${n} `))},eA=e=>{let t=e=>{let t=e.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return null===t||t.from==t.to&&e.explicit?null:{from:t.from,options:[...["h2","h3","h4","h5","h6"].map((e,t)=>{let r=Array(t+2).fill("#").join("");return{label:r,type:"text",apply:eL(r)}}),...["unchecked","checked"].map(e=>{let t="checked"===e?"- [x]":"- [ ]";return{label:t,type:"text",apply:eL(t)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(e=>({label:`${e[0]}${e[1]}`,type:"text",apply:eS(e[0],e[1],"","`"===e[0]?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:eS("$","","","$","type")},{label:"$$",type:"text",apply:eS("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(e=>({label:`!!! ${e}`,type:"text",apply:eS("!!!",` ${e}`," Title",`

!!!`,"title")}))]}};return(0,g.ys)({override:e?[t,...e]:[t]})},eM=(e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(i.b.emit(e,i.h,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:p.YE,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:t=>(i.b.emit(e,i.O,t.state.doc.toString()),!0),shift:()=>(i.b.emit(e,i.h,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(i.b.emit(e,i.h,"underline"),!0),shift:()=>(i.b.emit(e,i.h,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(i.b.emit(e,i.h,"italic"),!0),shift:()=>(i.b.emit(e,i.l,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(i.b.emit(e,i.h,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(i.b.emit(e,i.h,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(i.b.emit(e,i.h,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(i.b.emit(e,i.h,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(i.b.emit(e,i.h,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(i.b.emit(e,i.h,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(i.b.emit(e,i.h,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(i.b.emit(e,i.h,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(i.b.emit(e,i.h,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(i.b.emit(e,i.h,"code"),!0),any:(t,r)=>(!!r.ctrlKey||!!r.metaKey)&&!!r.altKey&&"KeyC"===r.code&&(i.b.emit(e,i.h,"codeRow"),!0)},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(i.b.emit(e,i.l,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>!t.noPrettier&&(i.b.emit(e,i.h,"prettier"),!0)},{any:(t,r)=>(!!r.ctrlKey||!!r.metaKey)&&!!r.altKey&&!!r.shiftKey&&"KeyT"===r.code&&(i.b.emit(e,i.h,"table"),!0)},...b.Lp],eR=(e,t)=>{let{editorId:r}=(0,n.useContext)(t5),l=(0,n.useCallback)(e=>{e instanceof Promise?e.then(e=>{i.b.emit(r,i.h,"universal",{generate:()=>({targetValue:e})})}).catch(e=>{console.error(e)}):i.b.emit(r,i.h,"universal",{generate:()=>({targetValue:e})})},[r]);return(0,n.useCallback)(o=>{var n,a,s;if(!o.clipboardData)return;if(o.clipboardData.files.length>0){let{files:e}=o.clipboardData;i.b.emit(r,i.U,Array.from(e).filter(e=>/image\/.*/.test(e.type))),o.preventDefault();return}let c=o.clipboardData.getData("text/plain"),d=(null==(n=t.current)?void 0:n.view.state.selection.main.to)||0,u=(null==(a=t.current)?void 0:a.view.state.doc.lineAt(d).from)||0,m=(null==(s=t.current)?void 0:s.view.state.doc.sliceString(u,d))||"",p=/!\[.*\]\(\s*$/.test(m),h=/!\[.*\]\((.*)\s?.*\)/.test(c);if(p){l(e.transformImgUrl(c)),o.preventDefault();return}if(h){let t=c.match(RegExp("(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?[\"']?.*[\"']?\\))","g"));t?Promise.all(t.map(t=>e.transformImgUrl(t))).then(e=>{l(e.reduce((e,r,l)=>e.replace(t[l],r),c))}):l(c),o.preventDefault();return}if(e.autoDetectCode&&o.clipboardData.types.includes("vscode-editor-data")){let e=JSON.parse(o.clipboardData.getData("vscode-editor-data"));i.b.emit(r,i.h,"code",{mode:e.mode,text:o.clipboardData.getData("text/plain")}),o.preventDefault();return}e.maxLength&&c.length+e.modelValue.length>e.maxLength&&i.b.emit(r,i.E,{name:"overlength",message:"The input text is too long",data:c})},[t,r,l,e])};c.tk.EDIT_CONTEXT=!1;let eH=e=>{let{tabWidth:t,editorId:r,theme:l}=(0,n.useContext)(t5),o=(0,n.useRef)(null),s=(0,n.useRef)(),h=(0,n.useRef)(!0),[f]=(0,n.useState)(()=>({language:new m.F6,theme:new m.F6,autocompletion:new m.F6,update:new m.F6,domEvent:new m.F6,history:new m.F6})),[g]=(0,n.useState)(()=>eM(r,e)),b=(0,n.useCallback)(()=>[...g,...p.wQ,...p.f$,p.oc],[g]),v=eR(e,s),[x,k]=(0,n.useState)({}),j=(0,n.useMemo)(()=>{let t={paste:v,blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,input:t=>{e.onInput&&e.onInput(t);let{data:l}=t;e.maxLength&&e.modelValue.length+l.length>e.maxLength&&i.b.emit(r,i.E,{name:"overlength",message:"The input text is too long",data:l})}},l={...t},o=Object.keys(t);for(let e in x){let r=e;o.includes(r)?l[r]=(e,l)=>{x[r](e,l),e.defaultPrevented||t[r](e,l)}:l[r]=x[r]}return l},[x,r,v,e]),[w]=(0,n.useState)(()=>[c.$f.of(b()),f.history.of((0,p.m8)()),f.language.of((0,u.markdown)({codeLanguages:d.M})),c.tk.lineWrapping,f.update.of(c.tk.updateListener.of(t=>{t.docChanged&&e.onChange(t.state.doc.toString())})),f.domEvent.of(c.tk.domEventHandlers(j)),(0,c.Uw)()]),[y]=(0,n.useState)(()=>a.h.codeMirrorExtensions(l,[...w,f.theme.of("light"===l?eI:ex),f.autocompletion.of(eA(e.completions))],b(),{editorId:r})),$=(0,n.useCallback)(()=>{var e,t;null==(e=s.current)||e.view.dispatch({effects:f.history.reconfigure([])}),null==(t=s.current)||t.view.dispatch({effects:f.history.reconfigure((0,p.m8)())})},[f.history]);return(0,n.useEffect)(()=>{let l=new c.tk({doc:e.modelValue,parent:o.current,extensions:y}),n=new ec(l);s.current=n,setTimeout(()=>{n.setTabSize(t),n.setDisabled(e.disabled),n.setReadOnly(e.readOnly),e.placeholder&&n.setPlaceholder(e.placeholder),"number"==typeof e.maxLength&&n.setMaxLength(e.maxLength),e.autoFocus&&l.focus(),h.current=!1},0);let a=()=>(0,p.Yw)(l),d=()=>(0,p.KX)(l),u=e=>{k(e)},m=(e,t)=>{let r=l.state.doc.line(e);l.dispatch(l.state.update({changes:{from:r.from,to:r.to,insert:t}}))};return i.b.on(r,{name:i.n,callback:a}),i.b.on(r,{name:i.m,callback:d}),i.b.on(r,{name:i.i,callback:u}),i.b.on(r,{name:i.T,callback:m}),()=>{l.destroy(),i.b.remove(r,i.n,a),i.b.remove(r,i.m,d),i.b.remove(r,i.i,u),i.b.remove(r,i.T,m),h.current=!0}},[]),(0,n.useEffect)(()=>{let t=async(t,l={})=>{var o,n;if("image"===t&&l.transform){let n=e.transformImgUrl(l.url);if(n instanceof Promise)n.then(async e=>{var o;let{text:n,options:i}=await ea(t,s.current,{...l,url:e});null==(o=s.current)||o.replaceSelectedText(n,i,r)}).catch(e=>{console.error(e)});else{let{text:e,options:i}=await ea(t,s.current,{...l,url:n});null==(o=s.current)||o.replaceSelectedText(e,i,r)}}else{let{text:e,options:o}=await ea(t,s.current,l);null==(n=s.current)||n.replaceSelectedText(e,o,r)}};return i.b.on(r,{name:i.h,callback:t}),()=>{i.b.remove(r,i.h,t)}},[r,e]),(0,n.useEffect)(()=>{setTimeout(()=>{var e;null==(e=s.current)||e.view.dispatch({effects:f.theme.reconfigure("light"===l?eI:ex)})},0)},[f.theme,l]),(0,n.useEffect)(()=>{setTimeout(()=>{var t;null==(t=s.current)||t.view.dispatch({effects:[f.update.reconfigure(c.tk.updateListener.of(t=>{t.docChanged&&e.onChange(t.state.doc.toString())})),f.domEvent.reconfigure(c.tk.domEventHandlers(j)),f.autocompletion.reconfigure(eA(e.completions))]})},0)},[f.autocompletion,f.domEvent,f.update,j,e]),(0,n.useEffect)(()=>{var t,r;(null==(t=s.current)?void 0:t.getValue())!==e.modelValue&&(null==(r=s.current)||r.setValue(e.modelValue))},[e.modelValue]),(0,n.useEffect)(()=>{var e;h.current||null==(e=s.current)||e.setTabSize(t)},[t]),(0,n.useEffect)(()=>{var t;h.current||null==(t=s.current)||t.setPlaceholder(e.placeholder)},[e.placeholder]),(0,n.useEffect)(()=>{var t;h.current||null==(t=s.current)||t.setDisabled(e.disabled)},[e.disabled]),(0,n.useEffect)(()=>{var t;h.current||null==(t=s.current)||t.setDisabled(e.readOnly)},[e.readOnly]),(0,n.useEffect)(()=>{var t;h.current||"number"==typeof e.maxLength&&(null==(t=s.current)||t.setMaxLength(e.maxLength))},[e.maxLength]),{inputWrapperRef:o,codeMirrorUt:s,resetHistory:$}},eF=(e,t)=>{let{editorId:r}=(0,n.useContext)(t5);(0,n.useEffect)(()=>e.noImgZoomIn?void 0:(()=>{let e=document.querySelectorAll(`#${r}-preview img:not(.not-zoom):not(.medium-zoom-image)`),t=(0,v.Z)(e,{background:"#00000073"});return()=>{t.detach()}})(),[r,t,e.noImgZoomIn,e.setting])},eO=(e,t,r)=>{let{editorId:l,usedLanguageText:o,customIcon:i,rootRef:s}=(0,n.useContext)(t5),{formatCopiedText:c=e=>e}=e;(0,n.useEffect)(()=>{var t;e.setting.preview&&(null==(t=s.current)||t.querySelectorAll(`#${l} .${a.p}-preview .${a.p}-code`).forEach(e=>{let t=-1,r=e.querySelector(`.${a.p}-copy-button`);r&&(r.onclick=l=>{l.preventDefault(),clearTimeout(t);let n=x(c((e.querySelector("input:checked + pre code")||e.querySelector("pre code")).textContent)),{text:i,successTips:a,failTips:s}=o.copyCode,d=n?a:s;r.dataset.isIcon?r.dataset.tips=d:r.innerHTML=d,t=window.setTimeout(()=>{r.dataset.isIcon?r.dataset.tips=i:r.innerHTML=i},1500)})}))},[i,l,c,t,r,e.setting.preview,s,o.copyCode])},eP=e=>{let{highlight:t}=(0,n.useContext)(t5),r=(0,n.useRef)(a.h.editorExtensions.highlight.instance),[l,o]=(0,n.useState)(!!r.current);return(0,n.useEffect)(()=>{e.noHighlight||r.current||L("link",{...t.css,rel:"stylesheet",id:`${a.p}-hlCss`})},[t.css,e.noHighlight]),(0,n.useEffect)(()=>{e.noHighlight||r.current||(S("link",{...t.css,rel:"stylesheet",id:`${a.p}-hlCss`}),S("script",{...t.js,id:`${a.p}-hljs`,onload(){r.current=window.hljs,o(!0)}},"hljs"))},[t.css,t.js,e.noHighlight]),{hljsRef:r,hljsInited:l}},eJ=new $.z({max:1e3,ttl:6e5}),eD=e=>{let{theme:t,rootRef:r}=(0,n.useContext)(t5),{noMermaid:l,sanitizeMermaid:o}=e,i=(0,n.useRef)(a.h.editorExtensions.mermaid.instance),[c,d]=(0,n.useState)(-1),u=(0,n.useCallback)(()=>{eJ.clear();let e=i.current;!l&&e&&(e.initialize(a.h.mermaidConfig({startOnLoad:!1,theme:"dark"===t?"dark":"default"})),d(e=>e+1))},[l,t]);(0,n.useEffect)(u,[u]),(0,n.useEffect)(()=>{var e,t;let{editorExtensions:r,editorExtensionsAttrs:o}=a.h;if(l||i.current)return;let n=r.mermaid.js;/\.mjs/.test(n)?(S("link",{...null==(e=o.mermaid)?void 0:e.js,rel:"modulepreload",href:n,id:`${a.p}-mermaid-m`}),import(n).then(e=>{i.current=e.default,u()})):S("script",{...null==(t=o.mermaid)?void 0:t.js,src:n,id:`${a.p}-mermaid`,onload(){i.current=window.mermaid,u()}},"mermaid")},[u,l]);let m=(0,n.useCallback)(async()=>{var e;if(!l&&i.current){let t=(null==(e=r.current)?void 0:e.querySelectorAll(`div.${a.p}-mermaid`))||[],l=document.createElement("div"),n=document.body.offsetWidth>1366?document.body.offsetWidth:1366,c=document.body.offsetHeight>768?document.body.offsetHeight:768;l.style.width=n+"px",l.style.height=c+"px",l.style.position="fixed",l.style.zIndex="-10000",l.style.top="-10000";let d=t.length;d>0&&document.body.appendChild(l),await Promise.allSettled(Array.from(t).map(e=>(async e=>{let t=eJ.get(e.innerText);if(!t){let r=(0,s.kb)(),n=i.current.renderAsync||i.current.render,a="";try{a=await n(r,e.innerText,l)}catch{}t=await o("string"==typeof a?a:a.svg)}let r=document.createElement("p");r.className=`${a.p}-mermaid`,r.setAttribute("data-processed",""),r.innerHTML=t,r.children[0].removeAttribute("height"),eJ.set(e.innerText,t),void 0!==e.dataset.line&&(r.dataset.line=e.dataset.line),e.replaceWith(r),0==--d&&l.remove()})(e)))}},[l,r,o]);return{mermaidRef:i,reRender:c,replaceMermaid:m}},e_=e=>{let t=(0,n.useRef)(a.h.editorExtensions.katex.instance),[r,l]=(0,n.useState)(!!t.current);return(0,n.useEffect)(()=>{if(e.noKatex||t.current)return;let{editorExtensions:r}=a.h;S("script",{src:r.katex.js,id:`${a.p}-katex`,onload(){t.current=window.katex,l(!0)}},"katex"),S("link",{rel:"stylesheet",href:r.katex.css,id:`${a.p}-katexCss`})},[e.noKatex]),{katexRef:t,katexInited:r}},eV=(e,t)=>{let r=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(e,l,o,n,i)=>{let s=e[l],c=s.content.trim();if("mermaid"===s.info){let r;e[l].map&&0===e[l].level&&(r=e[l].map[0],e[l].attrSet("data-line",String(r)));let o=eJ.get(c);return o?`<p class="${a.p}-mermaid" ${void 0!==r?"data-line="+r:""} data-processed>${o}</p>`:`<div class="${a.p}-mermaid" ${void 0!==r?"data-line="+r:""} data-mermaid-theme=${t.themeRef.current}>${c}</div>`}return r(e,l,o,n,i)}},ez=(e,t)=>{let r=e.attrs?e.attrs.slice():[];return t.forEach(t=>{let l=e.attrIndex(t[0]);l<0?r.push(t):(r[l]=r[l].slice(),r[l][1]+=` ${t[1]}`)}),r},eB=(e,t)=>{let r,l,o;for(let n of[{open:"$",close:"$"},{open:"\\(",close:"\\)"}])if(e.src.startsWith(n.open,e.pos)){let i=e.pos+n.open.length;for(r=i;-1!==(r=e.src.indexOf(n.close,r));){for(o=r-1;"\\"===e.src[o];)o-=1;if((r-o)%2==1)break;r+=n.close.length}return -1===r?(t||(e.pending+=n.open),e.pos=i):r-i==0?(t||(e.pending+=n.open+n.close),e.pos=i+n.close.length):(t||((l=e.push("math_inline","math",0)).markup=n.open,l.content=e.src.slice(i,r)),e.pos=r+n.close.length),!0}return!1},eW=(e,t,r,l)=>{let o,n,i,a,s=!1,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];for(let u of[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}]){if(c+u.open.length>d||e.src.slice(c,c+u.open.length)!==u.open)continue;if(c+=u.open.length,o=e.src.slice(c,d),l)return!0;for(o.trim().slice(-u.close.length)===u.close&&(o=o.trim().slice(0,-u.close.length),s=!0),i=t;!s&&!(++i>=r||(c=e.bMarks[i]+e.tShift[i],c<(d=e.eMarks[i])&&e.tShift[i]<e.blkIndent));)e.src.slice(c,d).trim().slice(-u.close.length)===u.close&&(a=e.src.slice(0,d).lastIndexOf(u.close),n=e.src.slice(c,a),s=!0);e.line=i+1;let m=e.push("math_block","math",0);return m.block=!0,m.content=(o&&o.trim()?o+`
`:"")+e.getLines(t+1,i,e.tShift[t],!0)+(n&&n.trim()?n:""),m.map=[t,e.line],m.markup=u.open,!0}return!1},eq=(e,{katexRef:t})=>{e.inline.ruler.before("escape","math_inline",eB),e.block.ruler.after("blockquote","math_block",eW,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=(e,r,l,o,n)=>{let i=e[r],s={attrs:ez(i,[["class",`${a.p}-katex-inline`]])};if(!t.current)return`<span ${n.renderAttrs(s)}>${i.content}</span>`;{let e=t.current.renderToString(i.content,a.h.katexConfig({throwOnError:!1}));return`<span ${n.renderAttrs(s)} data-processed>${e}</span>`}},e.renderer.rules.math_block=(e,r,l,o,n)=>{let i=e[r],s={attrs:ez(i,[["class",`${a.p}-katex-block`]])};if(!t.current)return`<p ${n.renderAttrs(s)}>${i.content}</p>`;{let e=t.current.renderToString(i.content,a.h.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${n.renderAttrs(s)} data-processed>${e}</p>`}}},eK=(e,t)=>{let r=(t=t||{}).marker||"!",l=r.charCodeAt(0),o=r.length,n="",i="",s=(e,t,r,l,o)=>{let n=e[t];return"admonition_open"===n.type?e[t].attrPush(["class",`${a.p}-admonition ${a.p}-admonition-${n.info}`]):"admonition_title_open"===n.type&&e[t].attrPush(["class",`${a.p}-admonition-title`]),o.renderToken(e,t,r)},c=e=>{let t=e.trim().split(" ",2);i="",n=t[0],t.length>1&&(i=e.substring(n.length+2))};e.block.ruler.before("code","admonition",(e,t,a,s)=>{let d,u,m,p=!1,h=e.bMarks[t]+e.tShift[t],f=e.eMarks[t];if(l!==e.src.charCodeAt(h))return!1;for(d=h+1;d<=f&&r[(d-h)%o]===e.src[d];d++);let g=Math.floor((d-h)/o);if(3!==g)return!1;d-=(d-h)%o;let b=e.src.slice(h,d);if(c(e.src.slice(d,f)),s)return!0;for(u=t;!(++u>=a||(h=e.bMarks[u]+e.tShift[u],h<(f=e.eMarks[u])&&e.sCount[u]<e.blkIndent));)if(l===e.src.charCodeAt(h)&&!(e.sCount[u]-e.blkIndent>=4)){for(d=h+1;d<=f&&r[(d-h)%o]===e.src[d];d++);if(!(Math.floor((d-h)/o)<g)&&(d-=(d-h)%o,!((d=e.skipSpaces(d))<f))){p=!0;break}}let v=e.parentType,x=e.lineMax;return e.parentType="root",e.lineMax=u,(m=e.push("admonition_open","div",1)).markup=b,m.block=!0,m.info=n,m.map=[t,u],i&&((m=e.push("admonition_title_open","p",1)).markup=b+" "+n,m.map=[t,u],(m=e.push("inline","",0)).content=i,m.map=[t,e.line-1],m.children=[],(m=e.push("admonition_title_close","p",-1)).markup=b+" "+n),e.md.block.tokenize(e,t+1,u),(m=e.push("admonition_close","div",-1)).markup=e.src.slice(h,d),m.block=!0,e.parentType=v,e.lineMax=x,e.line=u+(p?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=s,e.renderer.rules.admonition_title_open=s,e.renderer.rules.admonition_title_close=s,e.renderer.rules.admonition_close=s},eU=(e,t)=>{e.renderer.rules.heading_open=(r,l)=>{var o;let n=r[l],i=(null==(o=r[l+1].children)?void 0:o.reduce((e,t)=>e+(["text","code_inline","math_inline"].includes(t.type)&&t.content||""),""))||"",a=n.markup.length;return t.headsRef.current.push({text:i,level:a}),n.map&&0===n.level&&n.attrSet("id",t.mdHeadingId(i,a,t.headsRef.current.length)),e.renderer.renderToken(r,l,t)},e.renderer.rules.heading_close=(e,t,r,l,o)=>o.renderToken(e,t,r)},eX=(e,t)=>{if("string"==typeof t[e])return t[e];let r=`<i class="${a.p}-iconfont ${a.p}-icon-${e}"></i>`;if("svg"===a.h.iconfontType)return`<svg class="${a.p}-icon" aria-hidden="true"><use xlink:href="#${a.p}-icon-${e}"></use></svg>`;return r},eG=(e,t)=>{let r=e.renderer.rules.fence,l=e.utils.unescapeAll,o=/\[(\w*)(?::([\w ]*))?\]/,n=/::(open|close)/,i=e=>e.info?l(e.info).trim():"",s=e=>{let t=i(e),[r=null,l=""]=(o.exec(t)||[]).slice(1);return[r,l]},c=e=>{let t=i(e);return t?t.split(/(\s+)/g)[0]:""},d=e=>{let r=e.info.match(n)||[],l="open"===r[1]||"close"!==r[1]&&t.codeFoldable&&e.content.trim().split(`
`).length<t.autoFoldThreshold,o=r[1]||t.codeFoldable?"details":"div";return{open:l,tagContainer:o,tagHeader:r[1]||t.codeFoldable?"summary":"div"}},u=(e,l,i,u,m)=>{if(e[l].hidden)return"";let p=t.usedLanguageTextRef.current.copyCode.text,h=t.customIconRef.current.copy||p,f=!!t.customIconRef.current.copy,g=`<span class="${a.p}-collapse-tips">${eX("collapse-tips",t.customIconRef.current)}</span>`,[b]=s(e[l]);if(null===b){let{open:t,tagContainer:o,tagHeader:s}=d(e[l]),c=[["class",`${a.p}-code`]];t&&c.push(["open",""]);let b={attrs:ez(e[l],c)};e[l].info=e[l].info.replace(n,"");let v=r(e,l,i,u,m);return`<${o} ${m.renderAttrs(b)}>
        <${s} class="${a.p}-code-head">
          <div class="${a.p}-code-flag">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="${a.p}-code-action">
          <span class="${a.p}-code-lang">${e[l].info.trim()}</span>
          <span class="${a.p}-copy-button" data-tips="${p}"${f?' data-is-icon="true"':""}>${h}</span>
          ${"details"===o?g:""}
        </div>
        </${s}>${v}</${o}>`}let v,x,k,j,w="",y="",$="",{open:C,tagContainer:T,tagHeader:E}=d(e[l]),N=[["class",`${a.p}-code`]];C&&N.push(["open",""]);let I={attrs:ez(e[l],N)};for(let d=l;d<e.length&&(v=e[d],[x,k]=s(v),x===b);d++){v.info=v.info.replace(o,"").replace(n,""),v.hidden=!0;let s=`${a.p}-codetab-${t.editorId}-${l}-${d-l}`;j=d-l>0?"":"checked",w+=`<li>
          <input type="radio" id="label-${a.p}-codetab-label-1-${t.editorId}-${l}-${d-l}" name="${a.p}-codetab-label-${t.editorId}-${l}" class="${s}" ${j}>
          <label for="label-${a.p}-codetab-label-1-${t.editorId}-${l}-${d-l}" onclick="this.getRootNode().querySelectorAll('.${s}').forEach(e => e.click())">${k||c(v)}</label>
        </li>`,y+=`<input type="radio" name="${a.p}-codetab-pre-${t.editorId}-${l}" class="${s}" ${j}>
      ${r(e,d,i,u,m)}`,$+=`<input type="radio" name="${a.p}-codetab-lang-${t.editorId}-${l}" class="${s}" ${j}>
      <span class=${a.p}-code-lang>${c(v)}</span>`}return`<${T} ${m.renderAttrs(I)}>
      <${E} class="${a.p}-code-head">
        <div class="${a.p}-code-flag">
          <ul class="${a.p}-codetab-label">${w}</ul>
        </div>
        <div class="${a.p}-code-action">
          <span class="${a.p}-codetab-lang">${$}</span>
          <span class="${a.p}-copy-button" data-tips="${p}"${f?' data-is-icon="true"':""}>${h}</span>
          ${"details"===T?g:""}
        </div>
      </${E}>${y}</${T}>`};e.renderer.rules.fence=u,e.renderer.rules.code_block=u};var eZ={exports:{}},eY={},eQ={exports:{}},e0={};function e1(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}var e2=/javascript\s*\:/img;e0.whiteList=e1(),e0.getDefaultWhiteList=e1,e0.onAttr=function(e,t,r){},e0.onIgnoreAttr=function(e,t,r){},e0.safeAttrValue=function(e,t){return e2.test(t)?"":t};var e6={trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},e5=function(e,t){";"!==(e=e6.trimRight(e))[e.length-1]&&(e+=";");var r=e.length,l=!1,o=0,n=0,i="";function a(){if(!l){var r=e6.trim(e.slice(o,n)),a=r.indexOf(":");if(-1!==a){var s=e6.trim(r.slice(0,a)),c=e6.trim(r.slice(a+1));if(s){var d=t(o,i.length,s,c,r);d&&(i+=d+"; ")}}}o=n+1}for(;n<r;n++){var s=e[n];if("/"===s&&"*"===e[n+1]){var c=e.indexOf("*/",n+2);if(-1===c)break;o=(n=c+1)+1,l=!1}else"("===s?l=!0:")"===s?l=!1:";"===s?l||a():s===`
`&&a()}return e6.trim(i)};function e3(e){return null==e}function e4(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||e0.whiteList,e.onAttr=e.onAttr||e0.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||e0.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||e0.safeAttrValue,this.options=e}e4.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,l=t.onAttr,o=t.onIgnoreAttr,n=t.safeAttrValue;return e5(e,function(e,t,i,a,s){var c=r[i],d=!1;if(!0===c?d=c:"function"==typeof c?d=c(a):c instanceof RegExp&&(d=c.test(a)),!0!==d&&(d=!1),a=n(i,a)){var u={position:t,sourcePosition:e,source:s,isWhite:d};if(d){var m=l(i,a,u);return null==m?i+":"+a:m}var m=o(i,a,u);if(null!=m)return m}})};!function(e,t){for(var r in(t=e.exports=function(e,t){return new e4(t).process(e)}).FilterCSS=e4,e0)t[r]=e0[r];"u">typeof window&&(window.filterCSS=e.exports)}(eQ,eQ.exports);var e7=eQ.exports,e8={indexOf:function(e,t){var r,l;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,l=e.length;r<l;r++)if(e[r]===t)return r;return -1},forEach:function(e,t,r){var l,o;if(Array.prototype.forEach)return e.forEach(t,r);for(l=0,o=e.length;l<o;l++)t.call(r,e[l],l,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},e9=e7.FilterCSS,te=e7.getDefaultWhiteList;function tt(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var tr=new e9;function tl(e){return e.replace(to,"&lt;").replace(tn,"&gt;")}var to=/</g,tn=/>/g,ti=/"/g,ta=/&quot;/g,ts=/&#([a-zA-Z0-9]*);?/gim,tc=/&colon;?/gim,td=/&newline;?/gim,tu=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,tm=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,tp=/u\s*r\s*l\s*\(.*/gi;function th(e){return e.replace(ti,"&quot;")}function tf(e){return e.replace(ta,'"')}function tg(e){return e.replace(ts,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function tb(e){return e.replace(tc,":").replace(td," ")}function tv(e){for(var t="",r=0,l=e.length;r<l;r++)t+=32>e.charCodeAt(r)?" ":e.charAt(r);return e8.trim(t)}function tx(e){return e=tv(e=tb(e=tg(e=tf(e))))}function tk(e){return e=tl(e=th(e))}eY.whiteList=tt(),eY.getDefaultWhiteList=tt,eY.onTag=function(e,t,r){},eY.onIgnoreTag=function(e,t,r){},eY.onTagAttr=function(e,t,r){},eY.onIgnoreTagAttr=function(e,t,r){},eY.safeAttrValue=function(e,t,r,l){if(r=tx(r),"href"===t||"src"===t){if("#"===(r=e8.trim(r)))return"#";if(!("http://"===r.substr(0,7)||"https://"===r.substr(0,8)||"mailto:"===r.substr(0,7)||"tel:"===r.substr(0,4)||"data:image/"===r.substr(0,11)||"ftp://"===r.substr(0,6)||"./"===r.substr(0,2)||"../"===r.substr(0,3)||"#"===r[0]||"/"===r[0]))return""}else if("background"===t){if(tu.lastIndex=0,tu.test(r))return""}else if("style"===t){if(tm.lastIndex=0,tm.test(r)||(tp.lastIndex=0,tp.test(r)&&(tu.lastIndex=0,tu.test(r))))return"";!1!==l&&(r=(l=l||tr).process(r))}return r=tk(r)},eY.escapeHtml=tl,eY.escapeQuote=th,eY.unescapeQuote=tf,eY.escapeHtmlEntities=tg,eY.escapeDangerHtml5Entities=tb,eY.clearNonPrintableCharacter=tv,eY.friendlyAttrValue=tx,eY.escapeAttrValue=tk,eY.onIgnoreTagStripAll=function(){return""},eY.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),l=[],o=!1;return{onIgnoreTag:function(n,i,a){if(s=n,!r&&-1===e8.indexOf(e,s))return t(n,i,a);if(!a.isClosing)return o||(o=a.position),"[removed]";var s,c="[/removed]",d=a.position+c.length;return l.push([!1!==o?o:a.position,d]),o=!1,c},remove:function(e){var t="",r=0;return e8.forEach(l,function(l){t+=e.slice(r,l[0]),r=l[1]}),t+=e.slice(r)}}},eY.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var l=e.indexOf("\x3c!--",r);if(-1===l){t+=e.slice(r);break}t+=e.slice(r,l);var o=e.indexOf("--\x3e",l);if(-1===o)break;r=o+3}return t},eY.stripBlankChar=function(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||10===t||13===t)})).join("")},eY.attributeWrapSign='"',eY.cssFilter=tr,eY.getDefaultCSSWhiteList=te;var tj={},tw=/[^a-zA-Z0-9\\_:.-]/gim;function ty(e){var t;return'"'===(t=e)[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]?e.substr(1,e.length-2):e}tj.parseTag=function(e,t,r){var l="",o=0,n=!1,i=!1,a=0,s=e.length,c="",d="";e:for(a=0;a<s;a++){var u=e.charAt(a);if(!1===n){if("<"===u){n=a;continue}}else if(!1===i){if("<"===u){l+=r(e.slice(o,a)),n=a,o=a;continue}if(">"===u||a===s-1){l+=r(e.slice(o,n)),c=function(e){var t,r=e8.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=e8.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}(d=e.slice(n,a+1)),l+=t(n,l.length,c,d,"</"===d.slice(0,2)),o=a+1,n=!1;continue}if('"'===u||"'"===u)for(var m=1,p=e.charAt(a-m);""===p.trim()||"="===p;){if("="===p){i=u;continue e}p=e.charAt(a-++m)}}else if(u===i){i=!1;continue}}return o<s&&(l+=r(e.substr(o))),l},tj.parseAttr=function(e,t){var r=0,l=0,o=[],n=!1,i=e.length;function a(e,r){if(!((e=(e=e8.trim(e)).replace(tw,"").toLowerCase()).length<1)){var l=t(e,r||"");l&&o.push(l)}}for(var s=0;s<i;s++){var c,d,u=e.charAt(s);if(!1===n&&"="===u){n=e.slice(r,s),r=s+1,l='"'===e.charAt(r)||"'"===e.charAt(r)?r:function(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}(e,s+1);continue}if(!1!==n&&s===l){if(-1===(d=e.indexOf(u,s+1)))break;a(n,c=e8.trim(e.slice(l+1,d))),n=!1,r=(s=d)+1;continue}if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===n){if(-1===(d=function(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}(e,s))){a(c=e8.trim(e.slice(r,s))),n=!1,r=s+1;continue}else{s=d-1;continue}}else{if(-1!==(d=function(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}(e,s-1)))continue;a(n,c=ty(c=e8.trim(e.slice(r,s)))),n=!1,r=s+1;continue}}}return r<e.length&&(!1===n?a(e.slice(r)):a(n,ty(e8.trim(e.slice(r))))),e8.trim(o.join(" "))};var t$=e7.FilterCSS,tC=tj.parseTag,tT=tj.parseAttr;function tE(e){return null==e}function tN(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=eY.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(e){return e.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=eY.whiteList,this.attributeWrapSign=!0===e.singleQuotedAttributeValue?"'":eY.attributeWrapSign,e.onTag=e.onTag||eY.onTag,e.onTagAttr=e.onTagAttr||eY.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||eY.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||eY.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||eY.safeAttrValue,e.escapeHtml=e.escapeHtml||eY.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new t$(e.css))}tN.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,l=t.onTag,o=t.onIgnoreTag,n=t.onTagAttr,i=t.onIgnoreTagAttr,a=t.safeAttrValue,s=t.escapeHtml,c=this.attributeWrapSign,d=this.cssFilter;t.stripBlankChar&&(e=eY.stripBlankChar(e)),t.allowCommentTag||(e=eY.stripCommentTag(e));var u=!1;t.stripIgnoreTagBody&&(o=(u=eY.StripTagBody(t.stripIgnoreTagBody,o)).onIgnoreTag);var m=tC(e,function(e,t,u,m,p){var h={sourcePosition:e,position:t,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(r,u)},f=l(u,m,h);if(null!=f)return f;if(h.isWhite){if(h.isClosing)return"</"+u+">";var g=function(e){var t=e8.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=e8.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=e8.trim(e.slice(0,-1))),{html:e,closing:r}}(m),b=r[u],v=tT(g.html,function(e,t){var r=-1!==e8.indexOf(b,e),l=n(u,e,t,r);return null==l?r?(t=a(u,e,t,d))?e+"="+c+t+c:e:null==(l=i(u,e,t,r))?void 0:l:l});return m="<"+u,v&&(m+=" "+v),g.closing&&(m+=" /"),m+=">"}return null==(f=o(u,m,h))?s(m):f},s);return u&&(m=u.remove(m)),m};!function(e,t){function r(e,t){return new tN(t).process(e)}(t=e.exports=r).filterXSS=r,t.FilterXSS=tN,function(){for(var e in eY)t[e]=eY[e];for(var r in tj)t[r]=tj[r]}(),"u">typeof window&&(window.filterXSS=e.exports);"u">typeof self&&"u">typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(eZ,eZ.exports);var tI=eZ.exports;let tS=function(e,t){for(var r=0;r<t.length;r++){let l=t[r];if("string"!=typeof l&&!Array.isArray(l)){for(let t in l)if("default"!==t&&!(t in e)){let r=Object.getOwnPropertyDescriptor(l,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>l[t]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}({__proto__:null,default:(l=tI)&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l},[tI]),tL={img:["class"],input:["class","disabled","type","checked"],iframe:["class","width","height","src","title","border","frameborder","framespacing","allow","allowfullscreen"]},tA=(e,t)=>{let r;let{extendedWhiteList:l={},xss:o={}}=t;if("function"==typeof o)r=new tI.FilterXSS(o(tS));else{let e=tI.getDefaultWhiteList();[...Object.keys(l),...Object.keys(tL)].forEach(t=>{let r=e[t]||[],o=tL[t]||[],n=l[t]||[];e[t]=[...new Set([...r,...o,...n])]}),r=new tI.FilterXSS({whiteList:e,...o})}e.core.ruler.after("linkify","xss",e=>{for(let t=0;t<e.tokens.length;t++){let l=e.tokens[t];switch(l.type){case"html_block":l.content=r.process(l.content);break;case"inline":(l.children||[]).forEach(e=>{"html_inline"===e.type&&(e.content=r.process(e.content))})}}})},tM=(e,t,r)=>{let l=e.attrIndex(t),o=[t,r];l<0?e.attrPush(o):(e.attrs=e.attrs||[],e.attrs[l]=o)},tR=e=>"inline"===e.type,tH=e=>"paragraph_open"===e.type,tF=e=>"list_item_open"===e.type,tO=e=>0===e.content.indexOf("[ ] ")||0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "),tP=(e,t)=>tR(e[t])&&tH(e[t-1])&&tF(e[t-2])&&tO(e[t]),tJ=(e,t)=>{let r=e[t].level-1;for(let l=t-1;l>=0;l--)if(e[l].level===r)return l;return -1},tD=e=>{let t=new e("html_inline","",0);return t.content="<label>",t},t_=e=>{let t=new e("html_inline","",0);return t.content="</label>",t},tV=(e,t,r)=>{let l=new r("html_inline","",0);return l.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",l.attrs=[{for:t}],l},tz=(e,t,r)=>{let l=new t("html_inline","",0),o=r.enabled?" ":' disabled="" ';return 0===e.content.indexOf("[ ] ")?l.content='<input class="task-list-item-checkbox"'+o+'type="checkbox">':(0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))&&(l.content='<input class="task-list-item-checkbox" checked=""'+o+'type="checkbox">'),l},tB=(e,t,r)=>{if(e.children=e.children||[],e.children.unshift(tz(e,t,r)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),r.label){if(r.labelAfter){e.children.pop();let r="task-item-"+Math.ceil(1e4*1e3*Math.random()-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+r+'">',e.children.push(tV(e.content,r,t))}else e.children.unshift(tD(t)),e.children.push(t_(t))}},tW=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",e=>{let r=e.tokens;for(let l=2;l<r.length;l++)tP(r,l)&&(tB(r[l],e.Token,t),tM(r[l-2],"class","task-list-item"+(t.enabled?" enabled":" ")),tM(r[tJ(r,l-2)],"class","contains-task-list"))})},tq=e=>{e.core.ruler.push("init-line-number",e=>(e.tokens.forEach(e=>{e.map&&(e.attrs||(e.attrs=[]),e.attrs.push(["data-line",e.map[0].toString()]))}),!0))},tK=(e,t)=>{let{modelValue:r,sanitize:l,mdHeadingId:o,codeFoldable:c,autoFoldThreshold:d,noKatex:u,noMermaid:m,noHighlight:p,setting:h,onHtmlChanged:f,onGetCatalog:g}=e,{editorConfig:b,markdownItConfig:v,markdownItPlugins:x}=a.h,{editorId:$,language:C,showCodeRowNumber:T,theme:E,usedLanguageText:N,customIcon:I,rootRef:S}=(0,n.useContext)(t5),L=(0,n.useRef)([]),A=(0,n.useRef)(E);(0,n.useEffect)(()=>{A.current=E},[E]);let R=(0,n.useRef)(N);(0,n.useEffect)(()=>{R.current=N},[N]);let H=(0,n.useRef)(I);(0,n.useEffect)(()=>{H.current=I},[I]);let{hljsRef:F,hljsInited:O}=eP(e),{katexRef:P,katexInited:J}=e_(e),{reRender:D,replaceMermaid:_}=eD(e),[V]=(0,n.useState)(()=>{let e=(0,k.Z)({html:!0,breaks:!0,linkify:!0});v(e,{editorId:$});let t=[{type:"image",plugin:j.Z,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:eK,options:{}},{type:"taskList",plugin:tW,options:{}},{type:"heading",plugin:eU,options:{mdHeadingId:o,headsRef:L}},{type:"code",plugin:eG,options:{editorId:$,usedLanguageTextRef:R,codeFoldable:c,autoFoldThreshold:d,customIconRef:H}},{type:"xss",plugin:tA,options:{}},{type:"sub",plugin:w.Z,options:{}},{type:"sup",plugin:y.Z,options:{}}];u||t.push({type:"katex",plugin:eq,options:{katexRef:P}}),m||t.push({type:"mermaid",plugin:eV,options:{themeRef:A}}),x(t,{editorId:$}).forEach(t=>{e.use(t.plugin,t.options)});let r=e.options.highlight;return e.set({highlight:(e,t,l)=>{let o;if(r){let o=r(e,t,l);if(o)return o}o=!p&&F.current?F.current.getLanguage(t)?F.current.highlight(e,{language:t,ignoreIllegals:!0}).value:F.current.highlightAuto(e).value:V.utils.escapeHtml(e);let n=T?(0,i.p)(o.replace(/^\n+|\n+$/g,""),e.replace(/^\n+|\n+$/g,"")):`<span class="${a.p}-code-block">${o.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${t}" language=${t}>${n}</code></pre>`}}),tq(e),e}),[z,B]=(0,n.useState)(`_article-key_${(0,s.kb)()}`),[W,q]=(0,n.useState)(()=>l(V.render(r))),K=(0,n.useMemo)(()=>(p||O)&&(u||J),[O,J,p,u]),U=(0,n.useRef)(!0),X=(0,n.useCallback)(()=>{L.current=[],q(l(V.render(r)))},[V,r,l]);return(0,n.useEffect)(()=>{i.b.emit($,i.B,W),null==f||f(W),null==g||g(L.current),i.b.emit($,i.q,L.current)},[$,W,z,g,f]),(0,n.useEffect)(()=>{h.preview&&(_().then(()=>{M(null==S?void 0:S.current.querySelectorAll(`#${$} .${a.p}-mermaid`))}),i.b.emit($,i.q,L.current))},[$,_,S,h.preview]),(0,n.useEffect)(()=>{if(U.current){U.current=!1;return}let e=setTimeout(()=>{X()},t?0:b.renderDelay);return()=>{clearTimeout(e)}},[K,E,X,C,t,b.renderDelay]),(0,n.useEffect)(()=>{_().then(()=>{M(null==S?void 0:S.current.querySelectorAll(`#${$} .${a.p}-mermaid`))})},[$,W,z,D,_,S]),(0,n.useEffect)(()=>{let e=()=>{i.b.emit($,i.q,L.current)};return i.b.on($,{name:i.r,callback:e}),()=>{i.b.remove($,i.r,e)}},[$]),(0,n.useEffect)(()=>{let e=()=>{B(`_article-key_${(0,s.kb)()}`),X()};return i.b.on($,{name:i.R,callback:e}),()=>{i.b.remove($,i.R,e)}},[$,X]),{html:W,key:z}},tU=(e,t,r)=>{let[l,o]=(0,n.useState)({width:e.inputBoxWitdh}),[i,s]=(0,n.useState)({left:e.inputBoxWitdh}),[c,d]=(0,n.useState)(e.setting.preview||e.setting.htmlPreview),u=(0,n.useRef)(e.inputBoxWitdh);return(0,n.useEffect)(()=>{var l,n,i,c;let d=(null==(l=t.current)?void 0:l.offsetWidth)||0,m=(null==(n=t.current)?void 0:n.getBoundingClientRect().x)||0,p=t=>{var r;let l=t.x-m;l<a.M?l=a.M:l>d-a.M&&(l=d-a.M);let n=`${l}px`;o(e=>({...e,width:n})),s(e=>({...e,left:n})),u.current=n,null==(r=e.onInputBoxWitdhChange)||r.call(e,n)},h=()=>{s(e=>({...e})),document.addEventListener("mousemove",p)},f=()=>{s(e=>({...e})),document.removeEventListener("mousemove",p)};return null==(i=r.current)||i.addEventListener("mousedown",h),null==(c=r.current)||c.addEventListener("mouseup",f),()=>{var e,t;null==(e=r.current)||e.removeEventListener("mousedown",h),null==(t=r.current)||t.removeEventListener("mouseup",f)}},[t,e,r]),(0,n.useEffect)(()=>{e.inputBoxWitdh&&(u.current=e.inputBoxWitdh,o(t=>({...t,width:e.inputBoxWitdh})),s(t=>({...t,left:e.inputBoxWitdh})))},[e.inputBoxWitdh]),(0,n.useEffect)(()=>{let t=e.setting.previewOnly,r="",l="",n=!1;t?(r="0%",l="none",n=!0):e.setting.htmlPreview||e.setting.preview?(r=u.current,l="initial",n=!0):(r="100%",l="none",n=!1),d(n),o(e=>({...e,width:r})),s(e=>({...e,display:l}))},[e.setting.htmlPreview,e.setting.preview,e.setting.previewOnly]),{inputWrapperStyle:l,resizeOperateStyle:i,showPreviewWrapper:c}},tX={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},tG=(e,t)=>{let{editorId:r,rootRef:l}=(0,n.useContext)(t5);(0,n.useEffect)(()=>{var t;let o=(null==(t=l.current)?void 0:t.querySelectorAll(".task-list-item.enabled"))||[],n=t=>{var l;t.preventDefault();let o=t.target.checked?"unChecked":"checked",n=null==(l=t.target.parentElement)?void 0:l.dataset.line;if(!n)return;let a=Number(n),s=e.modelValue.split(`
`),c=s[Number(a)].replace(tX[o].regexp,tX[o].value);e.previewOnly?(s[Number(a)]=c,e.onChange(s.join(`
`))):i.b.emit(r,i.T,a+1,c)};return o.forEach(e=>{e.addEventListener("click",n)}),()=>{o.forEach(e=>{e.removeEventListener("click",n)})}},[r,t,e,l])},tZ=e=>{let{previewOnly:t=!1}=e,{editorId:r,previewTheme:l,showCodeRowNumber:s}=(0,n.useContext)(t5),{html:c,key:d}=tK(e,!!t);eO(e,c,d),eF(e,c),tG(e,c);let u=(0,n.useMemo)(()=>o.j.jsx("div",{id:`${r}-preview`,className:(0,i.c)([`${a.p}-preview`,`${l}-theme`,s&&`${a.p}-scrn`]),dangerouslySetInnerHTML:{__html:c}},d),[r,c,d,l,s]);return o.j.jsxs(o.j.Fragment,{children:[e.setting.preview&&o.j.jsx("div",{id:`${r}-preview-wrapper`,className:`${a.p}-preview-wrapper`,children:u},"content-preview-wrapper"),!t&&e.setting.htmlPreview&&o.j.jsx("div",{id:`${r}-html-wrapper`,className:`${a.p}-preview-wrapper`,children:o.j.jsx("div",{className:`${a.p}-html`,children:c})},"html-preview-wrapper")]})},tY=(0,n.forwardRef)((e,t)=>{let{onHtmlChanged:r}=e,{editorId:l}=(0,n.useContext)(t5),[s,c]=(0,n.useState)(""),d=(0,n.useRef)(null),u=(0,n.useRef)(null),m=(0,n.useCallback)(e=>{c(e),null==r||r(e)},[r]),{inputWrapperRef:p,codeMirrorUt:h,resetHistory:f}=eH(e),{inputWrapperStyle:g,resizeOperateStyle:b,showPreviewWrapper:v}=tU(e,d,u);return ei(e,s,h),(0,n.useImperativeHandle)(t,()=>({getSelectedText(){var e;return null==(e=h.current)?void 0:e.getSelectedText()},focus(e){var t;null==(t=h.current)||t.focus(e)},resetHistory:f,getEditorView(){var e;return null==(e=h.current)?void 0:e.view}}),[h,f]),o.j.jsxs("div",{className:`${a.p}-content${v?" has-preview":""}`,ref:d,children:[o.j.jsx("div",{className:`${a.p}-input-wrapper`,style:g,ref:p}),(e.setting.htmlPreview||e.setting.preview)&&o.j.jsx("div",{className:`${a.p}-resize-operate`,style:b,ref:u}),v&&o.j.jsx(tZ,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:m,onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},"display-editor"),e.catalogVisible&&o.j.jsx(i.M,{theme:e.theme,className:`${a.p}-catalog-editor`,editorId:l,mdHeadingId:e.mdHeadingId,scrollElementOffsetTop:2},"internal-catalog")]})}),tQ=n.memo(tY),t0=({modelValue:e})=>{let{usedLanguageText:t}=(0,n.useContext)(t5);return(0,n.useMemo)(()=>{var r;return o.j.jsxs("div",{className:`${a.p}-footer-item`,children:[o.j.jsx("label",{className:`${a.p}-footer-label`,children:`${null==(r=t.footer)?void 0:r.markdownTotal}:`}),o.j.jsx("span",{children:e.length||0})]})},[t,e])},t1=e=>o.j.jsx("div",{className:(0,i.c)([`${a.p}-checkbox`,e.checked&&`${a.p}-checkbox-checked`]),onClick:()=>{e.onChange(!e.checked)}}),t2=e=>{var t;let{usedLanguageText:r}=(0,n.useContext)(t5);return(0,n.useMemo)(()=>{var t;return o.j.jsxs("div",{className:`${a.p}-footer-item`,children:[o.j.jsx("label",{className:`${a.p}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)},children:null==(t=r.footer)?void 0:t.scrollAuto}),o.j.jsx(t1,{checked:e.scrollAuto,onChange:e.onScrollAutoChange})]})},[null==(t=r.footer)?void 0:t.scrollAuto,e])},t6=n.memo(e=>{let t=(0,n.useCallback)(t=>{if(!a.d.includes(t))return e.defFooters[t]||"";switch(t){case"markdownTotal":return o.j.jsx(t0,{modelValue:e.modelValue},"markdown-total");case"scrollSwitch":return!e.noScrollAuto&&o.j.jsx(t2,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},"scroll-auto")}},[e.modelValue,e.noScrollAuto,e.scrollAuto,e.onScrollAutoChange,e.defFooters]),[r,l]=(0,n.useMemo)(()=>{let r=e.footers.indexOf("="),l=-1===r?e.footers:e.footers.slice(0,r),o=-1===r?[]:e.footers.slice(r,Number.MAX_SAFE_INTEGER);return[l.map(e=>t(e)),o.map(e=>t(e))]},[e.footers,t]);return o.j.jsxs("div",{className:`${a.p}-footer`,children:[o.j.jsx("div",{className:`${a.p}-footer-left`,children:r}),o.j.jsx("div",{className:`${a.p}-footer-right`,children:l})]})}),t5=(0,n.createContext)({editorId:"",tabWidth:2,theme:"light",language:"zh-CN",highlight:{css:"",js:""},showCodeRowNumber:!1,usedLanguageText:a.s["zh-CN"],previewTheme:"default",customIcon:{},rootRef:null}),t3=(0,n.forwardRef)((e,t)=>{let{modelValue:r=a.f.modelValue,theme:l=a.f.theme,className:s=a.f.className,toolbars:c=a.f.toolbars,toolbarsExclude:d=a.f.toolbarsExclude,defToolbars:u=a.f.defToolbars,tabWidth:m=a.f.tabWidth,showCodeRowNumber:p=a.f.showCodeRowNumber,previewTheme:h=a.f.previewTheme,noPrettier:f=a.f.noPrettier,tableShape:g=a.f.tableShape,noMermaid:b=a.f.noMermaid,noKatex:v=a.f.noKatex,placeholder:x=a.f.placeholder,onChange:k=a.f.onChange,onHtmlChanged:j=a.f.onHtmlChanged,onGetCatalog:w=a.f.onGetCatalog,sanitize:y=a.f.sanitize,onError:$=a.f.onError,mdHeadingId:C=a.f.mdHeadingId,footers:T=a.f.footers,defFooters:E=a.f.defFooters,noIconfont:N=a.f.noIconfont,noUploadImg:I=a.f.noUploadImg,noHighlight:S=a.f.noHighlight,noImgZoomIn:L=a.f.noImgZoomIn,language:A=a.f.language,inputBoxWitdh:M=a.f.inputBoxWitdh,sanitizeMermaid:F=a.f.sanitizeMermaid,transformImgUrl:D=a.f.transformImgUrl,codeFoldable:z=a.f.codeFoldable,autoFoldThreshold:B=a.f.autoFoldThreshold}=e,[W]=(0,n.useState)(()=>({editorId:e.editorId||(0,i.g)(a.g+"_"),noKatex:v,noMermaid:b,noPrettier:f,noUploadImg:I,noIconfont:N,noHighlight:S})),[q,K]=(0,n.useState)(()=>({scrollAuto:void 0===e.scrollAuto||e.scrollAuto})),U=(0,n.useRef)(null),X=(0,n.useRef)(),G=(0,n.useCallback)(e=>{K(t=>({...t,scrollAuto:e}))},[K]);R(e,W),H(W),P(e,W),O(W.editorId,$);let Z=J(e,W),[Y,Q,ee,et]=_(e);return V(t,W,Z,ee,et,X),(0,n.useEffect)(()=>()=>{i.b.clear(W.editorId)},[W.editorId]),o.j.jsx(t5.Provider,{value:{editorId:W.editorId,tabWidth:m,theme:l,language:A,highlight:Y,showCodeRowNumber:p,usedLanguageText:Q,previewTheme:h,customIcon:e.customIcon||{},rootRef:U},children:o.j.jsxs("div",{id:W.editorId,className:(0,i.c)([a.p,!!s&&s,"dark"===l&&`${a.p}-dark`,(ee.fullscreen||ee.pageFullscreen)&&`${a.p}-fullscreen`]),style:e.style,ref:U,children:[c.length>0&&o.j.jsx(en,{noPrettier:W.noPrettier,toolbars:c,toolbarsExclude:d,setting:ee,updateSetting:et,tableShape:g,defToolbars:u,noUploadImg:W.noUploadImg,showToolbarName:e.showToolbarName,catalogVisible:Z}),o.j.jsx(tQ,{ref:X,modelValue:r,onChange:k,setting:ee,mdHeadingId:C,onHtmlChanged:j,onGetCatalog:w,sanitize:y,noMermaid:W.noMermaid,noPrettier:W.noPrettier,noHighlight:W.noHighlight,placeholder:x,noKatex:W.noKatex,scrollAuto:q.scrollAuto,formatCopiedText:e.formatCopiedText,autoFocus:e.autoFocus,disabled:e.disabled,readOnly:e.readOnly,maxLength:e.maxLength,autoDetectCode:e.autoDetectCode,onBlur:e.onBlur,onFocus:e.onFocus,onInput:e.onInput,completions:e.completions,catalogVisible:Z,theme:e.theme,noImgZoomIn:L,onDrop:e.onDrop,inputBoxWitdh:M,onInputBoxWitdhChange:e.onInputBoxWitdhChange,sanitizeMermaid:F,transformImgUrl:D,codeFoldable:z,autoFoldThreshold:B}),T.length>0&&o.j.jsx(t6,{modelValue:r,footers:T,defFooters:E,noScrollAuto:!ee.preview&&!ee.htmlPreview||ee.previewOnly,scrollAuto:q.scrollAuto,onScrollAutoChange:G})]})})})},23062:function(e,t,r){r.d(t,{M:function(){return v},b:function(){return d},d:function(){return u},f:function(){return g},g:function(){return o},h:function(){return b},j:function(){return f},p:function(){return l},s:function(){return m}}),r(69199);let l="md-editor",o="md-editor-rt",n="https://cdnjs.cloudflare.com/ajax/libs",i=`${n}/highlight.js/11.10.0/highlight.min.js`,a={main:`${n}/prettier/2.8.0/standalone.js`,markdown:`${n}/prettier/2.8.0/parser-markdown.js`},s={css:`${n}/cropperjs/1.5.13/cropper.min.css`,js:`${n}/cropperjs/1.5.13/cropper.min.js`},c=`${n}/screenfull.js/5.2.0/screenfull.min.js`,d=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],u=["markdownTotal","=","scrollSwitch"],m={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},p=`${n}/mermaid/10.6.1/mermaid.esm.min.mjs`,h={js:`${n}/KaTeX/0.16.9/katex.min.js`,css:`${n}/KaTeX/0.16.9/katex.min.css`},f={a11y:{light:`${n}/highlight.js/11.10.0/styles/a11y-light.min.css`,dark:`${n}/highlight.js/11.10.0/styles/a11y-dark.min.css`},atom:{light:`${n}/highlight.js/11.10.0/styles/atom-one-light.min.css`,dark:`${n}/highlight.js/11.10.0/styles/atom-one-dark.min.css`},github:{light:`${n}/highlight.js/11.10.0/styles/github.min.css`,dark:`${n}/highlight.js/11.10.0/styles/github-dark.min.css`},gradient:{light:`${n}/highlight.js/11.10.0/styles/gradient-light.min.css`,dark:`${n}/highlight.js/11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${n}/highlight.js/11.10.0/styles/kimbie-light.min.css`,dark:`${n}/highlight.js/11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${n}/highlight.js/11.10.0/styles/paraiso-light.min.css`,dark:`${n}/highlight.js/11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${n}/highlight.js/11.10.0/styles/qtcreator-light.min.css`,dark:`${n}/highlight.js/11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${n}/highlight.js/11.10.0/styles/stackoverflow-light.min.css`,dark:`${n}/highlight.js/11.10.0/styles/stackoverflow-dark.min.css`}},g={modelValue:"",theme:"light",className:"",onChange:()=>{},onSave:()=>{},pageFullscreen:!1,preview:!0,htmlPreview:!1,language:"zh-CN",toolbars:d,toolbarsExclude:[],noPrettier:!1,onHtmlChanged:()=>{},onGetCatalog:()=>{},tabWidth:2,showCodeRowNumber:!0,previewTheme:"default",mdHeadingId:e=>e,style:{},tableShape:[6,4],noMermaid:!1,sanitize:e=>e,placeholder:"",noKatex:!1,defToolbars:[],onError:()=>{},codeTheme:"atom",footers:u,scrollAuto:!0,defFooters:[],noIconfont:!1,formatCopiedText:e=>e,noUploadImg:!1,codeStyleReverse:!0,codeStyleReverseList:["default","mk-cute"],autoFocus:!1,disabled:!1,readOnly:!1,autoDetectCode:!1,noHighlight:!1,noImgZoomIn:!1,inputBoxWitdh:"50%",sanitizeMermaid:e=>Promise.resolve(e),transformImgUrl:e=>e,codeFoldable:!0,autoFoldThreshold:30},b={editorExtensions:{highlight:{js:i,css:f},prettier:{standaloneJs:a.main,parserMarkdownJs:a.markdown},cropper:{...s},iconfont:"https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.js",iconfontClass:"https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.css",screenfull:{js:c},mermaid:{js:p},katex:{...h}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,iconfontType:"svg",mermaidConfig:e=>e,katexConfig:e=>e},v=170},81282:function(e,t,r){let l,o;r.d(t,{B:function(){return w},C:function(){return h},E:function(){return y},F:function(){return b},H:function(){return k},M:function(){return q},O:function(){return p},P:function(){return g},R:function(){return L},T:function(){return M},U:function(){return C},a:function(){return v},b:function(){return m},c:function(){return F},d:function(){return x},e:function(){return j},f:function(){return f},g:function(){return P},h:function(){return $},i:function(){return A},j:function(){return J},k:function(){return R},l:function(){return T},m:function(){return N},n:function(){return E},o:function(){return V},p:function(){return H},q:function(){return I},r:function(){return S},s:function(){return z}});var n=r(28771),i=r(67294),a=r(23062),s=r(69199),c=Object.defineProperty,d=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t,r)=>d(e,"symbol"!=typeof t?t+"":t,r);let m=new class e{constructor(){u(this,"pools",{})}remove(e,t,r){let l=this.pools[e]&&this.pools[e][t];l&&(this.pools[e][t]=l.filter(e=>e!==r))}clear(e){this.pools[e]={}}on(e,t){return this.pools[e]||(this.pools[e]={}),this.pools[e][t.name]||(this.pools[e][t.name]=[]),this.pools[e][t.name].push(t.callback),this.pools[e][t.name].includes(t.callback)}emit(e,t,...r){this.pools[e]||(this.pools[e]={});let l=this.pools[e][t];l&&l.forEach(e=>{try{e(...r)}catch(e){console.error(`${t} monitor event exception！`,e)}})}},p="onSave",h="changeCatalogVisible",f="changeFullscreen",g="pageFullscreenChanged",b="fullscreenChanged",v="previewChanged",x="previewOnlyChanged",k="htmlPreviewChanged",j="catalogVisibleChanged",w="buildFinished",y="errorCatcher",$="replace",C="uploadImage",T="openModals",E="ctrlZ",N="ctrlShiftZ",I="catalogChanged",S="pushCatalog",L="rerender",A="eventListener",M="taskStateChanged",R=(e,t="image.png")=>{let r=e.split(","),l=r[0].match(/:(.*?);/);if(l){let e=l[1],o=atob(r[1]),n=o.length,i=new Uint8Array(n);for(;n--;)i[n]=o.charCodeAt(n);return new File([i],t,{type:e})}return null},H=(e,t)=>{if(!e)return e;let r=t.split(`
`),l=['<span rn-wrapper aria-hidden="true">'];return r.forEach(()=>{l.push("<span></span>")}),l.push("</span>"),`<span class="${a.p}-code-block">${e}</span>${l.join("")}`},F=e=>e.filter(e=>!1!==e).join(" "),O=(e,t)=>{if(!e||!t)return 0;let r=null==e?void 0:e.getBoundingClientRect();if(t===document.documentElement)return r.top-t.clientTop;let l=null==t?void 0:t.getBoundingClientRect();return r.top-l.top},P=(l=0,e=>e+ ++l),J=(o=0,()=>++o),D=`.${a.p}-preview > [data-line]`,_=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),V=(e,t)=>{let r=(0,s.Ds)(()=>{e.removeEventListener("scroll",l),e.addEventListener("scroll",l),t.removeEventListener("scroll",l),t.addEventListener("scroll",l)},50),l=o=>{let n=e.clientHeight,i=t.clientHeight,a=e.scrollHeight,s=(a-n)/(t.scrollHeight-i);o.target===e?(t.removeEventListener("scroll",l),t.scrollTo({top:e.scrollTop/s})):(e.removeEventListener("scroll",l),e.scrollTo({top:t.scrollTop*s})),r()};return[()=>{r().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",l),t.removeEventListener("scroll",l)}]},z=(e,t,r)=>{let{view:l}=r,o=(0,s.qA)(),n=e=>l.lineBlockAt(l.state.doc.line(e+1).from).top,i=e=>l.lineBlockAt(l.state.doc.line(e+1).from).bottom,a=[],c=[],d=[],u=()=>{a=[];let e=[...d=(c=Array.from(t.querySelectorAll(D))).map(e=>Number(e.dataset.line))],{lines:r}=l.state.doc,o=e.shift()||0,n=e.shift()||r;for(let t=0;t<r;t++)t===n&&(o=t,n=e.shift()||r),a.push({start:o,end:n-1})},m=(e,t)=>{let r=1;for(let e=c.length-1;e-1>=0;e--){let l=c[e],o=c[e-1];if(l.offsetTop+l.offsetHeight>t&&o.offsetTop<t){r=Number(o.dataset.line);break}}for(let t=a.length-1;t>=0;t--){let l=i(a[t].end),o=n(a[t].start);if(l>e&&o<=e){r=r<a[t].start?r:a[t].start;break}}return r},p=0,h=0,f=()=>{var e,r,s;if(0!==h)return!1;p++;let{scrollDOM:c,contentHeight:d}=l,u=_(t,"padding-top"),f=l.lineBlockAtHeight(c.scrollTop),{number:g}=l.state.doc.lineAt(f.from),b=a[g-1];if(!b)return!1;let v=1,x=t.querySelector(`[data-line="${b.start}"]`)||(null==(e=t.firstElementChild)?void 0:e.firstElementChild),k=t.querySelector(`[data-line="${b.end+1}"]`)||(null==(r=t.lastElementChild)?void 0:r.lastElementChild),j=c.scrollHeight-c.clientHeight,w=t.scrollHeight-t.clientHeight,y=n(b.start),$=i(b.end),C=x.offsetTop,T=k.offsetTop-C;0===y&&(C=0,x===k?(u=0,$=d-c.offsetHeight,T=w):T=k.offsetTop),v=(c.scrollTop-y)/($-y);let E=k==(null==(s=t.lastElementChild)?void 0:s.lastElementChild)?k.offsetTop+k.clientHeight:k.offsetTop;if($>=j||E>w){let e=m(j,w);y=n(e),v=(c.scrollTop-y)/(j-y);let r=t.querySelector(`[data-line="${e}"]`);y>0&&r&&(C=r.offsetTop),T=w-C+_(t,"padding-top")}o(t,C-u+T*v,()=>{p--})},g=()=>{var r,i,s,u,f,g;if(0!==p)return;h++;let{scrollDOM:b}=l,v=t.scrollTop,x=t.scrollHeight,k=b.scrollHeight-b.clientHeight,j=t.scrollHeight-t.clientHeight,w=null==(r=t.firstElementChild)?void 0:r.firstElementChild,y=null==(i=t.firstElementChild)?void 0:i.lastElementChild;if(d.length>0){let e=Math.ceil(d[d.length-1]*(v/x)),r=d.findLastIndex(t=>t<=e);e=d[r=-1===r?0:r];for(let t=r;t>=0&&t<d.length;)if(c[t].offsetTop>v){if(t-1>=0){t--;continue}e=-1,r=t;break}else{if(t+1<d.length&&c[t+1].offsetTop<v){t++;continue}e=d[t],r=t;break}switch(r){case -1:w=null==(s=t.firstElementChild)?void 0:s.firstElementChild,y=c[r];break;case d.length-1:w=c[r],y=null==(u=t.firstElementChild)?void 0:u.lastElementChild;break;default:w=c[r],y=c[r+1===c.length?r:r+1]}}let $=w===(null==(f=t.firstElementChild)?void 0:f.firstElementChild)?0:w.offsetTop-_(w,"margin-top"),C=y.offsetTop,T=0,{start:E,end:N}=a[Number(w.dataset.line||0)],I=n(E),S=n(N+1===l.state.doc.lines?N:N+1),L=0;if(S>k||y.offsetTop+y.offsetHeight>j){let e=m(k,j),r=t.querySelector(`[data-line="${e}"]`);$=r?r.offsetTop-_(r,"margin-top"):$,I=n(e),T=(v-$)/(j-$),L=k-I}else w===(null==(g=t.firstElementChild)?void 0:g.firstElementChild)?(w===y&&(C=y.offsetTop+y.offsetHeight+ +getComputedStyle(y).marginBottom.replace("px","")),L=S,T=Math.max(v/C,0)):(T=Math.max((v-$)/(C-$),0),L=S-I);o(e,I+L*T,()=>{h--})},b=r=>{var o;let{scrollDOM:n,contentHeight:i}=l;if(i<=n.clientHeight||t.firstElementChild.clientHeight<=t.clientHeight||l.state.doc.lines<=(null==(o=a[a.length-1])?void 0:o.end))return!1;r.target===e?f():g()};return[()=>{u(),e.addEventListener("scroll",b),t.addEventListener("scroll",b),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",b),t.removeEventListener("scroll",b)}]},B=({tocItem:e,mdHeadingId:t,onClick:r,scrollElementOffsetTop:l=0})=>{let{scrollElementRef:o,rootNodeRef:s}=(0,i.useContext)(W);return n.j.jsxs("div",{className:F([`${a.p}-catalog-link`,e.active&&`${a.p}-catalog-active`]),onClick:n=>{r&&r(n,e),n.stopPropagation();let i=t(e.text,e.level,e.index),a=null==s?void 0:s.current.getElementById(i),c=null==o?void 0:o.current;if(a&&c){let e=a.offsetParent,t=a.offsetTop;if(c.contains(e))for(;e&&c!=e;)t+=null==e?void 0:e.offsetTop,e=null==e?void 0:e.offsetParent;let r=a.previousElementSibling,o=0;r||(o=_(a,"margin-top")),null==c||c.scrollTo({top:t-l-o,behavior:"smooth"})}},children:[n.j.jsx("span",{title:e.text,children:e.text}),n.j.jsx("div",{className:`${a.p}-catalog-wrapper`,children:e.children&&e.children.map(e=>n.j.jsx(B,{mdHeadingId:t,tocItem:e,onClick:r,scrollElementOffsetTop:l},`${e.text}-${e.index}`))})]})},W=(0,i.createContext)({scrollElementRef:void 0,rootNodeRef:void 0}),q=i.memo(e=>{let{editorId:t,mdHeadingId:r=a.f.mdHeadingId,theme:l="light",offsetTop:o=20}=e,s=(0,i.useMemo)(()=>`#${t}-preview-wrapper`,[t]),[c,d]=(0,i.useState)([]),[u,p]=(0,i.useState)(),h=(0,i.useRef)(null),f=(0,i.useRef)(),g=(0,i.useRef)(),b=(0,i.useRef)(),v=(0,i.useMemo)(()=>{let e=[];return c.forEach((t,r)=>{let{text:l,level:o}=t,n={level:o,text:l,index:r+1,active:u===t};if(0===e.length)e.push(n);else{let t=e[e.length-1];if(n.level>t.level)for(let e=t.level+1;e<=6;e++){let{children:e}=t;if(!e){t.children=[n];break}if(t=e[e.length-1],n.level<=t.level){e.push(n);break}}else e.push(n)}}),e},[u,c]),[x]=(0,i.useState)(()=>e.scrollElement||`#${t}-preview-wrapper`),k=(0,i.useCallback)(()=>{var t;if(x instanceof HTMLElement)return x;let r=document;return(x===s||e.isScrollElementInShadow)&&(r=null==(t=h.current)?void 0:t.getRootNode()),r.querySelector(x)},[s,e.isScrollElementInShadow,x]);return(0,i.useEffect)(()=>{b.current=h.current.getRootNode()},[]),(0,i.useEffect)(()=>{let e=[],l=t=>{if(0===t.length)return d([]),!1;let{activeHead:l}=t.reduce((e,t,l)=>{var n;let i=null==(n=b.current)?void 0:n.getElementById(r(t.text,t.level,l+1));if(i instanceof HTMLElement){let r=O(i,f.current);if(r<o&&r>e.minTop)return{activeHead:t,minTop:r}}return e},{activeHead:t[0],minTop:Number.MIN_SAFE_INTEGER});p(l),d(t),e=t},n=()=>{l(e)},i=e=>{var t,r;let o=k();f.current=o,g.current=o===document.documentElement?document:o,null==(t=g.current)||t.removeEventListener("scroll",n),l(e),null==(r=g.current)||r.addEventListener("scroll",n)};return m.on(t,{name:I,callback:i}),m.emit(t,S),()=>{var e;m.remove(t,I,i),null==(e=g.current)||e.removeEventListener("scroll",n)}},[o,r,k,t]),(0,i.useEffect)(()=>{e.onActive&&e.onActive(u)},[u,e]),n.j.jsx(W.Provider,{value:{scrollElementRef:f,rootNodeRef:b},children:n.j.jsx("div",{className:F([`${a.p}-catalog`,"dark"===l&&`${a.p}-catalog-dark`,e.className||""]),style:e.style,ref:h,children:v.map(t=>n.j.jsx(B,{mdHeadingId:r,tocItem:t,onClick:e.onClick,scrollElementOffsetTop:e.scrollElementOffsetTop},`${t.text}-${t.index}`))})})})},28771:function(e,t,r){r.d(t,{j:function(){return m}});var l=r(67294),o={exports:{}},n={},i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var l,o={},n=null,a=null;for(l in void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(a=t.ref),t)s.call(t,l)&&!d.hasOwnProperty(l)&&(o[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===o[l]&&(o[l]=t[l]);return{$$typeof:i,type:e,key:n,ref:a,props:o,_owner:c.current}}n.Fragment=a,n.jsx=u,n.jsxs=u,o.exports=n;var m=o.exports}}]);