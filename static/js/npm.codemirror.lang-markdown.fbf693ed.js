"use strict";(self.webpackChunkndzy=self.webpackChunkndzy||[]).push([["1402"],{68551:function(e,t,r){r.r(t),r.d(t,{commonmarkLanguage:function(){return g},deleteMarkupBackward:function(){return y},insertNewlineContinueMarkup:function(){return I},markdown:function(){return T},markdownKeymap:function(){return v},markdownLanguage:function(){return k}});var n=r(59348),o=r(11518),l=r(73015),i=r(83582),f=r(6533),s=r(59155),u=r(31171);let m=(0,l.kU)({commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}}}),a=new u.md,c=f.E2.configure({props:[l.x0.add(e=>!e.is("Block")||e.is("Document")||null!=h(e)||function(e){return"OrderedList"==e.name||"BulletList"==e.name}(e)?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})),a.add(h),l.uj.add({Document:()=>null}),l.pp.add({Document:m})]});function h(e){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return t?+t[1]:void 0}let d=l.rs.of((e,t,r)=>{for(let n=(0,l.qz)(e).resolveInner(r,-1);n&&!(n.from<t);n=n.parent){let e=n.type.prop(a);if(null==e)continue;let t=function(e,t){let r=e;for(;;){let e=r.nextSibling,n;if(!e||null!=(n=h(e.type))&&n<=t)break;r=e}return r.to}(n,e);if(t>r)return{from:r,to:t}}return null});function p(e){return new l.SQ(m,e,[d],"markdown")}let g=p(c),k=p(c.configure([f.z7,f.ar,f.$2,f.dy,{props:[l.x0.add({Table:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})]}]));class x{constructor(e,t,r,n,o,l,i){this.node=e,this.from=t,this.to=r,this.spaceBefore=n,this.spaceAfter=o,this.type=l,this.item=i}blank(e,t=!0){let r=this.spaceBefore+("Blockquote"==this.node.name?">":"");if(null!=e){for(;r.length<e;)r+=" ";return r}for(let e=this.to-this.from-r.length-this.spaceAfter.length;e>0;e--)r+=" ";return r+(t?this.spaceAfter:"")}marker(e,t){let r="OrderedList"==this.node.name?String(+L(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function B(e,t){let r=[];for(let t=e;t&&"Document"!=t.name;t=t.parent)("ListItem"==t.name||"Blockquote"==t.name||"FencedCode"==t.name)&&r.push(t);let n=[];for(let e=r.length-1;e>=0;e--){let o=r[e],l,i=t.lineAt(o.from),f=o.from-i.from;if("FencedCode"==o.name)n.push(new x(o,f,f,"","","",null));else if("Blockquote"==o.name&&(l=/^ *>( ?)/.exec(i.text.slice(f))))n.push(new x(o,f,f+l[0].length,"",l[1],">",null));else if("ListItem"==o.name&&"OrderedList"==o.parent.name&&(l=/^( *)\d+([.)])( *)/.exec(i.text.slice(f)))){let e=l[3],t=l[0].length;e.length>=4&&(e=e.slice(0,e.length-4),t-=4),n.push(new x(o.parent,f,f+t,l[1],e,l[2],o))}else if("ListItem"==o.name&&"BulletList"==o.parent.name&&(l=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(i.text.slice(f)))){let e=l[4],t=l[0].length;e.length>4&&(e=e.slice(0,e.length-4),t-=4);let r=l[2];l[3]&&(r+=l[3].replace(/[xX]/," ")),n.push(new x(o.parent,f,f+t,l[1],e,r,o))}}return n}function L(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function w(e,t,r,n=0){for(let o=-1,l=e;;){if("ListItem"==l.name){let e=L(l,t),i=+e[2];if(o>=0){if(i!=o+1)return;r.push({from:l.from+e[1].length,to:l.from+e[0].length,insert:String(o+2+n)})}o=i}let e=l.nextSibling;if(!e)break;l=e}}function A(e,t){let r=/^[ \t]*/.exec(e)[0].length;if(!r||"	"!=t.facet(l.c))return e;let o=(0,n.IS)(e,4,r),i="";for(let e=o;e>0;)e>=4?(i+="	",e-=4):(i+=" ",e--);return i+e.slice(r)}let I=({state:e,dispatch:t})=>{let r=(0,l.qz)(e),{doc:o}=e,i=null,f=e.changeByRange(t=>{if(!t.empty||!k.isActiveAt(e,t.from))return i={range:t};let l=t.from,f=o.lineAt(l),s=B(r.resolveInner(l,-1),o);for(;s.length&&s[s.length-1].from>l-f.from;)s.pop();if(!s.length)return i={range:t};let u=s[s.length-1];if(u.to-u.spaceAfter.length>l-f.from)return i={range:t};let m=l>=u.to-u.spaceAfter.length&&!/\S/.test(f.text.slice(u.to));if(u.item&&m){let t=u.node.firstChild,r=u.node.getChild("ListItem","ListItem");if(t.to>=l||r&&r.to<l||f.from>0&&!/[^\s>]/.test(o.lineAt(f.from-1).text)){let e=s.length>1?s[s.length-2]:null,t,r="";e&&e.item?(t=f.from+e.from,r=e.marker(o,1)):t=f.from+(e?e.to:0);let i=[{from:t,to:l,insert:r}];return"OrderedList"==u.node.name&&w(u.item,o,i,-2),e&&"OrderedList"==e.node.name&&w(e.item,o,i),{range:n.jT.cursor(t+r.length),changes:i}}{let t=S(s,e,f);return{range:n.jT.cursor(l+t.length+1),changes:{from:f.from,insert:t+e.lineBreak}}}}if("Blockquote"==u.node.name&&m&&f.from){let r=o.lineAt(f.from-1),n=/>\s*$/.exec(r.text);if(n&&n.index==u.from){let o=e.changes([{from:r.from+n.index,to:r.to},{from:f.from+u.from,to:f.to}]);return{range:t.map(o),changes:o}}}let a=[];"OrderedList"==u.node.name&&w(u.item,o,a);let c=u.item&&u.item.from<f.from,h="";if(!c||/^[\s\d.)\-+*>]*/.exec(f.text)[0].length>=u.to)for(let e=0,t=s.length-1;e<=t;e++)h+=e!=t||c?s[e].blank(e<t?(0,n.IS)(f.text,4,s[e+1].from)-h.length:null):s[e].marker(o,1);let d=l;for(;d>f.from&&/\s/.test(f.text.charAt(d-f.from-1));)d--;return h=A(h,e),function(e,t){if("OrderedList"!=e.name&&"BulletList"!=e.name)return!1;let r=e.firstChild,n=e.getChild("ListItem","ListItem");if(!n)return!1;let o=t.lineAt(r.to),l=t.lineAt(n.from),i=/^[\s>]*$/.test(o.text);return o.number+(i?0:1)<l.number}(u.node,e.doc)&&(h=S(s,e,f)+e.lineBreak+h),a.push({from:d,to:l,insert:e.lineBreak+h}),{range:n.jT.cursor(d+h.length+1),changes:a}});return!i&&(t(e.update(f,{scrollIntoView:!0,userEvent:"input"})),!0)};function b(e){return"QuoteMark"==e.name||"ListMark"==e.name}function S(e,t,r){let o="";for(let t=0,l=e.length-2;t<=l;t++)o+=e[t].blank(t<l?(0,n.IS)(r.text,4,e[t+1].from)-o.length:null,t<l);return A(o,t)}let y=({state:e,dispatch:t})=>{let r=(0,l.qz)(e),o=null,i=e.changeByRange(t=>{let l=t.from,{doc:i}=e;if(t.empty&&k.isActiveAt(e,t.from)){let t=i.lineAt(l),o=B(function(e,t){let r=e.resolveInner(t,-1),n=t;b(r)&&(n=r.from,r=r.parent);for(let e;e=r.childBefore(n);)if(b(e))n=e.from;else if("OrderedList"==e.name||"BulletList"==e.name)n=(r=e.lastChild).to;else break;return r}(r,l),i);if(o.length){let r=o[o.length-1],i=r.to-r.spaceAfter.length+(r.spaceAfter?1:0);if(l-t.from>i&&!/\S/.test(t.text.slice(i,l-t.from)))return{range:n.jT.cursor(t.from+i),changes:{from:t.from+i,to:l}};if(l-t.from==i&&(!r.item||t.from<=r.item.from||!/\S/.test(t.text.slice(0,r.to)))){let o=t.from+r.from;if(r.item&&r.node.from<r.item.from&&/\S/.test(t.text.slice(r.from,r.to))){let l=r.blank((0,n.IS)(t.text,4,r.to)-(0,n.IS)(t.text,4,r.from));return o==t.from&&(l=A(l,e)),{range:n.jT.cursor(o+l.length),changes:{from:o,to:t.from+r.to,insert:l}}}if(o<l)return{range:n.jT.cursor(o),changes:{from:o,to:l}}}}}return o={range:t}});return!o&&(t(e.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},v=[{key:"Enter",run:I},{key:"Backspace",run:y}],C=(0,s.html)({matchClosingTags:!1});function T(e={}){var t,r;let{codeLanguages:i,defaultCodeLanguage:s,addKeymap:u=!0,base:{parser:m}=g,completeHTMLTags:a=!0,htmlTagLanguage:c=C}=e;if(!(m instanceof f.xj))throw RangeError("Base parser provided to `markdown` should be a Markdown parser");let h=e.extensions?[e.extensions]:[],d=[c.support],k;s instanceof l.ri?(d.push(s.support),k=s.language):s&&(k=s);let x=i||k?(t=i,r=k,e=>{if(e&&t){let r=null;if(e=/\S*/.exec(e)[0],(r="function"==typeof t?t(e):l.c6.matchLanguageName(t,e,!0))instanceof l.c6)return r.support?r.support.language.parser:l.Be.getSkippingParser(r.load());if(r)return r.parser}return r?r.parser:null}):void 0;h.push((0,f.zY)({codeParser:x,htmlParser:c.language.parser})),u&&d.push(n.Wl.high(o.$f.of(v)));let B=p(m.configure(h));return a&&d.push(B.data.of({autocomplete:j})),new l.ri(B,d)}function j(e){let{state:t,pos:r}=e,o=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(r-25,r));if(!o)return null;let f=(0,l.qz)(t).resolveInner(r,-1);for(;f&&!f.type.isTop;){if("CodeBlock"==f.name||"FencedCode"==f.name||"ProcessingInstructionBlock"==f.name||"CommentBlock"==f.name||"Link"==f.name||"Image"==f.name)return null;f=f.parent}return{from:r-o[0].length,to:r,options:function(){if(q)return q;let e=(0,s.htmlCompletionSource)(new i.TK(n.yy.create({extensions:C}),0,!0));return q=e?e.options:[]}(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let q=null}}]);