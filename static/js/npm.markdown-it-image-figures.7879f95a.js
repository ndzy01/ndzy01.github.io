"use strict";(self.webpackChunkndzy=self.webpackChunkndzy||[]).push([["9511"],{85355:function(t,e,n){n.d(e,{Z:function(){return a}});let r=new Set([!0,!1,"alt","title"]);function i(t,e){return(Array.isArray(t)?t:[]).filter(([t])=>t!==e)}function s(t,e){t&&t.attrs&&(t.attrs=i(t.attrs,e))}function a(t,e){e=e||{},t.core.ruler.before("linkify","image_figures",function(n){let a=1;for(let l=1,c=n.tokens.length;l<c-1;++l){let o;let h=n.tokens[l];if("inline"!==h.type||!h.children||1!==h.children.length&&3!==h.children.length||1===h.children.length&&"image"!==h.children[0].type)continue;if(3===h.children.length){let[t,e,n]=h.children;if("link_open"!==t.type||"image"!==e.type||"link_close"!==n.type)continue}if(0!==l&&"paragraph_open"!==n.tokens[l-1].type||l!==c-1&&"paragraph_close"!==n.tokens[l+1].type)continue;let f=n.tokens[l-1];if(f.type="figure_open",f.tag="figure",n.tokens[l+1].type="figure_close",n.tokens[l+1].tag="figure",e.dataType&&n.tokens[l-1].attrPush(["data-type","image"]),e.link&&1===h.children.length){[o]=h.children;let t=new n.Token("link_open","a",1);t.attrPush(["href",o.attrGet("src")]),h.children.unshift(t),h.children.push(new n.Token("link_close","a",-1))}if(o=1===h.children.length?h.children[0]:h.children[1],e.figcaption){let a=function(t,e){if(!r.has(t))throw TypeError(`figcaption must be one of: ${[...r]}.`);if("alt"===t)return e.content;let n=e.attrs.find(([t])=>"title"===t);return Array.isArray(n)&&n[1]?(s(e,"title"),n[1]):void 0}(e.figcaption,o);if(a){let[e]=t.parseInline(a,n.env);h.children.push(new n.Token("figcaption_open","figcaption",1)),h.children.push(...e.children),h.children.push(new n.Token("figcaption_close","figcaption",-1)),o.attrs&&(o.attrs=i(o.attrs,"title"))}}if(e.copyAttrs&&o.attrs){let t=!0===e.copyAttrs?"":e.copyAttrs;f.attrs=o.attrs.filter(([e])=>e.match(t)).map(t=>Array.from(t))}if(e.tabindex&&(n.tokens[l-1].attrPush(["tabindex",a]),a++),e.lazy&&(o.attrs.some(([t])=>"loading"===t)||o.attrs.push(["loading","lazy"])),e.async&&(o.attrs.some(([t])=>"decoding"===t)||o.attrs.push(["decoding","async"])),e.classes&&"string"==typeof e.classes){let t=!1;for(let n=0,r=o.attrs.length;n<r&&!t;n++){let r=o.attrs[n];"class"===r[0]&&(r[1]=`${r[1]} ${e.classes}`,t=!0)}t||o.attrs.push(["class",e.classes])}if(e.removeSrc){let t=o.attrs.find(([t])=>"src"===t);o.attrs.push(["data-src",t[1]]),s(o,"src")}}})}}}]);