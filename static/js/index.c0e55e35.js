(()=>{"use strict";var e={2669:function(e,t,n){var r=n("5893"),a=n("7294"),i=n("745"),o=n("9655"),l=n("9250");let s=()=>(console.error((0,l.lk)()),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"出错了！"}),(0,r.jsx)("p",{children:"抱歉，页面不存在或您没有访问权限。"}),(0,r.jsx)("a",{href:"/",children:"返回首页"})]})),d=[{src:"https://www.ndzy01.com/ndzy-docs",name:"文档"},{src:"https://www.ndzy01.com/ndzy-antd",name:"在线文档"},{src:"https://www.ndzy01.com/ndzy-project",name:"ndzy-project"},{src:"https://www.yuque.com/u22409297/fqv2ol",name:"blog"},{src:"https://www.yuque.com/u22409297/aqgf01",name:"数据结构与算法"},{src:"https://labuladong.github.io/algo/di-ling-zh-bfe1b/xue-xi-sua-01220/",name:"算法小抄"},{src:"http://zh.zlibrary-china.se/",name:"图书"},{src:"https://github.com/liujuping",name:"liujuping"},{src:"https://pythontutor.com/javascript.html#mode=edit",name:"javascript可视化"},{src:"https://www.jsdelivr.com/package/gh/ndzy01/img?tab=stats",name:"ndzy img 访问量统计"},{src:"https://juejin.cn/post/6844904131795091464",name:"React源码学习"},{src:"https://pomb.us/build-your-own-react/",name:"Build your own React"},{src:"https://cn1.hkss-net.xyz/auth/login",name:"vpn"},{src:"https://visualgo.net/zh",name:"算法可视化"},{src:"https://visualgo.net/zh",name:"算法可视化"},{src:"https://ndzy01.gitee.io/ndzy-manage/",name:"管理页"}];var c=n("2444"),u=n("9948"),h=n("7149"),m=n("2239"),p=n("2925"),f=n("9408");let v=n("430").Z.create({baseURL:"https://ndzy-s.vercel.app",timeout:6e4,withCredentials:!1});v.interceptors.request.use(e=>{let t=sessionStorage.getItem("token");return t&&(e.headers={Authorization:`Bearer ${t}`}),e},e=>{Promise.reject(e).then()}),v.interceptors.response.use(e=>{var t,n;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.msg)&&f.ZP.info({content:null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.msg}).then(),e.data},e=>{var t,n;if((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.statusCode)===401){f.ZP.error({content:"登录失效，请重新登录"}).then(()=>{"#/login"!==window.location.hash&&(window.location.href=`${window.location.origin}/#/login`)});return}f.ZP.error({content:"出错了，请联系管理员"}).then()});let y=e=>[...e].sort((e,t)=>e.order-t.order).map(e=>{let t={...e,key:e.id,label:e.title,value:e.id};return Array.isArray(e.children)&&e.children.length>0?t.children=y(e.children):delete t.children,t}),w="NDZY",[j,g]=function(e,t){let n=a.createContext(void 0);function i(e){let{children:t,...i}=e,o=a.useMemo(()=>i,Object.values(i));return(0,r.jsx)(n.Provider,{value:o,children:t})}return i.displayName=e+"Provider",[i,function(r){let i=a.useContext(n);if(i)return i;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}(w),x=()=>g(w),b=e=>{let{children:t}=e,[n,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)([]),[s,d]=(0,a.useState)(),c=async()=>{i(!0);let e=await v({url:"/",method:"GET"});return e&&sessionStorage.setItem("name",e.data.name),i(!1),e},u=async e=>{var t,n,r;i(!0);let a=await v({url:"/user/login",method:"POST",data:e});(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.token)&&(sessionStorage.setItem("token",null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.token),sessionStorage.setItem("name",null==a?void 0:null===(r=a.data)||void 0===r?void 0:r.name),window.location.reload()),i(!1)},h=async()=>{i(!0);let e=await v({url:"/article",method:"GET"});i(!1),l(y((null==e?void 0:e.data)||[]))},m=async e=>{i(!0),await v({url:`/article/${e}`,method:"DELETE"}),i(!1),d(void 0),h().then()},p=async(e,t)=>{i(!0),await v({url:`/article/${e}`,method:"PATCH",data:t});let n=await v({url:`/article/${e}`,method:"GET"});i(!1),d(null==n?void 0:n.data),h().then()},f=async e=>{i(!0),await v({url:"/article",method:"POST",data:e}),i(!1),h().then()},w=async e=>{i(!0);let t=await v({url:`/article/${e}`,method:"GET"});i(!1),d(null==t?void 0:t.data),h().then()},g=async e=>{let t;i(!0);let n=await v(`/article/${e}`);return t=n.data.root?(await v("/article/pid/0")).data:(await v(`/article/pid/${n.data.parent.id}`)).data,i(!1),t},x=async e=>{i(!0),await v("/article/updateOrder",{data:e,method:"POST"}),i(!1)};return(0,a.useEffect)(()=>{window.addEventListener("popstate",function(){}),window.addEventListener("routerchange",function(){c().then()}),document.addEventListener("DOMContentLoaded",e=>{})},[]),(0,r.jsx)(j,{loading:n,setLoading:i,articles:o,article:s,api:{login:{auth:c,login:u},article:{query:h,del:m,find:w,save:p,create:f,initOrderData:g,updateOrder:x}},children:t})},O=()=>{let e=(0,l.s0)(),t=x();return(0,r.jsx)(c.ZP,{locale:p.default,children:(0,r.jsxs)(u.Z,{name:"login",style:{maxWidth:600},initialValues:{remember:!0},onFinish:n=>{t.api.login.login(n).then(()=>{e("/"),window.location.reload()})},autoComplete:"off",children:[(0,r.jsx)(u.Z.Item,{labelCol:{span:24},wrapperCol:{span:24},label:"手机号",name:"mobile",rules:[{required:!0,message:"手机号不能为空"}],children:(0,r.jsx)(h.Z,{})}),(0,r.jsx)(u.Z.Item,{labelCol:{span:24},wrapperCol:{span:24},label:"密码",name:"password",rules:[{required:!0,message:"密码不能为空"}],children:(0,r.jsx)(h.Z.Password,{})}),(0,r.jsx)(u.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,r.jsx)(m.ZP,{type:"primary",htmlType:"submit",loading:t.loading,children:"登陆"})})]})})};var S=n("1504");async function k(){return{name:sessionStorage.getItem("name")}}let z=[{key:"/",label:"首页"},{type:"divider"},{key:"01",label:"文章",children:[{key:"/article",label:"首页"}]}],E=(0,o.cP)([{path:"/",element:(0,r.jsx)(()=>{let e=(0,l.f_)(),t=(0,l.s0)();return(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("aside",{className:"sidebar",children:[(0,r.jsxs)("header",{className:"header",children:[(0,r.jsxs)("h1",{children:["欢迎 ",null==e?void 0:e.name]}),(0,r.jsx)("div",{className:"user-info",children:(0,r.jsx)("a",{onClick:()=>{sessionStorage.setItem("token",""),sessionStorage.setItem("name",""),t("/login"),window.location.reload()},children:"注销"})})]}),(0,r.jsx)(S.Z,{style:{borderRadius:5},onClick:e=>{t(e.key)},defaultSelectedKeys:["/"],mode:"inline",items:z})]}),(0,r.jsx)("main",{className:"main-content",children:(0,r.jsx)("section",{className:"content",children:(0,r.jsx)(l.j3,{})})})]})},{}),errorElement:(0,r.jsx)(s,{}),loader:k,children:[{index:!0,element:(0,r.jsx)(()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{padding:"1rem"},children:(0,r.jsx)("ul",{children:d.map(e=>(0,r.jsx)("li",{style:{margin:"1rem 0"},children:(0,r.jsx)("a",{target:"_blank",href:e.src,children:e.name})},Math.random()))})})}),{})},{path:"/article",element:(0,r.jsx)(()=>(0,r.jsx)(l.j3,{}),{}),errorElement:(0,r.jsx)(s,{}),children:[{index:!0,element:(0,r.jsx)(()=>((0,l.f_)(),(0,r.jsx)("div",{children:"Article"})),{})},{path:"/article/edit",element:(0,r.jsx)(O,{})}]},{path:"/login",element:(0,r.jsx)(O,{})}]}]),P=document.getElementById("root");P&&i.createRoot(P).render((0,r.jsx)(a.StrictMode,{children:(0,r.jsx)(()=>{var e,t,n;return t=(e=window.history).pushState,n=e.replaceState,e.pushState=function(n){return"function"==typeof e.onpushstate&&e.onpushstate({state:n}),window.dispatchEvent(new Event("routerchange")),t.apply(e,arguments)},e.replaceState=function(t){return"function"==typeof e.onreplacestate&&e.onreplacestate({state:t}),window.dispatchEvent(new Event("routerchange")),n.apply(e,arguments)},(0,r.jsx)(b,{children:(0,r.jsx)(o.pG,{router:E})})},{})}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a||"object"==typeof r&&r&&(4&a&&r.__esModule||16&a&&"function"==typeof r.then))return r;var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(function(e){o[e]=function(){return r[e]}});return o.default=function(){return r},n.d(i,o),i}})(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=function(t,r,a,i){if(r){i=i||0;for(var o=e.length;o>0&&e[o-1][2]>i;o--)e[o]=e[o-1];e[o]=[r,a,i];return}for(var l=1/0,o=0;o<e.length;o++){for(var r=e[o][0],a=e[o][1],i=e[o][2],s=!0,d=0;d<r.length;d++)(!1&i||l>=i)&&Object.keys(n.O).every(function(e){return n.O[e](r[d])})?r.splice(d--,1):(s=!1,i<l&&(l=i));if(s){e.splice(o--,1);var c=a();void 0!==c&&(t=c)}}return t}})(),n.rv=function(){return"1.0.8"},(()=>{var e={980:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a=r[0],i=r[1],o=r[2],l,s,d=0;if(a.some(function(t){return 0!==e[t]})){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(o)var c=o(n)}for(t&&t(r);d<a.length;d++)s=a[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},r=self.webpackChunkndzy=self.webpackChunkndzy||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.ruid="bundler=rspack@1.0.8";var r=n.O(void 0,["649","534","651","283","351","524","790","917","932","449","906","863","179","518","900","199","277","388","177","784","20","707","269","687","640","348","151","18","374","66","239","931","405","513","500","240","440","180","476","122"],function(){return n("2669")});r=n.O(r)})();